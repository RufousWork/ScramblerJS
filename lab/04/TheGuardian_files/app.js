function s_doPlugins(e){e.prop61=e.eVar9="D=g",e.campaign||(e.campaign=e.getParamValue("CMP")),e.campaign=e.getValOnce(e.campaign,"s_campaign",0),e.campaign&&(e.eVar38=e.eVar39="D=v0");var t=new Date;now=Math.floor(t.getTime()/864e5);var i=now-6,n=e.c_r("s_daily_habit")+"";n=n.split(","),newDiary=[],vC=1;for(var a=0,o=n.length;o>a;++a){var s=n[a];s>=i&&s<now&&(vC+=1)&&newDiary.push(s)}newDiary.push(now),newDiary=newDiary.join(","),t.setFullYear(t.getFullYear()+5),e.c_w("s_daily_habit",newDiary,t),e.eVar64=vC,e.eVar10=e.getDaysSinceLastVisit("s_lv"),e.prop16=e.getNewRepeat(30),e.prop71=e.getPreviousValue(e.channel,"s_prev_ch")}function E(){return function(){}}function AppMeasurement_Module_Media(e){var t=this;t.s=e;var i=window;i.s_c_in||(i.s_c_il=[],i.s_c_in=0),t._il=i.s_c_il,t._in=i.s_c_in,t._il[t._in]=t,i.s_c_in++,t._c="s_m",t.list=[],t.open=function(e,i,n,a){var o,s={},r=new Date,c="";if(i||(i=-1),e&&n){if(t.list||(t.list={}),t.list[e]&&t.close(e),a&&a.id&&(c=a.id),c)for(o in t.list)!Object.prototype[o]&&t.list[o]&&t.list[o].Rf==c&&t.close(t.list[o].name);s.name=e,s.length=i,s.xc=0,s.U=0,s.playerName=t.playerName?t.playerName:n,s.Rf=c,s.ce=0,s.aa=0,s.timestamp=Math.floor(r.getTime()/1e3),s.za=0,s.wc=s.timestamp,s.T=-1,s.Dc="",s.ha=-1,s.Ic=0,s.Qd={},s.Mc=0,s.Ja=0,s.V="",s.Ob=0,s.Yd=0,s.Cc=0,s.Kc=0,s.xa=!1,s.Jb="",s.yc="",s.zc=0,s.sc=!1,s.na="",s.complete=0,s.Af=0,s.Hb=0,s.Ib=0,t.list[e]=s,s.Ud=!1}},t.openAd=function(e,i,n,a,o,s,r,c){var l={};t.open(e,i,n,c),(l=t.list[e])&&(l.xa=!0,l.Jb=a,l.yc=o,l.zc=s,l.na=r)},t.Oe=function(e){var i=t.list[e];t.list[e]=0,i&&i.monitor&&clearTimeout(i.monitor.O)},t.close=function(e){t.ja(e,0,-1)},t.play=function(e,i,n,a){var o=t.ja(e,1,i,n,a);o&&!o.monitor&&(o.monitor={},o.monitor.update=function(){1==o.za&&t.ja(o.name,3,-1),o.monitor.O=setTimeout(o.monitor.update,1e3)},o.monitor.update())},t.click=function(e,i){t.ja(e,7,i)},t.complete=function(e,i){t.ja(e,5,i)},t.stop=function(e,i){t.ja(e,2,i)},t.track=function(e){t.ja(e,4,-1)},t.yf=function(e,i){var n,a,o="a.media.",s=e.linkTrackVars,r=e.linkTrackEvents,c="m_i",l=e.contextData;if(i.xa&&(o+="ad.",i.Jb&&(l["a.media.name"]=i.Jb,l[o+"pod"]=i.yc,l[o+"podPosition"]=i.zc),i.Mc||(l[o+"CPM"]=i.na)),i.sc&&(l[o+"clicked"]=!0,i.sc=!1),l["a.contentType"]="video"+(i.xa?"Ad":""),l["a.media.channel"]=t.channel,l[o+"name"]=i.name,l[o+"playerName"]=i.playerName,i.length>0&&(l[o+"length"]=i.length),l[o+"timePlayed"]=Math.floor(i.aa),Math.floor(i.aa)>0&&(l[o+"timePlayed"]=Math.floor(i.aa)),i.Mc||(l[o+"view"]=!0,c="m_s",t.Heartbeat&&t.Heartbeat.enabled&&(c=i.xa?t.__primetime?"mspa_s":"msa_s":t.__primetime?"msp_s":"ms_s"),i.Mc=1),i.V&&(l[o+"segmentNum"]=i.Ja,l[o+"segment"]=i.V,i.Ob>0&&(l[o+"segmentLength"]=i.Ob),i.Cc&&i.aa>0&&(l[o+"segmentView"]=!0)),!i.Af&&i.complete&&(l[o+"complete"]=!0,i.gg=1),i.Hb>0&&(l[o+"milestone"]=i.Hb),i.Ib>0&&(l[o+"offsetMilestone"]=i.Ib),s)for(a in l)Object.prototype[a]||(s+=",contextData."+a);n=l["a.contentType"],e.pe=c,e.pev3=n;var d,u;if(t.contextDataMapping){e.events2||(e.events2=""),s&&(s+=",events");for(a in t.contextDataMapping)if(!Object.prototype[a]){if(c=a.length>o.length&&a.substring(0,o.length)==o?a.substring(o.length):"",n=t.contextDataMapping[a],"string"==typeof n)for(d=n.split(","),u=0;u<d.length;u++)n=d[u],"a.contentType"==a?(s&&(s+=","+n),e[n]=l[a]):"view"==c||"segmentView"==c||"clicked"==c||"complete"==c||"timePlayed"==c||"CPM"==c?(r&&(r+=","+n),"timePlayed"==c||"CPM"==c?l[a]&&(e.events2+=(e.events2?",":"")+n+"="+l[a]):l[a]&&(e.events2+=(e.events2?",":"")+n)):"segment"==c&&l[a+"Num"]?(s&&(s+=","+n),e[n]=l[a+"Num"]+":"+l[a]):(s&&(s+=","+n),e[n]=l[a]);else("milestones"==c||"offsetMilestones"==c)&&(a=a.substring(0,a.length-1),l[a]&&t.contextDataMapping[a+"s"][l[a]]&&(r&&(r+=","+t.contextDataMapping[a+"s"][l[a]]),e.events2+=(e.events2?",":"")+t.contextDataMapping[a+"s"][l[a]]));l[a]&&(l[a]=0),"segment"==c&&l[a+"Num"]&&(l[a+"Num"]=0)}}e.linkTrackVars=s,e.linkTrackEvents=r},t.ja=function(e,i,n,a,o){var s,r,c,l,d,u={},h=(new Date).getTime()/1e3,p=t.trackVars,m=t.trackEvents,f=t.trackSeconds,g=t.trackMilestones,v=t.trackOffsetMilestones,b=t.segmentByMilestones,k=t.segmentByOffsetMilestones,y=1,w={};if(t.channel||(t.channel=t.s.w.location.hostname),(u=e&&t.list&&t.list[e]?t.list[e]:0)&&(u.xa&&(f=t.adTrackSeconds,g=t.adTrackMilestones,v=t.adTrackOffsetMilestones,b=t.adSegmentByMilestones,k=t.adSegmentByOffsetMilestones),0>n&&(n=1==u.za&&u.wc>0?h-u.wc+u.T:u.T),u.length>0&&(n=n<u.length?n:u.length),0>n&&(n=0),u.xc=n,u.length>0&&(u.U=u.xc/u.length*100,u.U=u.U>100?100:u.U),u.T<0&&(u.T=n),d=u.Ic,w.name=e,w.ad=u.xa,w.length=u.length,w.openTime=new Date,w.openTime.setTime(1e3*u.timestamp),w.offset=u.xc,w.percent=u.U,w.playerName=u.playerName,w.mediaEvent=u.ha<0?"OPEN":1==i?"PLAY":2==i?"STOP":3==i?"MONITOR":4==i?"TRACK":5==i?"COMPLETE":7==i?"CLICK":"CLOSE",i>2||i!=u.za&&(2!=i||1==u.za))){if(o||(a=u.Ja,o=u.V),i){if(1==i&&(u.T=n),(3>=i||i>=5)&&u.ha>=0&&(y=!1,p=m="None",u.ha!=n)){if(r=u.ha,r>n&&(r=u.T,r>n&&(r=n)),c=g?g.split(","):0,u.length>0&&c&&n>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&r/u.length*100<s&&u.U>=s&&(y=!0,l=c.length,w.mediaEvent="MILESTONE",u.Hb=w.milestone=s);if((c=v?v.split(","):0)&&n>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&s>r&&n>=s&&(y=!0,l=c.length,w.mediaEvent="OFFSET_MILESTONE",u.Ib=w.offsetMilestone=s)}if(u.Yd||!o){if(b&&g&&u.length>0){if(c=g.split(","))for(c.push("100"),l=r=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&(u.U<s&&(a=l+1,o="M:"+r+"-"+s,l=c.length),r=s)}else if(k&&v&&(c=v.split(",")))for(c.push(""+(u.length>0?u.length:"E")),l=r=0;l<c.length;l++)((s=c[l]?parseFloat(""+c[l]):0)||"E"==c[l])&&((s>n||"E"==c[l])&&(a=l+1,o="O:"+r+"-"+s,l=c.length),r=s);o&&(u.Yd=!0)}(o||u.V)&&o!=u.V&&(u.Kc=!0,u.V||(u.Ja=a,u.V=o),u.ha>=0&&(y=!0)),(i>=2||u.U>=100)&&u.T<n&&(u.ce+=n-u.T,u.aa+=n-u.T),(2>=i||3==i&&!u.za)&&(u.Dc+=(1==i||3==i?"S":"E")+Math.floor(n),u.za=3==i?1:i),!y&&u.ha>=0&&3>=i&&(f=f?f:0)&&u.aa>=f&&(y=!0,w.mediaEvent="SECONDS"),u.wc=h,u.T=n}(!i||3>=i&&u.U>=100)&&(2!=u.za&&(u.Dc+="E"+Math.floor(n)),i=0,p=m="None",w.mediaEvent="CLOSE"),7==i&&(y=w.clicked=u.sc=!0),(5==i||t.completeByCloseOffset&&(!i||u.U>=100)&&u.length>0&&n>=u.length-t.completeCloseOffsetThreshold)&&(y=w.complete=u.complete=!0),h=w.mediaEvent,"MILESTONE"==h?h+="_"+w.milestone:"OFFSET_MILESTONE"==h&&(h+="_"+w.offsetMilestone),u.Qd[h]?w.eventFirstTime=!1:(w.eventFirstTime=!0,u.Qd[h]=1),w.event=w.mediaEvent,w.timePlayed=u.ce,w.segmentNum=u.Ja,w.segment=u.V,w.segmentLength=u.Ob,t.monitor&&4!=i&&t.monitor(t.s,w),t.Heartbeat&&t.Heartbeat.enabled&&(w=[],w.push(u.name),u.Ud||(u.Ud=!0,w.push(u.length),w.push(u.playerName),u.xa?(w.push(u.Jb),w.push(u.yc),w.push(u.zc),w.push(u.na),t.Heartbeat.callMethodWhenReady("openAd",w)):t.Heartbeat.callMethodWhenReady("open",w),w=[],w.push(u.name)),0==i?t.Heartbeat.callMethodWhenReady("close",w):(w.push(n),1==i?(w.push(u.Ja),w.push(u.V),w.push(u.Ob),t.Heartbeat.callMethodWhenReady("play",w)):2==i?t.Heartbeat.callMethodWhenReady("stop",w):3==i?t.Heartbeat.callMethodWhenReady("monitor",w):5==i?t.Heartbeat.callMethodWhenReady("complete",w):7==i&&t.Heartbeat.callMethodWhenReady("click",w)),u.ha>=0&&(y=!1)),0==i&&t.Oe(e),y&&u.Ic==d&&(e={},e.contextData={},e.linkTrackVars=p,e.linkTrackEvents=m,e.linkTrackVars||(e.linkTrackVars=""),e.linkTrackEvents||(e.linkTrackEvents=""),t.yf(e,u),e.linkTrackVars||(e["!linkTrackVars"]=1),e.linkTrackEvents||(e["!linkTrackEvents"]=1),t.s.track(e),u.Kc?(u.Ja=a,u.V=o,u.Cc=!0,u.Kc=!1):u.aa>0&&(u.Cc=!1),u.Dc="",u.Hb=u.Ib=0,u.aa-=Math.floor(u.aa),u.ha=n,u.Ic++)}return u},t.vf=function(e,i,n,a,o){var s=0;e&&(!t.autoTrackMediaLengthRequired||i&&i>0)&&(t.list&&t.list[e]?s=1:(1==n||3==n)&&(t.open(e,i,"HTML5 Video",o),s=1),s&&t.ja(e,n,a,-1,0))},t.attach=function(e){var i,n,a;e&&e.tagName&&"VIDEO"==e.tagName.toUpperCase()&&(t.hb||(t.hb=function(e,i,n){var a,o;t.autoTrack&&(a=e.currentSrc,(o=e.duration)||(o=-1),0>n&&(n=e.currentTime),t.vf(a,o,i,n,e))}),i=function(){t.hb(e,1,-1)},n=function(){t.hb(e,1,-1)},t.ra(e,"play",i),t.ra(e,"pause",n),t.ra(e,"seeking",n),t.ra(e,"seeked",i),t.ra(e,"ended",function(){t.hb(e,0,-1)}),t.ra(e,"timeupdate",i),(a=function(){!e.paused&&!e.ended&&!e.seeking&&t.hb(e,3,-1),setTimeout(a,1e3)})())},t.ra=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener&&e.addEventListener(t,i,!1)},void 0==t.completeByCloseOffset&&(t.completeByCloseOffset=1),void 0==t.completeCloseOffsetThreshold&&(t.completeCloseOffsetThreshold=1);var n=new function(e){this.Je=function(e){this.s=e,this.enabled=!1,this.v=new this.Ka.Of.ne(e)},this.open=function(e,t,i){this.v.open(e,t,i)},this.openAd=function(e,t,i,n,a,o,s){this.v.openAd(e,t,i,n,a,o,s)},this.close=function(e){this.v.close(e)},this.play=function(e,t,i,n,a){this.v.play(e,t,i,n,a)},this.monitor=function(e,t){this.v.monitor(e,t)},this.stop=function(e,t){this.v.stop(e,t)},this.click=function(e,t){this.v.click(e,t)},this.complete=function(e,t){this.v.complete(e,t)},this.setup=function(e){this.v.Wf(e)},this.bufferStart=function(){this.v.xf()},this.bitrateChange=function(e){this.v.wf(e)},this.updateQoSInfo=function(e,t,i){this.v.bg(e,t,i)},this.adBreakStart=function(e){this.v.sf(e)},this.adBreakEnd=function(){this.v.rf()},this.trackError=function(e,t,i){this.v.$f(e,t,i)},this.sessionComplete=function(){this.v.Uf()},this.__setPsdkVersion=function(e){this.v.Ke(e)},function(e){if("undefined"==typeof t)var t={};if("undefined"==typeof i)var i={};i.event||(i.event={}),i.a||(i.a={}),i.H||(i.H={}),i.bb||(i.bb={}),i.M||(i.M={}),function(e){e.extend=function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.r=t.prototype,e}}(t),function(e){e.Q=function(e,t){var i,n=[];for(i in t)t.hasOwnProperty(i)&&"function"==typeof t[i]&&n.push(i);for(i=0;i<n.length;i++){var a=n[i];e.prototype[a]=t[a]}}}(t),function(e){e.Md={Pd:function(){this.ea&&this.ea.apply(this,arguments),this.ea=j}}}(t),function(e){e.Oa=!1,e.P={N:function(e){this.Ua=!0,this.Ab=e},jg:function(){this.Ua=!1},log:function(t){e.Oa&&this.Ua&&window.console&&window.console.log&&window.console.log(this.Ab+t)},info:function(t){e.Oa&&this.Ua&&window.console&&window.console.info&&window.console.info(this.Ab+t)},warn:function(t){e.Oa&&this.Ua&&window.console&&window.console.warn&&window.console.warn(this.Ab+t)},error:function(t){if(e.Oa&&this.Ua&&window.console&&window.console.error)throw t=this.Ab+t,window.console.error(t),Error(t)}}}(t),function(e){function t(e,t){this.type=e,this.data=t}t.wb="success",t.Xb="error",e.S=t}(t),function(e){function t(){this.F={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(this.F[e]=this.F[e]||[],this.F[e].push({zf:t,Ld:i||window}))},t.prototype.dispatchEvent=function(e){if(e.type)for(var t in this.F)if(this.F.hasOwnProperty(t)&&e.type===t){var i=this.F[t];for(t=0;t<i.length;t++)i[t].zf.call(i[t].Ld,e);break}},t.prototype.eb=function(e){if(e){var t,i;for(i in this.F)if(this.F.hasOwnProperty(i)){for(t=this.F[i].length-1;t>=0;t--)this.F[i][t].Ld===e&&this.F[i].splice(t,1);this.F[i].length||delete this.F[i]}}else this.F={}},e.kd=t}(t),function(e){function t(){return t.prototype.Ta||(t.prototype.Ta=new i),t.prototype.Ta}var i=e.kd;e.ca=t}(t),function(e){function t(){}function i(){i.r.constructor.call(this)}var n=e.S,a=e.kd;t.ld="GET",e.extend(i,a),i.prototype.Cf=function(t){if(t.I=new window.XMLHttpRequest,!("withCredentials"in t.I)&&(t.I="undefined"!=typeof window.XDomainRequest?new window.XDomainRequest:j,t.I)){var a=this;t.I.onreadystatechange=function(){if(4===t.I.readyState){var o={};o[i.pd]=t.I.status,t.I.status>=200&&t.I.status<400?(o[i.od]=t.I.responseText,o[i.qb]=a,a.dispatchEvent(new e.S(n.wb,o))):a.dispatchEvent(new e.S(n.Xb,o))}}}},i.Eb=j,i.prototype.Mf=function(t){i.Eb||(i.Eb=new Image,i.Eb.alt=""),i.Eb.src=t.url,t={},t[i.pd]=200,t[i.od]="",t[i.qb]=this,this.dispatchEvent(new e.S(n.wb,t))},i.prototype.close=function(){this.eb()},i.prototype.load=function(e){e&&e.method&&e.url&&(this.Cf(e),e.I?(e.I.open(e.method,e.url,!0),e.I.send()):this.Mf(e))},i.pd="status",i.od="response",i.qb="instance",e.Ie=t,e.He=function(e,t){this.url=e||j,this.method=t,this.I=j},e.Ge=i}(t),function(e,t){function i(){}i.Fa="report",i.qa="what",i.Ga="reset",i.Sb="account",i.cc="sc_tracking_server",i.xb="tracking_server",i.lb="check_status_server",i.rb="job_id",i.Pa="publisher",i.fc="stream_type",i.$b="ovp",i.ec="sdk",i.bd="channel",i.nb="debug_tracking",i.yb="track_local",i.Ha="visitor_id",i.Aa="analytics_visitor_id",i.Da="marketing_cloud_visitor_id",i.i="name",i.Ca="length",i.Ea="player_name",i.X="timer_interval",i.rd="tracking_interval",i.cd="check_status_interval",i.gc="track_external_errors",i.ac="parent_name",i.nd="parent_pod",i.bc="parent_pod_position",i.ub="parent_pod_offset",i.na="parent_pod_cpm",i.B="offset",i.vb="source",i.Yb="error_id",i.kb="bitrate",i.Zb="fps",i.Vb="dropped_frames",t.event.ba=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e,t)}e.extend(i,e.S),i.La="api_destroy",i.Tb="api_config",i.Uc="api_open_main",i.Tc="api_open_ad",i.Qc="api_close",i.Vc="api_play",i.Sc="api_monitor",i.Yc="api_stop",i.Pc="api_click",i.Rc="api_complete",i.Zc="api_track_error",i.Wc="api_qos_info",i.Nc="api_bitrate_change",i.Oc="api_buffer_start",i.Ub="api_pod_offset",i.Xc="api_session_complete",t.event.Ma=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e,t)}e.extend(i,e.S),i.Ba="context_data_available",t.event.dd=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e,t)}e.extend(i,e.S),i.oa="data_request",i.mb="data_response",i.ya={Qa:"tracking_timer_interval",md:"main_video_publisher"},t.event.Wb=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e,t)}e.extend(i,e.S),i.sb="network_check_status_complete",t.event.tb=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e,t)}e.extend(i,e.S),i.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",i.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",i.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",i.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",i.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",i.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",t.event.Na=i}(t,i),function(e,t){function i(e,t){this.value=e,this.hint=t}function n(e){this.Bc=e,this.data={}}i.pa="short",n.prototype.c=function(e,t,i){var n=this;return function(){return arguments.length&&(n[e]=arguments[0],n.Pb(t,arguments[0],i)),n[e]}},n.prototype.Pb=function(e,t,n){this.data[e]=new i(t,n)},t.a.R=n,t.a.ed=i}(t,i),function(e,t){function i(e,t){i.r.constructor.call(this,e),this.cg=this.c("_year","year",n.pa),this.Qf=this.c("_month","month",n.pa),this.Df=this.c("_day","day",n.pa),this.Kf=this.c("_hour","hour",n.pa),this.Pf=this.c("_minute","minute",n.pa),this.Sf=this.c("_second","second",n.pa),this.cg(t.getUTCFullYear()),this.Qf(t.getUTCMonth()+1),this.Df(t.getUTCDate()),this.Kf(t.getUTCHours()),this.Pf(t.getUTCMinutes()),this.Sf(t.getUTCSeconds())}var n=t.a.ed;e.extend(i,t.a.R),t.a.he=i}(t,i),function(e,t){function i(){if(i.r.constructor.call(this,"asset"),this.Fb=this.c("_cpm","cpm",j),this.L=this.c("_adId","ad_id",j),this.Nb=this.c("_resolver","resolver",j),this.Kb=this.c("_podId","pod_id",j),this.Lb=this.c("_podPosition","pod_position",j),this.Mb=this.c("_podSecond","pod_second",j),this.length=this.c("_length","length",j),this.Fb(""),this.L(""),this.Nb(""),this.Kb(""),this.Lb(""),this.Mb(0),this.length(0),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.Fb(e.Fb()),this.L(e.L()),this.Nb(e.Nb()),this.Kb(e.Kb()),this.Lb(e.Lb()),this.Mb(e.Mb()),this.length(e.length())}}e.extend(i,t.a.R),t.a.$c=i}(t,i),function(e,t){function i(){if(i.r.constructor.call(this,"asset"),this.type=this.c("_type","type",j),this.k=this.c("_videoId","video_id",j),this.K=this.c("_publisher","publisher",j),this.q=this.c("_adData","ad_data",j),this.duration=this.c("_duration","duration",j),this.type(""),this.k(""),this.K(""),this.q(j),this.duration(0),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.k(e.k()),this.K(e.K()),this.duration(e.duration()),(e=e.q())&&this.q(new n(e))}}var n=t.a.$c;e.extend(i,t.a.R),i.sd="vod",i.Ce="live",i.Be="linear",i.Ra="ad",t.a.jb=i}(t,i),function(e,t){function i(e){i.r.constructor.call(this,"event"),this.pf=e,this.type=this.c("_type","type",j),this.count=this.c("_count","count",j),this.Gc=this.c("_totalCount","total_count",j),this.duration=this.c("_duration","duration",j),this.Hc=this.c("_totalDuration","total_duration",j),this.ka=this.c("_playhead","playhead",j),this.id=this.c("_id","id",j),this.source=this.c("_source","source",j),this.Ac=this.c("_prevTs","prev_ts",j),this.qf=function(){var e=1e3*this.pf;this.pc=new Date(Math.floor(this.oc/e)*e),this.Pb("ts_as_date",new n(this.Bc,this.pc),j)},this.Rb=function(){return arguments.length&&(this.oc=arguments[0],this.Pb("ts",this.oc,j),this.qf()),this.oc},this.ag=function(){arguments.length&&(this.pc=arguments[0],this.Pb("ts_as_date",new n(this.Bc,this.pc),j))},this.type(""),this.count(0),this.Gc(0),this.duration(0),this.Hc(0),this.ka(0),this.id(""),this.source(""),this.Ac(-1),this.Rb((new Date).getTime())}var n=t.a.he;e.extend(i,t.a.R),i.le="load",i.me="unload",i.ob="start",i.jd="play",i.hd="pause",i.je="buffer",i.ie="bitrate_change",i.ke="error",i.fd="active",i.gd="complete",t.a.pb=i}(t,i),function(e,t){function i(){i.r.constructor.call(this,"stream"),this.qc=this.c("_bitrate","bitrate",j),this.Rd=this.c("_fps","fps",j),this.Od=this.c("_droppedFrames","dropped_frames",j),this.qc(0),this.Rd(0),this.Od(0)}e.extend(i,t.a.R),t.a.re=i}(t,i),function(e,t){function i(){i.r.constructor.call(this,"sc"),this.Xd=this.c("_reportSuiteId","rsid",j),this.trackingServer=this.c("_trackingServer","tracking_server",j),this.Xd(""),this.trackingServer("")}e.extend(i,t.a.R),t.a.Ae=i}(t,i),function(e,t){function i(){i.r.constructor.call(this,"sp"),this.ia=this.c("_ovp","ovp",j),this.la=this.c("_sdk","sdk",j),this.channel=this.c("_channel","channel",j),this.playerName=this.c("_playerName","player_name",j),this.ia("unknown"),this.la("unknown"),this.channel("unknown"),this.playerName("")}e.extend(i,t.a.R),t.a.xe=i}(t,i),function(e,t){function i(){i.r.constructor.call(this,"event"),this.Ec=this.c("_sessionId","sid",j),this.Ec("")}e.extend(i,t.a.R),t.a.ye=i}(t,i),function(e,t){function i(){if(i.r.constructor.call(this,"stream"),this.rc=this.c("_cdn","cdn",j),this.name=this.c("_name","name",j),this.rc(""),this.name(""),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.rc(e.rc()),this.name(e.name())}}e.extend(i,t.a.R),t.a.qd=i}(t,i),function(e,t){function i(){if(i.r.constructor.call(this,"user"),this.uc=this.c("_device","device",j),this.country=this.c("_country","country",j),this.city=this.c("_city","city",j),this.latitude=this.c("_latitude","latitude",j),this.longitude=this.c("_longitude","longitude",j),this.ib=this.c("_visitorId","id",j),this.$a=this.c("_analyticsVisitorId","aid",j),this.ab=this.c("_marketingCloudVisitorId","mid",j),this.uc(""),this.country(""),this.city(""),this.latitude(""),this.longitude(""),this.ib(""),this.$a(""),this.ab(""),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.uc(e.uc()),this.country(e.country()),this.city(e.city()),this.latitude(e.latitude()),this.longitude(e.longitude()),this.ib(e.ib()),this.$a(e.$a()),this.ab(e.ab())}}e.extend(i,t.a.R),t.a.vd=i}(t,i),function(e,t){t.a.ue=function(e,t,i,n,a){this.ga=e,this.g=t,this.Lc=i,this.Fc=n,this.cb=a}}(t,i),function(e,t){var i=t.a.pb;t.a.te=function(e,t,n){this.Xf=e,this.Tf=t,this.Vf=n,this.G=[],this.Za=function(e){this.G.push(e)},this.lg=function(){return this.G},this.Gf=function(){if(this.G.length)for(var e=this.G.length-1;e>=0;e--)this.G[e].ga.type()===i.hd&&this.G.splice(e,1)}}}(t,i),function(e,t){function i(){}i.prototype.$d=E(),i.prototype.ae=E(),i.prototype.W=E(),i.prototype.Zd=E(),i.prototype.be=E(),t.a.we=i}(t,i),function(e,t){function i(){this.N("[media-fork::QuerystringSerializer] > "),this.da=function(e){return e?e+"&":""},this.Gd=function(e){return e&&e.length>0&&(e=e.substring(0,e.length-1)),e},this.mf=function(e){var t,i=[];for(t in e.data)if(e.data.hasOwnProperty(t)){var n=e.data[t],a=n.value;n=n.hint;var s=j,r=e.Bc;a===j||"undefined"==typeof a||("number"==typeof a?s=this.Zd(t,a,r,n):"string"==typeof a?s=this.be(t,a,r,n):a instanceof o?s=this.W(a):this.warn("#_processDao() > Unable to serialize DAO. Field: "+t+". Value: "+a+"."),s&&i.push(s))}return i}}var n=e.Q,a=e.P,o=t.a.R,s=t.a.ed;e.extend(i,t.a.we),n(i,a),i.prototype.$d=function(e){for(var t=[],i=e.G,n=0;n<i.length;n++){var a=this.ae(i[n])+"&";a+=this.da(this.W(e.Xf)),a+=this.da(this.W(e.Tf)),a+=this.da(this.W(e.Vf)),a=this.Gd(a),t.push(a)}return t},i.prototype.ae=function(e){var t=this.da(this.W(e.ga));return t+=this.da(this.W(e.g)),t+=this.da(this.W(e.Lc)),t+=this.da(this.W(e.Fc)),t+=this.da(this.W(e.cb)),t=this.Gd(t)},i.prototype.W=function(e){e=this.mf(e);for(var t="",i=0;i<e.length;i++)t+=i==e.length-1?e[i]:e[i]+"&";return t},i.prototype.Zd=function(e,t,i,n){var a="l";return t==j||void 0===t||isNaN(t)?j:(n&&"string"==typeof n&&n===s.pa&&(a="h"),a+":"+i+":"+e+"="+t)},i.prototype.be=function(e,t,i){return t?"s:"+i+":"+e+"="+window.encodeURIComponent(t):j},t.a.se=i}(t,i),function(e,t){function i(e){this.Qb=0,this.O=e,this.Gb=!1}function n(){if(n.prototype.Ta)return n.prototype.Ta;var e=this;this.N("[media-fork::TimerManager] > "),this.Ad=0,this.fa={},this.ua=function(){this.log("#_onApiDestroy()"),clearInterval(this.yd),c().eb(this)},this.jf=function(){this.log("#_onTick() > ------------------- ("+this.Ad+")"),this.Ad++;for(var e in this.fa)if(this.fa.hasOwnProperty(e)){var t=this.fa[e];if(t.Gb&&(t.Qb++,t.Qb%t.O===0)){var i={};i[r.X]=t.O,c().dispatchEvent(new s(s[e],i))}}},c().addEventListener(o.La,this.ua,this),this.yd=setInterval(function(){e.jf()},1e3*l),this.Lf=function(e){return(e=this.fa[e])&&e.Gb},this.Kd=function(e,t){this.fa[e]=new i(t)},this.Ef=function(e){delete this.fa[e]},this.Yf=function(e,t){this.log("#startTimer(name="+e+", reset="+t+")");var i=this.fa[e];i&&(i.Gb=!0,t)&&(this.log("Resseting timer: "+e),i.Qb=0)},this.Zf=function(e,t){this.log("#startTimer(name="+e+", reset="+t+")");var i=this.fa[e];i&&(i.Gb=!1,t)&&(this.log("Resseting timer: "+e),i.Qb=0)},n.prototype.Ta=this}var a=e.Q,o=t.event.Ma,s=t.event.Na,r=t.event.ba,c=e.ca,l=1;a(n,e.P),new n,t.M.Ee=n}(t,i),function(e,t){function i(e,t,i,n){this.N("[media-fork::Timer] > "),this.O=n,this.ma=e,this.Hf=t,this.Ff=i,s().Kd(this.ma,this.O),this.ua=function(){this.Nd()},this.lf=function(e){e=e.data;var t=!1;e&&e.hasOwnProperty(r.Ga)&&(t=e[r.Ga]),this.start(t)},this.kf=function(e){e=e.data;var t=!1;e&&e.hasOwnProperty(r.Ga)&&(t=e[r.Ga]),this.stop(t)},a().addEventListener(o.La,this.ua,this),a().addEventListener(this.Hf,this.lf,this),a().addEventListener(this.Ff,this.kf,this)}var n=e.Q,a=e.ca,o=t.event.Ma,s=t.M.Ee,r=t.event.ba;n(i,e.P),i.prototype.start=function(e){this.log("#start("+this.ma+")"),s().Yf(this.ma,e)},i.prototype.stop=function(e){this.log("#stop("+this.ma+")"),s().Zf(this.ma,e)},i.prototype.Nd=function(){a().eb(this),s().Ef(this.ma)},i.prototype.setInterval=function(e){var t=s().Lf(this.ma);this.stop(!0),this.O=e,s().Kd(this.ma,this.O),t&&this.start(!0)},t.M.ud=i}(t,i),function(e,t){function i(){this.N("[media-fork::TrackingTimer] > "),i.r.constructor.call(this,c.CLOCK_TRACKING_TICK,c.CLOCK_TRACKING_ENABLE,c.CLOCK_TRACKING_DISABLE,d),this.kc=function(e){e=e.data[l.rd],this.log("#_onCheckStatusComplete(interval="+e+")"),e?e===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):(this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(d))},this.lc=function(e){switch(e=e.data[l.qa],this.log("#_onDataRequest(what="+e+")"),e){case s.ya.Qa:e={},e[l.X]=this.O,o().dispatchEvent(new s(s.mb,e))}},o().addEventListener(r.sb,this.kc,this),o().addEventListener(s.oa,this.lc,this)}var n=e.Q,a=e.P,o=e.ca,s=t.event.Wb,r=t.event.tb,c=t.event.Na,l=t.event.ba,d=10;e.extend(i,t.M.ud),n(i,a),t.M.Fe=i}(t,i),function(e,t){function i(){this.N("[media-fork::CheckStatusTimer] > "),i.r.constructor.call(this,d.CLOCK_CHECK_STATUS_TICK,d.CLOCK_CHECK_STATUS_ENABLE,d.CLOCK_CHECK_STATUS_DISABLE,a);var e=this;setTimeout(function(){e.Qe()},200),this.Qe=function(){this.log("#_initialCheck()");var e={};e[l.X]=this.O,r().dispatchEvent(new d(d.CLOCK_CHECK_STATUS_TICK,e))},this.kc=function(e){e=e.data[l.cd],this.log("#_onCheckStatusComplete(interval="+e+")"),e?e===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):e>n?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+e),this.setInterval(n)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a))},r().addEventListener(c.sb,this.kc,this)}var n=600,a=60,o=e.Q,s=e.P,r=e.ca,c=t.event.tb,l=t.event.ba,d=t.event.Na;e.extend(i,t.M.ud),o(i,s),t.M.de=i}(t,i),function(e,t){var i=t.M.de,n=t.M.Fe;t.M.ee=function(){this.dg=new i,this.fg=new n}}(t,i),function(e,t){function i(e){this.N("[media-fork::SettingsParser] > "),this.Bd=e,this.log("#SettingsParser(data="+e+")")}var n=e.Q,a=e.ca,o=t.event.ba,s=t.event.tb;n(i,e.P),i.prototype.parse=function(){var e,t,i,n;if(this.Bd){window.DOMParser?n=(new window.DOMParser).parseFromString(this.Bd,"text/xml"):(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(this.data));var r;(r=parseInt(n.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=r),(r=parseInt(n.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=r),(r=parseInt(n.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(i=1===r),n={},n[o.rd]=e,n[o.cd]=t,n[o.gc]=i,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(n)),a().dispatchEvent(new s(s.sb,n))}else this.warn("#SettingsParser() > No data available for parsing.")},t.bb.ze=i}(t,i),function(e,t){function i(e){this.N("[media-fork::Network] > "),this.ta=this.Hd=this.Cd=!1,this.of=e,this.Ed=this.xd=this.Id=j,this.jc=function(e){e=e.data,this.log("#_onApiConfig(sb_server="+e[u.xb]+", check_status_server="+e[u.lb]+", job_id="+e[u.rb]+", debug_tracking="+e[u.nb]+", track_local="+e[u.yb]+")"),this.Id=e[u.xb],this.xd=e[u.lb],this.Ed=e[u.rb],this.Cd=e[u.nb],this.Hd=e[u.yb],this.ta=!0},this.ua=function(){this.log("#_onApiDestroy()"),s().eb(this)},this.gf=function(e){if(this.ta){if(e=this.of.$d(e.data[u.Fa]),!this.Hd)for(var t=0;t<e.length;t++){var i=new l(this.Id+"/?__job_id="+this.Ed+"&"+e[t],c.ld);this.Cd&&window.console&&window.console.info&&window.console.info(i.method+" : "+i.url),function(e,t){e.addEventListener(o.wb,function(){e.close()},this),e.addEventListener(o.Xb,function(i){t.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(i)),e.close()},this),e.load(i)}(new d,this)}}else this.warn("#_onContextDataAvailable() > Unable to send request: not configured.")},this.ef=function(){function e(e){e.data&&new f(e.data.response).parse(),e.data[d.qb].close()}function t(e){i.warn("_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(e)),e.data[d.qb].close()}if(this.ta){var i=this;this.ea=function(i){if(i=i[u.Pa]){i=i.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),i=this.xd+i+".xml?r="+(new Date).getTime();var n=new l(i,c.ld),a=new d;a.addEventListener(o.wb,e,this),a.addEventListener(o.Xb,t,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+i),a.load(n)}else this.warn("#_onClockCheckStatusTick() > Publisher is NULL.")};var n={};n[u.qa]=h.ya.md,s().dispatchEvent(new h(h.oa,n))}else this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.")},this.mc=function(e){this.Pd(e.data)},s().addEventListener(h.mb,this.mc,this),s().addEventListener(r.Tb,this.jc,this),s().addEventListener(r.La,this.ua,this),s().addEventListener(m.Ba,this.gf,this),s().addEventListener(p.CLOCK_CHECK_STATUS_TICK,this.ef,this)}var n=e.Q,a=e.P,o=e.S,s=e.ca,r=t.event.Ma,c=e.Ie,l=e.He,d=e.Ge,u=t.event.ba,h=t.event.Wb,p=t.event.Na,m=t.event.dd,f=t.bb.ze;n(i,e.Md),n(i,a),t.bb.qe=i}(t,i),function(e,t){function i(){this.N("[media-fork::Counters] > "),this.va={},this.wa={},this.Sd=function(e,t,i){return e=t+"."+i+"."+e,this.va[e]||(this.va[e]=0),this.log("#getTotalCount(key="+e+")"),this.va[e]},this.mg=function(e,t,i){e=t+"."+i+"."+e,this.log("#resetTotalCount(key="+e+")"),this.va[e]=0},this.Wd=function(e,t,i){e=t+"."+i+"."+e,this.va[e]||(this.va[e]=0),this.log("#incrementTotalCount(key="+e+")"),this.va[e]++},this.Td=function(e,t,i){return e=t+"."+i+"."+e,this.wa[e]||(this.wa[e]=0),this.log("#getTotalDuration(key="+e+")"),this.wa[e]},this.ng=function(e,t,i){e=t+"."+i+"."+e,this.log("#resetTotalDuration(key="+e+")"),this.wa[e]=0},this.Vd=function(e,t,i,n){e=t+"."+i+"."+e,this.wa[e]||(this.wa[e]=0),this.log("#increaseTotalDuration(key="+e+", amount="+n+")"),this.wa[e]+=n}}var n=e.Q;n(i,e.P),t.H.ge=i}(t,i),function(e,t){function i(){this.N("[media-fork::History] > "),this.Dd={},this.zd=function(e){var t=e.g;return(t.q()?t.q().L():t.k())+"."+t.type()+"."+e.$},this.gb=function(e){var t=this.zd(e);this.log("#updateWith(key="+t+")"),this.Dd[t]=e},this.J=function(e){return e=this.zd(e),this.log("#getPreviousItemOfSameTypeWith(key="+e+")"),this.Dd[e]}}var n=e.Q;n(i,e.P),t.H.oe=i}(t,i),function(e,t){var i=t.a.pb,n=t.a.jb,a=t.a.vd,o=t.a.qd;t.H.td=function(e,t,s,r,c,l){this.timestamp=new Date,this.g=new n(e),this.Lc=new a(t),this.Fc=new o(s),this.$=c,this.cb=r,this.ka=l,this.A=void 0,this.If=function(){return this.$===i.fd?this.g.k():this.g.type()===n.Ra?this.g.q().L():this.g.k()},this.kg=function(){return 1}}}(t,i),function(e,t){t.H.De=function(){this.Z=[],this.Jf=function(){return this.Z.slice()},this.tf=function(e){for(var t=-1,i=this.Z.length-1;i>=0&&!(e.timestamp>=this.Z[i].timestamp);i--)t=i;t>0?this.Z.splice(i,0,e):this.Z.push(e)}}}(t,i),function(e,t){function i(e){this.N("[media-fork::ReporterHelper] > "),this.j=e,this.Fd=j,this.Ne=function(e,t,i){return i*=1e3,e=0===e.getTime()?t.getTime()-i/2:e.getTime()/2+t.getTime()/2,e=Math.floor(e/i)*i,this.Fd==e&&(e+=i),this.Fd=e,new Date(e)},this.Sa=function(e,t,i){var n=this.j.ic,a=e.$,s=e.If(),c=e.g.type(),l=a===o.ob?0:e.ka;return n.Wd(a,s,c),n.Vd(a,s,c,t),i=new o(i),i.type(a),i.count(1),i.duration(t),i.Gc(n.Sd(a,s,c)),i.Hc(n.Td(a,s,c)),i.ka(l),i.Rb(e.timestamp.getTime()),i.Ac(e.A?e.A.timestamp.getTime():-1),new r(i,e.g,e.Lc,e.Fc,e.cb)},this.wd=function(e,t,i){if(e.G.length){var n=new s(this.j.e);if(n.type(this.j.Bb),n.q(j),n=new c(n,this.j.n,this.j.C,this.j.u,o.fd,this.j.p[this.j.e.k()]),n.A=this.j.o.J(n),this.j.o.gb(n),e.Za(this.Sa(n,1e3*t,t)),i!=j)for(t=0;t<e.G.length;t++)e.G[t].ga.ag(i)}},this.Xa=function(e,t){return t.getTime()-e.getTime()},this.tc=function(e,t,i){var n=new a(this.j.Db,this.j.Ia,this.j.Wa);return n.Za(this.Sa(e,0,t)),i&&this.wd(n,t,j),n},this.Jd=function(e,t,i){var n,r,c=new a(this.j.Db,this.j.Ia,this.j.Wa),l=this.j.Z.Jf(),d=[];r=j;var u=0;for(u=n=0;u<l.length;u++)n=l[u],n.timestamp>e&&n.timestamp<=t&&d.push(n),n.timestamp<=e&&(r=n);for(this.log("#createReportForQuantum() > -------------TRACK REPORT----------------"),this.log("#createReportForQuantum() > Interval: ["+e.getTime()+" , "+t.getTime()+"]. Tracking interval: "+i),this.log("#createReportForQuantum() > -----------------------------------------"),u=0;u<l.length;u++)this.log("#createReportForQuantum() > ["+l[u].timestamp.getTime()+"] :"+l[u].$+" | "+l[u].g.type());for(this.log("#createReportForQuantum() > -----------------------------------------"),u=0;u<d.length;u++)this.log("#createReportForQuantum() > ["+d[u].timestamp.getTime()+"] :"+d[u].$+" | "+d[u].g.type());if(this.log("#createReportForQuantum() > -----------------------------------------"),r&&(r.A&&(r.A.timestamp=r.timestamp),r.timestamp=new Date(e.getTime()+1),
n=r.g.q()?r.g.q().L():r.g.k(),r.ka=this.j.p[n]),d.length)for(l=0,r&&(l=r.$===o.ob&&r.g.type()!==s.Ra?this.Xa(r.timestamp,d[0].timestamp):this.Xa(e,d[0].timestamp),c.Za(this.Sa(r,l,i))),u=0;u<d.length;u++){var h=d[u];l=u==d.length-1?this.Xa(h.timestamp,t):this.Xa(h.timestamp,d[u+1].timestamp);var p=!1,m=c.G;for(n=0;n<m.length;n++)if(r=m[n],h.g.type()===r.g.type()&&h.$===r.ga.type()&&(p=h.g.type()===s.Ra?r.g.q().L()===h.g.q().L():r.g.k()===h.g.k()),p){m=r.ga;var f=r.g.type();n=r.g.q()?r.g.q().L():r.g.k();var g=this.j.ic;g.Wd(m.type(),n,f),g.Vd(m.type(),n,f,l),r.cb=h.cb,m.ka(this.j.p[n]),m.duration(m.duration()+l),m.Gc(g.Sd(m.type(),n,f)),m.Hc(g.Td(m.type(),n,f)),m.Rb(h.timestamp.getTime());break}p||(this.log("#createReportForQuantum() > Adding event to report: "+h.$),n=h.g.q()?h.g.q().L():h.g.k(),h.ka=this.j.p[n],c.Za(this.Sa(h,l,i)))}else r&&c.Za(this.Sa(r,this.Xa(e,t),i));for(c.Gf(),u=this.Ne(e,t,i),this.wd(c,i,u),this.log("#createReportForQuantum() > Final report ----- START -----"),u=0;u<c.G.length;u++)r=c.G[u],i=r.ga,n=r.g.q()?r.g.q().L():r.g.k(),this.log("#createReportForQuantum() > Final report ["+i.Rb()+"/"+i.Ac()+"] :"+i.type()+" | type="+r.g.type()+", name="+n+", duration="+i.duration()+", playhead="+i.ka());return this.log("#createReportForQuantum() > Final report ----- END -----"),c}}var n=e.Q,a=t.a.te,o=t.a.pb,s=t.a.jb,r=t.a.ue,c=t.H.td;n(i,e.P),t.H.ve=i}(t,i),function(e,t){function i(){this.N("[media-fork::Context] > "),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.l=this.Cb=j,this.f={fb:j,K:j},this.Ya=this.ea=j,this.p={},this.Va=new s(this),this.Z=new r,this.o=new l,this.Wa=new d,this.Db=new u,this.Ia=new p,this.e=new h,this.n=new m,this.C=new f,this.u=new g,this.ic=new v,this.jc=function(e){e=e.data,this.log("#_onApiConfig(account="+e[T.Sb]+", sc_server="+e[T.cc]+", sb_server="+e[T.xb]+", check_status_server="+e[T.lb]+", job_id="+e[T.rb]+", publisher="+e[T.Pa]+", ovp="+e[T.$b]+", sdk="+e[T.ec]+", debug_tracking="+e[T.nb]+", track_local="+e[T.yb]+")"),this.Db.Xd(e[T.Sb]),this.Db.trackingServer(e[T.cc]),this.f.K=e[T.Pa],this.Ia.ia(e[T.$b]),this.Ia.la(e[T.ec]),this.Ia.channel(e[T.bd]),o().dispatchEvent(new b(b.CLOCK_CHECK_STATUS_ENABLE))},this.ua=function(){this.log("#_onApiDestroy()"),o().eb(this)},this.Ye=function(e){e=e.data,this.log("#_onApiOpenMain(name="+e[T.i]+", length="+e[T.Ca]+", type="+e[T.fc]+", player_name="+e[T.Ea]+", vid="+e[T.Ha]+", aid="+e[T.Aa]+", mid="+e[T.Da]+")"),this.nf(),this.l=e[T.i],this.p[this.l]=0,this.Ia.playerName(e[T.Ea]),this.n.ib(e[T.Ha]),this.n.$a(e[T.Aa]),this.n.ab(e[T.Da]),this.e.k(this.l),this.e.duration(e[T.Ca]),this.e.type(e[T.fc]),this.Bb=this.e.type(),this.C.name(this.l),this.Pe(),e={},e[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE,e)),this.ea=function(e){e=e[T.X];var t=new c(this.e,this.n,this.C,this.u,C.le,0);t.A=this.o.J(t),this.o.gb(t),e=this.Va.tc(t,e,!0),t={},t[T.Fa]=e,o().dispatchEvent(new _(_.Ba,t))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e)),e=new c(this.e,this.n,this.C,this.u,C.ob,0),e.A=this.o.J(e),this.Y(e),this.z=!0},this.Xe=function(e){if(this.z){this.info("Call detected: onApiOpenAd()."),e=e.data,this.log(this,"#_onApiOpenAd(name="+e[T.i]+", length="+e[T.Ca]+", player_name="+e[T.Ea]+", parent_name="+e[T.ac]+", pod_pos="+e[T.bc]+", pod_offset="+e[T.ub]+", cpm="+e[T.na]+")"),this.e.k()||this.e.k(e[T.ac]),this.l=e[T.i],this.p[this.l]=0;var t=new S;t.L(this.l),t.length(e[T.Ca]),t.Nb(e[T.Ea]),t.Fb(e[T.na]),t.Kb(e[T.nd]),t.Mb(this.Cb),t.Lb(e[T.bc]+""),this.e.q(t),this.e.type(h.Ra),e=new c(this.e,this.n,this.C,this.u,C.ob,0),e.A=this.o.J(e),this.Y(e),e=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),e.A=this.o.J(e),this.Y(e)}else this.warn("#_onApiOpenAd() > No active viewing session.")},this.Ue=function(e){this.z?(e=e.data[T.i],this.log("#_onApiClose(name="+e+")"),e===this.e.k()?this.Me():this.Le()):this.warn("#_onApiClose() > No active viewing session.")},this.Ze=function(e){this.z?(e=e.data,this.log("#_onApiPlay(name="+e[T.i]+", offset="+e[T.B]+", vid="+e[T.Ha]+", aid="+e[T.Aa]+", mid="+e[T.Da]+")"),e[T.i]==this.e.k&&this.zb||(this.n.ib(e[T.Ha]),this.n.$a(e[T.Aa]),this.n.ab(e[T.Da]),this.l=e[T.i],this.p[this.l]=Math.floor(e[T.B]),o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE)),e=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),e.A=this.o.J(e),this.Y(e))):this.warn("#_onApiPlay() > No active viewing session.")},this.cf=function(e){this.z?(e=e.data,this.log("#_onApiStop(name="+e[T.i]+", offset="+e[T.B]+")"),this.l=e[T.i],this.p[this.l]=Math.floor(e[T.B]),e=new c(this.e,this.n,this.C,this.u,C.hd,this.p[this.l]),e.A=this.o.J(e),this.Y(e),o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE))):this.warn("#_onApiStop() > No active viewing session.")},this.Te=function(e){this.z?(e=e.data,this.log("#_onApiClick(name="+e[T.i]+", offset="+e[T.B]+")")):this.warn("#_onApiClick() > No active viewing session.")},this.Ve=function(e){this.z?(e=e.data,this.log("#_onApiComplete(name="+e[T.i]+", offset="+e[T.B]+")")):this.warn("#_onApiComplete() > No active viewing session.")},this.af=function(e){this.z?(e=e.data,this.log("#_onApiQoSInfo(bitrate="+e[T.i]+", fps="+e[T.Zb]+", dropped_frames="+e[T.Vb]+")"),this.u.qc(e[T.kb]),this.u.Rd(e[T.Zb]),this.u.Od(e[T.Vb])):this.warn("#_onApiQoSInfo() > No active viewing session.")},this.Re=function(e){if(this.z){e=e.data,this.log("#_onApiBitrateChange(bitrate="+e[T.i]+")"),this.u.qc(e[T.kb]);var t=new c(this.e,this.n,this.C,this.u,C.ie,this.p[this.l]);t.A=this.o.J(t),this.o.gb(t),this.ea=function(e){e=this.Va.tc(t,e[T.X],!1);var i={};i[T.Fa]=e,o().dispatchEvent(new _(_.Ba,i))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e))}else this.warn("#_onApiBitrateChange() > No active viewing session.")},this.Se=function(){if(this.z){this.log("#_onApiBufferStart()");var e=new c(this.e,this.n,this.C,this.u,C.je,this.p[this.l]);e.A=this.o.J(e),this.Y(e)}else this.warn("#_onApiBufferStart() > No active viewing session.")},this.df=function(e){if(this.z){var t=e.data;if(this.log("#_onApiTrackError(source="+t[T.vb]+", err_id="+t[T.Yb]+", offset="+t[T.B]+")"),!this.hc||t[T.vb]===E){var i=new c(this.e,this.n,this.C,this.u,C.ke,Math.floor(t[T.B]));i.A=this.o.J(i),this.o.gb(i),this.ea=function(e){e=this.Va.tc(i,e[T.X],!1);var n=e.G[0];n.ga.id(t[T.Yb]),n.ga.source(t[T.vb]),n={},n[T.Fa]=e,o().dispatchEvent(new _(_.Ba,n))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e))}}else this.warn("#_onApiTrackError() > No active viewing session.")},this.$e=function(e){this.z?(this.Cb=Math.floor(e.data[T.ub]),this.log("#_onApiPodOffset(podOffset="+this.Cb+")")):this.warn("#_onApiPodOffset() > No active viewing session.")},this.bf=function(){if(this.z){this.log("#_onApiSessionComplete()");var e=new c(this.e,this.n,this.C,this.u,C.me,0);e.A=this.o.J(e),this.Y(e),this.ea=function(e){var t=new Date;e=this.Va.Jd(this.Ya||new Date(0),t,e[T.X]);var i={};i[T.Fa]=e,o().dispatchEvent(new _(_.Ba,i)),this.Ya=t},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e)),e={},e[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE,e)),this.z=!1}else this.warn("#_onApiSessionComplete() > No active viewing session.")},this.We=function(e){if(this.z){var t=e.data;this.log("#_onApiMonitor(name="+t[T.i]+", offset="+t[T.B]+")"),this.l=t[T.i],this.p[this.l]=Math.floor(e.data[T.B])}else this.warn("#_onApiMonitor() > No active viewing session.")},this.ff=function(e){if(this.z){this.log("#_onClockTrackingTick(interval="+e.data[T.X]+")");var t=new Date;e=this.Va.Jd(this.Ya||new Date(0),t,e.data[T.X]);var i={};i[T.Fa]=e,o().dispatchEvent(new _(_.Ba,i)),this.Ya=t}else this.warn("#_onClockTrackingTick() > No active viewing session.")},this.hf=function(e){this.log("#_onNetworkCheckStatusComplete(track_ext_err="+e.data[T.gc]+")"),e=e.data[T.gc],e!==j&&(this.hc=e)},this.lc=function(e){switch(e=e.data[T.qa],this.log("#_onDataRequest(what="+e+")"),e){case y.ya.md:e={},e[T.Pa]=this.f.K,o().dispatchEvent(new y(y.mb,e))}},this.mc=function(e){this.log("#_onDataResponse()"),this.Pd(e.data)},this.nf=function(){this.log("#_resetInternalState()"),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.p={},this.Ya=this.Cb=j,this.ic=new v,this.o=new l,this.Z=new r,this.n=new m,this.C=new f,this.u=new g,this.Wa=new d,this.e=new h,this.e.K(this.f.K),this.e.type(this.f.fb)},this.Pe=function(){this.Wa.Ec(""+(new Date).getTime()+Math.floor(1e9*Math.random())),this.log("#_generateSessionId() > New session id: "+this.Wa.Ec)},this.Y=function(e){this.log("#_placeItemOnTimeline(type="+e.$+")"),this.Z.tf(e),this.o.gb(e)},this.Me=function(){if(this.zb)this.warn("#_closeMainVideo() > The main video content was already closed.");else{-1==this.p[this.e.k()]&&(this.p[this.e.k()]=this.e.duration());var e=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.e.k()]);e.A=this.o.J(e),this.Y(e),this.zb=!0}},this.Le=function(){var e=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.l]);e.A=this.o.J(e),this.Y(e),this.e.type(this.Bb),this.l=this.e.k(),this.e.q(j)},o().addEventListener(w.Tb,this.jc,this),o().addEventListener(w.La,this.ua,this),o().addEventListener(w.Uc,this.Ye,this),o().addEventListener(w.Tc,this.Xe,this),o().addEventListener(w.Qc,this.Ue,this),o().addEventListener(w.Vc,this.Ze,this),o().addEventListener(w.Yc,this.cf,this),o().addEventListener(w.Pc,this.Te,this),o().addEventListener(w.Rc,this.Ve,this),o().addEventListener(w.Wc,this.af,this),o().addEventListener(w.Nc,this.Re,this),o().addEventListener(w.Oc,this.Se,this),o().addEventListener(w.Zc,this.df,this),o().addEventListener(w.Ub,this.$e,this),o().addEventListener(w.Xc,this.bf,this),o().addEventListener(w.Sc,this.We,this),o().addEventListener(b.CLOCK_TRACKING_TICK,this.ff,this),o().addEventListener(k.sb,this.hf,this),o().addEventListener(y.oa,this.lc,this),o().addEventListener(y.mb,this.mc,this)}var n=e.Q,a=e.P,o=e.ca,s=t.H.ve,r=t.H.De,c=t.H.td,l=t.H.oe,d=t.a.ye,u=t.a.Ae,h=t.a.jb,p=t.a.xe,m=t.a.vd,f=t.a.qd,g=t.a.re,v=t.H.ge,b=t.event.Na,k=t.event.tb,y=t.event.Wb,w=t.event.Ma,_=t.event.dd,T=t.event.ba,C=t.a.pb,S=t.a.$c,E="player";n(i,e.Md),n(i,a),t.H.fe=i}(t,i),function(e){function i(e){this.N("[media-fork::HeartbeatMediaFork] > "),this.m=e,this.D=function(){var e=this.ta&&(this.m.analyticsVisitorID||this.m.marketingCloudVisitorID||this.m.visitorID);return e||this.warn("Unable to track! Is configured: "+this.ta+" analyticsVisitorID: "+this.m.analyticsVisitorID+" marketingCloudVisitorID: "+this.m.marketingCloudVisitorID+" visitorID: "+this.m.visitorID),e},this.ta=!1,this.j=new l,this.eg=new c(new u),this.yd=new r,this.nc=j,this.f={trackingServer:j,vc:j,K:j,fb:j,ia:j,la:j,channel:j,debugTracking:!1,Jc:!1}}var n=t.Q,a=t.ca,o=e.event.ba,s=e.event.Ma,r=e.M.ee,c=e.bb.qe,l=e.H.fe,d=e.a.jb,u=e.a.se;n(i,t.P),i.prototype.Wf=function(e){e&&e.hasOwnProperty("debugLogging")&&(t.Oa=e.debugLogging),this.log("#setup(configData={trackingServer: "+e.trackingServer+", jobId: "+e.vc+", streamType: "+e.fb+", publisher: "+e.K+", ovp: "+e.ia+", sdk: "+e.la+", debugLogging: "+e.ig+"})"),this.f.debugTracking=this.m.debugTracking,this.f.Jc=this.m.trackLocal,this.f.channel=this.m.Media.channel,e&&(e.hasOwnProperty("trackingServer")&&(this.f.trackingServer=e.trackingServer),e.hasOwnProperty("jobId")&&(this.f.vc=e.jobId),e.hasOwnProperty("publisher")&&(this.f.K=e.publisher),e.hasOwnProperty("ovp")&&(this.f.ia=e.ovp),e.hasOwnProperty("sdk")&&(this.f.la=e.sdk),e.hasOwnProperty("streamType")&&(this.f.fb=e.streamType===d.sd||e.streamType===d.Ce||e.streamType===d.Be||e.streamType===d.Ra?e.streamType:d.sd),this.m.Media.__primetime&&(this.f.ia="primetime"),this.nc!=j&&(this.f.la=this.nc),this.log("#setup() > Applying configuration: {account: "+this.m.account+", scTrackingServer: "+this.m.trackingServer+", sbTrackingServer: "+this.f.trackingServer+", jobId: "+this.f.trackingServer+", publisher: "+this.f.K+", ovp: "+this.f.ia+", sdk: "+this.f.la+", channel: "+this.f.channel+", debugTracking: "+this.f.debugTracking+", trackLocal: "+this.f.Jc+"}"),e={},e[o.Sb]=this.m.account,e[o.cc]=this.m.trackingServer,e[o.xb]=this.f.trackingServer,e[o.lb]=this.f.trackingServer+"/settings/",e[o.rb]=this.f.vc,e[o.Pa]=this.f.K,e[o.$b]=this.f.ia,e[o.ec]=this.f.la,e[o.bd]=this.f.channel,e[o.nb]=this.f.debugTracking,e[o.yb]=this.f.Jc,a().dispatchEvent(new s(s.Tb,e)),this.ta=!0)},i.prototype.open=function(e,t,i){if(this.log("#open(name="+e+", length="+t+", playerName="+i+")"),this.D()){var n={};n[o.Ha]=this.m.visitorID,n[o.Aa]=this.m.analyticsVisitorID,n[o.Da]=this.m.Nf,n[o.i]=e,n[o.Ca]=t,n[o.fc]=this.f.fb,n[o.Ea]=i,a().dispatchEvent(new s(s.Uc,n))}},i.prototype.openAd=function(e,t,i,n,r,c,l){if(this.log("#openAd(name="+e+", length="+t+", playerName="+i+", parentName="+n+", parentPod="+r+", parentPodPosition="+c+", cpm="+l+", )"),this.D()){var d={};d[o.i]=e,d[o.Ca]=t,d[o.Ea]=i,d[o.ac]=n,d[o.nd]=r,d[o.bc]=c,d[o.na]=l,a().dispatchEvent(new s(s.Tc,d))}},i.prototype.close=function(e){if(this.log("#close(name="+e+")"),this.D()){var t={};t[o.i]=e,a().dispatchEvent(new s(s.Qc,t))}},i.prototype.play=function(e,t,i,n,r){this.log("#play(name="+e+", offset="+t+", segmentNum="+i+", segment="+n+", segmentLength="+r+")"),this.D()&&(i={},i[o.Ha]=this.m.visitorID,i[o.Aa]=this.m.analyticsVisitorID,i[o.Da]=this.m.Nf,i[o.i]=e,i[o.B]=t,a().dispatchEvent(new s(s.Vc,i)))},i.prototype.monitor=function(e,t){this.log("#monitor(name="+e+", offset="+t+")");var i={};i[o.i]=e,i[o.B]=t,a().dispatchEvent(new s(s.Sc,i))},i.prototype.stop=function(e,t){if(this.log("#stop(name="+e+", offset="+t+")"),this.D()){var i={};i[o.i]=e,i[o.B]=t,a().dispatchEvent(new s(s.Yc,i))}},i.prototype.click=function(e,t){if(this.log("#click(name="+e+", offset="+t+")"),this.D()){var i={};i[o.i]=e,i[o.B]=t,a().dispatchEvent(new s(s.Pc,i))}},i.prototype.complete=function(e,t){if(this.log("#complete(name="+e+", offset="+t+")"),this.D()){var i={};i[o.i]=e,i[o.B]=t,a().dispatchEvent(new s(s.Rc,i))}},i.prototype.Nd=function(){Logger.hg(this,"#destroy()"),a().dispatchEvent(new s(s.La))},i.prototype.$f=function(e,t,i){if(this.log("#trackError(source="+e+", errorId="+t+", offset="+i+")"),this.D()){var n={};n[o.vb]=e,n[o.Yb]=t,n[o.B]=i,a().dispatchEvent(new s(s.Zc,n))}},i.prototype.bg=function(e,t,i){if(this.log("#updateQoSInfo(bitrate="+e+", fps="+t+", droppedFrames="+i+")"),this.D()){var n={};n[o.kb]=e,n[o.Zb]=t,n[o.Vb]=i,a().dispatchEvent(new s(s.Wc,n))}},i.prototype.wf=function(e){if(this.log("#bitrateChange(bitrate="+e+")"),this.D()){var t={};t[o.kb]=e,a().dispatchEvent(new s(s.Nc,t))}},i.prototype.xf=function(){this.log("#bufferStart()"),this.D()&&a().dispatchEvent(new s(s.Oc))},i.prototype.sf=function(e){if(this.log("#adBreakStart(offset="+e+")"),this.D()){var t={};t[o.ub]=e,a().dispatchEvent(new s(s.Ub,t))}},i.prototype.rf=function(){if(this.log("#adBreakEnd()"),this.D()){var e={};e[o.ub]=j,a().dispatchEvent(new s(s.Ub,e))}},i.prototype.Uf=function(){this.log("#sessionComplete()"),this.D()&&a().dispatchEvent(new s(s.Xc))},i.prototype.Ke=function(e){this.log("#__setPsdkVersion(version="+e+")"),this.nc=e},e.ne=i}(i),e.Ka||(e.Ka={}),e.Ka.Bf||(e.Ka.Bf=t),e.Ka.Of=i}(this),this.Je(e)}(t.s);n.callMethodWhenReady=function(t,i){e.visitor!=j&&(e.isReadyToTrack()?n[t].apply(this,i):e.callbackWhenReadyToTrack(n,n[t],i))},t.Heartbeat=n,t.uf=function(){var e,i;if(t.autoTrack&&(e=t.s.d.getElementsByTagName("VIDEO")))for(i=0;i<e.length;i++)t.attach(e[i])},t.ra(i,"load",t.uf)}function AppMeasurement(){var e=this;e.version="1.4.1";var t=window;t.s_c_in||(t.s_c_il=[],t.s_c_in=0),e._il=t.s_c_il,e._in=t.s_c_in,e._il[e._in]=e,t.s_c_in++,e._c="s_c";var i=t.sb;i||(i=null);var n,a,o=t;try{for(n=o.parent,a=o.location;n&&n.location&&a&&""+n.location!=""+a&&o.location&&""+n.location!=""+o.location&&n.location.host==a.host;)o=n,n=o.parent}catch(s){}e.eb=function(e){try{console.log(e)}catch(t){}},e.ta=function(e){return""+parseInt(e)==""+e},e.replace=function(e,t,i){return!e||e.indexOf(t)<0?e:e.split(t).join(i)},e.escape=function(t){var i,n;if(!t)return t;for(t=encodeURIComponent(t),i=0;7>i;i++)n="+~!*()'".substring(i,i+1),t.indexOf(n)>=0&&(t=e.replace(t,n,"%"+n.charCodeAt(0).toString(16).toUpperCase()));return t},e.unescape=function(t){if(!t)return t;t=t.indexOf("+")>=0?e.replace(t,"+"," "):t;try{return decodeURIComponent(t)}catch(i){}return unescape(t)},e.Va=function(){var i,n=t.location.hostname,a=e.fpCookieDomainPeriods;if(a||(a=e.cookieDomainPeriods),n&&!e.cookieDomain&&!/^[0-9.]+$/.test(n)&&(a=a?parseInt(a):2,a=a>2?a:2,i=n.lastIndexOf("."),i>=0)){for(;i>=0&&a>1;)i=n.lastIndexOf(".",i-1),a--;e.cookieDomain=i>0?n.substring(i):n}return e.cookieDomain},e.c_r=e.cookieRead=function(t){t=e.escape(t);var i=" "+e.d.cookie,n=i.indexOf(" "+t+"="),a=0>n?n:i.indexOf(";",n);return t=0>n?"":e.unescape(i.substring(n+2+t.length,0>a?i.length:a)),"[[B]]"!=t?t:""},e.c_w=e.cookieWrite=function(t,i,n){var a,o=e.Va(),s=e.cookieLifetime;return i=""+i,s=s?(""+s).toUpperCase():"",n&&"SESSION"!=s&&"NONE"!=s&&((a=""!=i?parseInt(s?s:0):-60)?(n=new Date,n.setTime(n.getTime()+1e3*a)):1==n&&(n=new Date,a=n.getYear(),n.setYear(a+5+(1900>a?1900:0)))),t&&"NONE"!=s?(e.d.cookie=t+"="+e.escape(""!=i?i:"[[B]]")+"; path=/;"+(n&&"SESSION"!=s?" expires="+n.toGMTString()+";":"")+(o?" domain="+o+";":""),e.cookieRead(t)==i):0},e.C=[],e.B=function(t,i,n){if(e.ma)return 0;e.maxDelay||(e.maxDelay=250);var a=0,o=(new Date).getTime()+e.maxDelay,s=e.d.qb,r=["webkitvisibilitychange","visibilitychange"];if(s||(s=e.d.rb),s&&"prerender"==s){if(!e.X)for(e.X=1,n=0;n<r.length;n++)e.d.addEventListener(r[n],function(){var t=e.d.qb;t||(t=e.d.rb),"visible"==t&&(e.X=0,e.delayReady())});a=1,o=0}else n||e.q("_d")&&(a=1);return a&&(e.C.push({m:t,a:i,t:o}),e.X||setTimeout(e.delayReady,e.maxDelay)),a},e.delayReady=function(){var t,i=(new Date).getTime(),n=0;for(e.q("_d")&&(n=1);e.C.length>0;){if(t=e.C.shift(),n&&!t.t&&t.t>i){e.C.unshift(t),setTimeout(e.delayReady,parseInt(e.maxDelay/2));break}e.ma=1,e[t.m].apply(e,t.a),e.ma=0}},e.setAccount=e.sa=function(t){var i,n;if(!e.B("setAccount",arguments))if(e.account=t,e.allAccounts)for(i=e.allAccounts.concat(t.split(",")),e.allAccounts=[],i.sort(),n=0;n<i.length;n++)(0==n||i[n-1]!=i[n])&&e.allAccounts.push(i[n]);else e.allAccounts=t.split(",")},e.foreachVar=function(t,i){var n,a,o,s,r="";for(o=a="",e.lightProfileID?(n=e.H,(r=e.lightTrackVars)&&(r=","+r+","+e.ba.join(",")+",")):(n=e.c,(e.pe||e.linkType)&&(r=e.linkTrackVars,a=e.linkTrackEvents,e.pe&&(o=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[o])&&(r=e[o].pb,a=e[o].ob)),r&&(r=","+r+","+e.z.join(",")+","),a&&r&&(r+=",events,")),i&&(i=","+i+","),a=0;a<n.length;a++)o=n[a],(s=e[o])&&(!r||r.indexOf(","+o+",")>=0)&&(!i||i.indexOf(","+o+",")>=0)&&t(o,s)},e.J=function(t,i,n,a,o){var s,r,c,l,d="",u=0;if("contextData"==t&&(t="c"),i){for(s in i)if(!Object.prototype[s]&&(!o||s.substring(0,o.length)==o)&&i[s]&&(!n||n.indexOf(","+(a?a+".":"")+s+",")>=0)){if(c=!1,u)for(r=0;r<u.length;r++)s.substring(0,u[r].length)==u[r]&&(c=!0);if(!c&&(""==d&&(d+="&"+t+"."),r=i[s],o&&(s=s.substring(o.length)),s.length>0))if(c=s.indexOf("."),c>0)r=s.substring(0,c),c=(o?o:"")+r+".",u||(u=[]),u.push(c),d+=e.J(r,i,n,a,c);else if("boolean"==typeof r&&(r=r?"true":"false"),r){if("retrieveLightData"==a&&o.indexOf(".contextData.")<0)switch(c=s.substring(0,4),l=s.substring(4),s){case"transactionID":s="xact";break;case"channel":s="ch";break;case"campaign":s="v0";break;default:e.ta(l)&&("prop"==c?s="c"+l:"eVar"==c?s="v"+l:"list"==c?s="l"+l:"hier"==c&&(s="h"+l,r=r.substring(0,255)))}d+="&"+e.escape(s)+"="+e.escape(r)}}""!=d&&(d+="&."+t)}return d},e.Xa=function(){var t,i,n,a,o,s,r,c,l="",d="",u="",h=i="";for(e.lightProfileID?(t=e.H,(d=e.lightTrackVars)&&(d=","+d+","+e.ba.join(",")+",")):(t=e.c,(e.pe||e.linkType)&&(d=e.linkTrackVars,u=e.linkTrackEvents,e.pe&&(i=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[i])&&(d=e[i].pb,u=e[i].ob)),d&&(d=","+d+","+e.z.join(",")+","),u&&(u=","+u+",",d&&(d+=",events,")),e.events2&&(h+=(""!=h?",":"")+e.events2)),e.AudienceManagement&&e.AudienceManagement.isReady()&&(l+=e.J("d",e.AudienceManagement.getEventCallConfigParams())),i=0;i<t.length;i++){if(a=t[i],o=e[a],n=a.substring(0,4),s=a.substring(4),!o&&"events"==a&&h&&(o=h,h=""),o&&(!d||d.indexOf(","+a+",")>=0)){switch(a){case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",o.length>255&&(e.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",e.ssl&&e.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":a="vmf",!e.ssl&&e.visitorMigrationServer&&(o="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(h&&(o+=(""!=o?",":"")+h),u)for(s=o.split(","),o="",n=0;n<s.length;n++)r=s[n],c=r.indexOf("="),c>=0&&(r=r.substring(0,c)),c=r.indexOf(":"),c>=0&&(r=r.substring(0,c)),u.indexOf(","+r+",")>=0&&(o+=(o?",":"")+s[n]);break;case"events2":o="";break;case"contextData":l+=e.J("c",e[a],d,a),o="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",e.lightProfileID||(o="");break;case"lightIncrementBy":a="mti",e.lightProfileID||(o="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":e.retrieveLightProfiles&&(l+=e.J("mts",e[a],d,a)),o="";break;default:e.ta(s)&&("prop"==n?a="c"+s:"eVar"==n?a="v"+s:"list"==n?a="l"+s:"hier"==n&&(a="h"+s,o=o.substring(0,255)))}o&&(l+="&"+a+"="+("pev"!=a.substring(0,3)?e.escape(o):o))}"pev3"==a&&e.g&&(l+=e.g)}return l},e.u=function(e){var t=e.tagName;return""+e.wb!="undefined"||""+e.ib!="undefined"&&"HTML"!=(""+e.ib).toUpperCase()?"":(t=t&&t.toUpperCase?t.toUpperCase():"","SHAPE"==t&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},e.oa=function(e){var t,i,n,a=e.href?e.href:"";return t=a.indexOf(":"),i=a.indexOf("?"),n=a.indexOf("/"),a&&(0>t||i>=0&&t>i||n>=0&&t>n)&&(i=e.protocol&&e.protocol.length>1?e.protocol:l.protocol?l.protocol:"",t=l.pathname.lastIndexOf("/"),a=(i?i+"//":"")+(e.host?e.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>t?0:t)+"/":"")+a),a},e.D=function(t){var i,n,a=e.u(t),o="",s=0;return a&&(i=t.protocol,n=t.onclick,!t.href||"A"!=a&&"AREA"!=a||n&&i&&!(i.toLowerCase().indexOf("javascript")<0)?n?(o=e.replace(e.replace(e.replace(e.replace(""+n,"\r",""),"\n",""),"	","")," ",""),s=2):"INPUT"==a||"SUBMIT"==a?(t.value?o=t.value:t.innerText?o=t.innerText:t.textContent&&(o=t.textContent),s=3):t.src&&"IMAGE"==a&&(o=t.src):o=e.oa(t),o)?{id:o.substring(0,100),type:s}:0},e.tb=function(t){for(var i=e.u(t),n=e.D(t);t&&!n&&"BODY"!=i;)(t=t.parentElement?t.parentElement:t.parentNode)&&(i=e.u(t),n=e.D(t));return n&&"BODY"!=i||(t=0),t&&(i=t.onclick?""+t.onclick:"",i.indexOf(".tl(")>=0||i.indexOf(".trackLink(")>=0)&&(t=0),t},e.hb=function(){var i,n,a,o,s=e.linkObject,r=e.linkType,c=e.linkURL;if(e.ca=1,s||(e.ca=0,s=e.clickObject),s){for(i=e.u(s),n=e.D(s);s&&!n&&"BODY"!=i;)(s=s.parentElement?s.parentElement:s.parentNode)&&(i=e.u(s),n=e.D(s));if(n&&"BODY"!=i||(s=0),s){var l=s.onclick?""+s.onclick:"";(l.indexOf(".tl(")>=0||l.indexOf(".trackLink(")>=0)&&(s=0)}}else e.ca=1;if(!c&&s&&(c=e.oa(s)),c&&!e.linkLeaveQueryString&&(a=c.indexOf("?"),a>=0&&(c=c.substring(0,a))),!r&&c){var d,u=0,h=0;if(e.trackDownloadLinks&&e.linkDownloadFileTypes)for(l=c.toLowerCase(),a=l.indexOf("?"),o=l.indexOf("#"),a>=0?o>=0&&a>o&&(a=o):a=o,a>=0&&(l=l.substring(0,a)),a=e.linkDownloadFileTypes.toLowerCase().split(","),o=0;o<a.length;o++)(d=a[o])&&l.substring(l.length-(d.length+1))=="."+d&&(r="d");if(e.trackExternalLinks&&!r&&(l=c.toLowerCase(),e.ra(l))&&(e.linkInternalFilters||(e.linkInternalFilters=t.location.hostname),a=0,e.linkExternalFilters?(a=e.linkExternalFilters.toLowerCase().split(","),u=1):e.linkInternalFilters&&(a=e.linkInternalFilters.toLowerCase().split(",")),a)){for(o=0;o<a.length;o++)d=a[o],l.indexOf(d)>=0&&(h=1);h?u&&(r="e"):u||(r="e")}}e.linkObject=s,e.linkURL=c,e.linkType=r,(e.trackClickMap||e.trackInlineStats)&&(e.g="",s&&(r=e.pageName,c=1,s=s.sourceIndex,r||(r=e.pageURL,c=0),t.s_objectID&&(n.id=t.s_objectID,s=n.type=1),r&&n&&n.id&&i&&(e.g="&pid="+e.escape(r.substring(0,255))+(c?"&pidt="+c:"")+"&oid="+e.escape(n.id.substring(0,100))+(n.type?"&oidt="+n.type:"")+"&ot="+i+(s?"&oi="+s:""))))},e.Ya=function(){var t=e.ca,i=e.linkType,n=e.linkURL,a=e.linkName;if(i&&(n||a)&&(i=i.toLowerCase(),"d"!=i&&"e"!=i&&(i="o"),e.pe="lnk_"+i,e.pev1=n?e.escape(n):"",e.pev2=a?e.escape(a):"",t=1),e.abort&&(t=0),e.trackClickMap||e.trackInlineStats){i={},n=0;var o,s,r,c=e.cookieRead("s_sq"),l=c?c.split("&"):0;if(c=0,l)for(o=0;o<l.length;o++)s=l[o].split("="),a=e.unescape(s[0]).split(","),s=e.unescape(s[1]),i[s]=a;if(a=e.account.split(","),t||e.g){t&&!e.g&&(c=1);for(s in i)if(!Object.prototype[s])for(o=0;o<a.length;o++)for(c&&(r=i[s].join(","),r==e.account&&(e.g+=("&"!=s.charAt(0)?"&":"")+s,i[s]=[],n=1)),l=0;l<i[s].length;l++)r=i[s][l],r==a[o]&&(c&&(e.g+="&u="+e.escape(r)+("&"!=s.charAt(0)?"&":"")+s+"&u=0"),i[s].splice(l,1),n=1);if(t||(n=1),n){c="",o=2,!t&&e.g&&(c=e.escape(a.join(","))+"="+e.escape(e.g),o=1);for(s in i)!Object.prototype[s]&&o>0&&i[s].length>0&&(c+=(c?"&":"")+e.escape(i[s].join(","))+"="+e.escape(s),o--);e.cookieWrite("s_sq",c)}}}return t},e.Za=function(){if(!e.nb){var t,i,n=new Date,a=o.location,s=i=t="",r="",c="",l="1.2",d=e.cookieWrite("s_cc","true",0)?"Y":"N",u="",h="";if(n.setUTCDate&&(l="1.3",0..toPrecision&&(l="1.5",n=[],n.forEach))){l="1.6",i=0,t={};try{i=new Iterator(t),i.next&&(l="1.7",n.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(p){}}t=screen.width+"x"+screen.height,s=navigator.javaEnabled()?"Y":"N",i=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,r=e.w.innerWidth?e.w.innerWidth:e.d.documentElement.offsetWidth,c=e.w.innerHeight?e.w.innerHeight:e.d.documentElement.offsetHeight;try{e.b.addBehavior("#default#homePage"),u=e.b.ub(a)?"Y":"N"}catch(m){}try{e.b.addBehavior("#default#clientCaps"),h=e.b.connectionType}catch(f){}e.resolution=t,e.colorDepth=i,e.javascriptVersion=l,e.javaEnabled=s,e.cookiesEnabled=d,e.browserWidth=r,e.browserHeight=c,e.connectionType=h,e.homepage=u,e.nb=1}},e.I={},e.loadModule=function(i,n){var a=e.I[i];if(!a){a=t["AppMeasurement_Module_"+i]?new t["AppMeasurement_Module_"+i](e):{},e.I[i]=e[i]=a,a.Fa=function(){return a.Ja},a.Ka=function(t){(a.Ja=t)&&(e[i+"_onLoad"]=t,e.B(i+"_onLoad",[e,a],1)||t(e,a))};try{Object.defineProperty?Object.defineProperty(a,"onLoad",{get:a.Fa,set:a.Ka}):a._olc=1}catch(o){a._olc=1}}n&&(e[i+"_onLoad"]=n,e.B(i+"_onLoad",[e,a],1)||n(e,a))},e.q=function(t){var i,n;for(i in e.I)if(!Object.prototype[i]&&(n=e.I[i])&&(n._olc&&n.onLoad&&(n._olc=0,n.onLoad(e,n)),n[t]&&n[t]()))return 1;return 0},e.bb=function(){var t=Math.floor(1e13*Math.random()),i=e.visitorSampling,n=e.visitorSamplingGroup;n="s_vsn_"+(e.visitorNamespace?e.visitorNamespace:e.account)+(n?"_"+n:"");var a=e.cookieRead(n);if(i){if(a&&(a=parseInt(a)),!a){if(!e.cookieWrite(n,t))return 0;a=t}if(a%1e4>v)return 0}return 1},e.K=function(t,i){var n,a,o,s,r,c;for(n=0;2>n;n++)for(a=n>0?e.ia:e.c,o=0;o<a.length;o++)if(s=a[o],(r=t[s])||t["!"+s]){if(!i&&("contextData"==s||"retrieveLightData"==s)&&e[s])for(c in e[s])r[c]||(r[c]=e[s][c]);e[s]=r}},e.Aa=function(t,i){var n,a,o,s;for(n=0;2>n;n++)for(a=n>0?e.ia:e.c,o=0;o<a.length;o++)s=a[o],t[s]=e[s],!i&&!t[s]&&(t["!"+s]=1)},e.Ua=function(e){var t,i,n,a,o,s,r=0,c="",l="";if(e&&e.length>255&&(t=""+e,i=t.indexOf("?"),i>0&&(s=t.substring(i+1),t=t.substring(0,i),a=t.toLowerCase(),n=0,"http://"==a.substring(0,7)?n+=7:"https://"==a.substring(0,8)&&(n+=8),i=a.indexOf("/",n),i>0&&(a=a.substring(n,i),o=t.substring(i),t=t.substring(0,i),a.indexOf("google")>=0?r=",q,ie,start,search_key,word,kw,cd,":a.indexOf("yahoo.co")>=0&&(r=",p,ei,"),r&&s)))){if((e=s.split("&"))&&e.length>1){for(n=0;n<e.length;n++)a=e[n],i=a.indexOf("="),i>0&&r.indexOf(","+a.substring(0,i)+",")>=0?c+=(c?"&":"")+a:l+=(l?"&":"")+a;c&&l?s=c+"&"+l:l=""}i=253-(s.length-l.length)-t.length,e=t+(i>0?o.substring(0,i):"")+"?"+s}return e},e.U=!1,e.O=!1,e.Ia=function(t){e.marketingCloudVisitorID=t,e.O=!0,e.k()},e.R=!1,e.L=!1,e.Ca=function(t){e.analyticsVisitorID=t,e.L=!0,e.k()},e.T=!1,e.N=!1,e.Ea=function(t){e.audienceManagerLocationHint=t,e.N=!0,e.k()},e.S=!1,e.M=!1,e.Da=function(t){e.audienceManagerBlob=t,e.M=!0,e.k()},e.isReadyToTrack=function(){var t=!0,i=e.visitor;return i&&i.isAllowed()&&(!e.U&&!e.marketingCloudVisitorID&&i.getMarketingCloudVisitorID&&(e.U=!0,e.marketingCloudVisitorID=i.getMarketingCloudVisitorID([e,e.Ia]),e.marketingCloudVisitorID)&&(e.O=!0),!e.R&&!e.analyticsVisitorID&&i.getAnalyticsVisitorID&&(e.R=!0,e.analyticsVisitorID=i.getAnalyticsVisitorID([e,e.Ca]),e.analyticsVisitorID)&&(e.L=!0),!e.T&&!e.audienceManagerLocationHint&&i.getAudienceManagerLocationHint&&(e.T=!0,e.audienceManagerLocationHint=i.getAudienceManagerLocationHint([e,e.Ea]),e.audienceManagerLocationHint)&&(e.N=!0),!e.S&&!e.audienceManagerBlob&&i.getAudienceManagerBlob&&(e.S=!0,e.audienceManagerBlob=i.getAudienceManagerBlob([e,e.Da]),e.audienceManagerBlob)&&(e.M=!0),(e.U&&!e.O&&!e.marketingCloudVisitorID||e.R&&!e.L&&!e.analyticsVisitorID||e.T&&!e.N&&!e.audienceManagerLocationHint||e.S&&!e.M&&!e.audienceManagerBlob)&&(t=!1)),t},e.j=i,e.l=0,e.callbackWhenReadyToTrack=function(t,n,a){var o;o={},o.Oa=t,o.Na=n,o.La=a,e.j==i&&(e.j=[]),e.j.push(o),0==e.l&&(e.l=setInterval(e.k,100))},e.k=function(){var t;if(e.isReadyToTrack()&&(e.l&&(clearInterval(e.l),e.l=0),e.j!=i))for(;e.j.length>0;)t=e.j.shift(),t.Na.apply(t.Oa,t.La)},e.Ga=function(t){var n,a,o=i,s=i;if(!e.isReadyToTrack()){if(n=[],t!=i)for(a in o={},t)o[a]=t[a];return s={},e.Aa(s,!0),n.push(o),n.push(s),e.callbackWhenReadyToTrack(e,e.track,n),!0}return!1},e.Wa=function(){var t,i=e.cookieRead("s_fid"),n="",a="";t=8;var o=4;if(!i||i.indexOf("-")<0){for(i=0;16>i;i++)t=Math.floor(Math.random()*t),n+="0123456789ABCDEF".substring(t,t+1),t=Math.floor(Math.random()*o),a+="0123456789ABCDEF".substring(t,t+1),t=o=16;i=n+"-"+a}return e.cookieWrite("s_fid",i,1)||(i=0),i},e.t=e.track=function(i,n){var a,s=new Date,r="s"+Math.floor(s.getTime()/108e5)%10+Math.floor(1e13*Math.random()),c=s.getYear();c="t="+e.escape(s.getDate()+"/"+s.getMonth()+"/"+(1900>c?c+1900:c)+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+" "+s.getDay()+" "+s.getTimezoneOffset()),e.visitor&&(e.visitor.getAuthState&&(e.authState=e.visitor.getAuthState()),!e.supplementalDataID&&e.visitor.getSupplementalDataID&&(e.supplementalDataID=e.visitor.getSupplementalDataID("AppMeasurement:"+e._in,e.expectSupplementalData?!1:!0))),e.q("_s"),e.B("track",arguments)||(e.Ga(i)||(n&&e.K(n),i&&(a={},e.Aa(a,0),e.K(i)),e.bb()&&(e.analyticsVisitorID||e.marketingCloudVisitorID||(e.fid=e.Wa()),e.hb(),e.usePlugins&&e.doPlugins&&e.doPlugins(e),e.account&&(e.abort||(e.trackOffline&&!e.timestamp&&(e.timestamp=Math.floor(s.getTime()/1e3)),s=t.location,e.pageURL||(e.pageURL=s.href?s.href:s),e.referrer||e.Ba||(e.referrer=o.document.referrer,e.Ba=1),e.referrer=e.Ua(e.referrer),e.q("_g")),e.Ya()&&!e.abort&&(e.Za(),c+=e.Xa(),e.gb(r,c),e.q("_t"),e.referrer=""))),i&&e.K(a,1)),e.abort=e.supplementalDataID=e.timestamp=e.pageURLRest=e.linkObject=e.clickObject=e.linkURL=e.linkName=e.linkType=t.vb=e.pe=e.pev1=e.pev2=e.pev3=e.g=0);
},e.tl=e.trackLink=function(t,i,n,a,o){return e.linkObject=t,e.linkType=i,e.linkName=n,o&&(e.i=t,e.p=o),e.track(a)},e.trackLight=function(t,i,n,a){return e.lightProfileID=t,e.lightStoreForSeconds=i,e.lightIncrementBy=n,e.track(a)},e.clearVars=function(){var t,i;for(t=0;t<e.c.length;t++)i=e.c[t],("prop"==i.substring(0,4)||"eVar"==i.substring(0,4)||"hier"==i.substring(0,4)||"list"==i.substring(0,4)||"channel"==i||"events"==i||"eventList"==i||"products"==i||"productList"==i||"purchaseID"==i||"transactionID"==i||"state"==i||"zip"==i||"campaign"==i)&&(e[i]=void 0)},e.tagContainerMarker="",e.gb=function(t,i){var n,a=e.trackingServer;n="";var o=e.dc,s="sc.",r=e.visitorNamespace;a?e.trackingServerSecure&&e.ssl&&(a=e.trackingServerSecure):(r||(r=e.account,a=r.indexOf(","),a>=0&&(r=r.substring(0,a)),r=r.replace(/[^A-Za-z0-9]/g,"")),n||(n="2o7.net"),o=o?(""+o).toLowerCase():"d1","2o7.net"==n&&("d1"==o?o="112":"d2"==o&&(o="122"),s=""),a=r+"."+o+"."+s+n),n=e.ssl?"https://":"http://",o=e.AudienceManagement&&e.AudienceManagement.isReady(),n+=a+"/b/ss/"+e.account+"/"+(e.mobile?"5.":"")+(o?"10":"1")+"/JS-"+e.version+(e.mb?"T":"")+(e.tagContainerMarker?"-"+e.tagContainerMarker:"")+"/"+t+"?AQB=1&ndh=1&pf=1&"+(o?"callback=s_c_il["+e._in+"].AudienceManagement.passData&":"")+i+"&AQE=1",e.Sa(n),e.Y()},e.Sa=function(t){e.e||e.$a(),e.e.push(t),e.aa=e.r(),e.za()},e.$a=function(){e.e=e.cb(),e.e||(e.e=[])},e.cb=function(){var i,n;if(e.fa()){try{(n=t.localStorage.getItem(e.da()))&&(i=t.JSON.parse(n))}catch(a){}return i}},e.fa=function(){var i=!0;return e.trackOffline&&e.offlineFilename&&t.localStorage&&t.JSON||(i=!1),i},e.pa=function(){var t=0;return e.e&&(t=e.e.length),e.v&&t++,t},e.Y=function(){if(!e.v)if(e.qa=i,e.ea)e.aa>e.G&&e.xa(e.e),e.ha(500);else{var t=e.Ma();t>0?e.ha(t):(t=e.na())&&(e.v=1,e.fb(t),e.jb(t))}},e.ha=function(t){e.qa||(t||(t=0),e.qa=setTimeout(e.Y,t))},e.Ma=function(){var t;return!e.trackOffline||e.offlineThrottleDelay<=0?0:(t=e.r()-e.wa,e.offlineThrottleDelay<t?0:e.offlineThrottleDelay-t)},e.na=function(){return e.e.length>0?e.e.shift():void 0},e.fb=function(t){if(e.debugTracking){var i="AppMeasurement Debug: "+t;t=t.split("&");var n;for(n=0;n<t.length;n++)i+="\n	"+e.unescape(t[n]);e.eb(i)}},e.Ha=function(){return e.marketingCloudVisitorID||e.analyticsVisitorID},e.Q=!1;var r;try{r=JSON.parse('{"x":"y"}')}catch(c){r=null}r&&"y"==r.x?(e.Q=!0,e.P=function(e){return JSON.parse(e)}):t.$&&t.$.parseJSON?(e.P=function(e){return t.$.parseJSON(e)},e.Q=!0):e.P=function(){return null},e.jb=function(i){var n,a,o;if(e.Ha()&&i.length>2047&&("undefined"!=typeof XMLHttpRequest&&(n=new XMLHttpRequest,"withCredentials"in n?a=1:n=0),!n&&"undefined"!=typeof XDomainRequest&&(n=new XDomainRequest,a=2),n&&e.AudienceManagement&&e.AudienceManagement.isReady())&&(e.Q?n.ja=!0:n=0),!n&&e.ab&&(i=i.substring(0,2047)),!n&&e.d.createElement&&e.AudienceManagement&&e.AudienceManagement.isReady()&&(n=e.d.createElement("SCRIPT"))&&"async"in n&&((o=(o=e.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:e.d.body)?(n.type="text/javascript",n.setAttribute("async","async"),a=3):n=0),n||(n=new Image,n.alt=""),n.la=function(){try{e.ga&&(clearTimeout(e.ga),e.ga=0),n.timeout&&(clearTimeout(n.timeout),n.timeout=0)}catch(t){}},n.onload=n.lb=function(){if(n.la(),e.Ra(),e.V(),e.v=0,e.Y(),n.ja){n.ja=!1;try{var t=e.P(n.responseText);AudienceManagement.passData(t)}catch(i){}}},n.onabort=n.onerror=n.Ta=function(){n.la(),(e.trackOffline||e.ea)&&e.v&&e.e.unshift(e.Qa),e.v=0,e.aa>e.G&&e.xa(e.e),e.V(),e.ha(500)},n.onreadystatechange=function(){4==n.readyState&&(200==n.status?n.lb():n.Ta())},e.wa=e.r(),1==a||2==a){var s=i.indexOf("?");o=i.substring(0,s),s=i.substring(s+1),s=s.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==a?(n.open("POST",o,!0),n.send(s)):2==a&&(n.open("POST",o),n.send(s))}else if(n.src=i,3==a){if(e.ua)try{o.removeChild(e.ua)}catch(r){}o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),e.ua=e.Pa}n.abort&&(e.ga=setTimeout(n.abort,5e3)),e.Qa=i,e.Pa=t["s_i_"+e.replace(e.account,",","_")]=n,(e.useForcedLinkTracking&&e.A||e.p)&&(e.forcedLinkTrackingTimeout||(e.forcedLinkTrackingTimeout=250),e.W=setTimeout(e.V,e.forcedLinkTrackingTimeout))},e.Ra=function(){if(e.fa()&&!(e.va>e.G))try{t.localStorage.removeItem(e.da()),e.va=e.r()}catch(i){}},e.xa=function(i){if(e.fa()){e.za();try{t.localStorage.setItem(e.da(),t.JSON.stringify(i)),e.G=e.r()}catch(n){}}},e.za=function(){if(e.trackOffline)for((!e.offlineLimit||e.offlineLimit<=0)&&(e.offlineLimit=10);e.e.length>e.offlineLimit;)e.na()},e.forceOffline=function(){e.ea=!0},e.forceOnline=function(){e.ea=!1},e.da=function(){return e.offlineFilename+"-"+e.visitorNamespace+e.account},e.r=function(){return(new Date).getTime()},e.ra=function(e){return e=e.toLowerCase(),0!=e.indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")?!0:!1},e.setTagContainer=function(t){var i,n,a;for(e.mb=t,i=0;i<e._il.length;i++)if((n=e._il[i])&&"s_l"==n._c&&n.tagContainerName==t){if(e.K(n),n.lmq)for(i=0;i<n.lmq.length;i++)a=n.lmq[i],e.loadModule(a.n);if(n.ml)for(a in n.ml)if(e[a])for(i in t=e[a],a=n.ml[a])!Object.prototype[i]&&("function"!=typeof a[i]||(""+a[i]).indexOf("s_c_il")<0)&&(t[i]=a[i]);if(n.mmq)for(i=0;i<n.mmq.length;i++)a=n.mmq[i],e[a.m]&&(t=e[a.m],t[a.f]&&"function"==typeof t[a.f]&&(a.a?t[a.f].apply(t,a.a):t[a.f].apply(t)));if(n.tq)for(i=0;i<n.tq.length;i++)e.track(n.tq[i]);n.s=e;break}},e.Util={urlEncode:e.escape,urlDecode:e.unescape,cookieRead:e.cookieRead,cookieWrite:e.cookieWrite,getQueryParam:function(i,n,a){var o;return n||(n=e.pageURL?e.pageURL:t.location),a||(a="&"),i&&n&&(n=""+n,o=n.indexOf("?"),o>=0&&(n=a+n.substring(o+1)+a,o=n.indexOf(a+i+"="),o>=0&&(n=n.substring(o+a.length+i.length+1),o=n.indexOf(a),o>=0&&(n=n.substring(0,o)),n.length>0)))?e.unescape(n):""}},e.z=["supplementalDataID","timestamp","dynamicVariablePrefix","visitorID","marketingCloudVisitorID","analyticsVisitorID","audienceManagerLocationHint","authState","fid","vmk","visitorMigrationKey","visitorMigrationServer","visitorMigrationServerSecure","charSet","visitorNamespace","cookieDomainPeriods","fpCookieDomainPeriods","cookieLifetime","pageName","pageURL","referrer","contextData","currencyCode","lightProfileID","lightStoreForSeconds","lightIncrementBy","retrieveLightProfiles","deleteLightProfiles","retrieveLightData","pe","pev1","pev2","pev3","pageURLRest"],e.c=e.z.concat(["purchaseID","variableProvider","channel","server","pageType","transactionID","campaign","state","zip","events","events2","products","audienceManagerBlob","tnt"]),e.ba=["timestamp","charSet","visitorNamespace","cookieDomainPeriods","cookieLifetime","contextData","lightProfileID","lightStoreForSeconds","lightIncrementBy"],e.H=e.ba.slice(0),e.ia=["account","allAccounts","debugTracking","visitor","trackOffline","offlineLimit","offlineThrottleDelay","offlineFilename","usePlugins","doPlugins","configURL","visitorSampling","visitorSamplingGroup","linkObject","clickObject","linkURL","linkName","linkType","trackDownloadLinks","trackExternalLinks","trackClickMap","trackInlineStats","linkLeaveQueryString","linkTrackVars","linkTrackEvents","linkDownloadFileTypes","linkExternalFilters","linkInternalFilters","useForcedLinkTracking","forcedLinkTrackingTimeout","trackingServer","trackingServerSecure","ssl","abort","mobile","dc","lightTrackVars","maxDelay","expectSupplementalData","AudienceManagement"];for(n=0;250>=n;n++)76>n&&(e.c.push("prop"+n),e.H.push("prop"+n)),e.c.push("eVar"+n),e.H.push("eVar"+n),6>n&&e.c.push("hier"+n),4>n&&e.c.push("list"+n);n=["latitude","longitude","resolution","colorDepth","javascriptVersion","javaEnabled","cookiesEnabled","browserWidth","browserHeight","connectionType","homepage"],e.c=e.c.concat(n),e.z=e.z.concat(n),e.ssl=t.location.protocol.toLowerCase().indexOf("https")>=0,e.charSet="UTF-8",e.contextData={},e.offlineThrottleDelay=0,e.offlineFilename="AppMeasurement.offline",e.wa=0,e.aa=0,e.G=0,e.va=0,e.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",e.w=t,e.d=t.document;try{e.ab="Microsoft Internet Explorer"==navigator.appName}catch(d){}e.V=function(){e.W&&(t.clearTimeout(e.W),e.W=i),e.i&&e.A&&e.i.dispatchEvent(e.A),e.p&&("function"==typeof e.p?e.p():e.i&&e.i.href&&(e.d.location=e.i.href)),e.i=e.A=e.p=0},e.ya=function(){e.b=e.d.body,e.b?(e.o=function(i){var n,a,o,s,r;if(!(e.d&&e.d.getElementById("cppXYctnr")||i&&i["s_fe_"+e._in])){if(e.ka){if(!e.useForcedLinkTracking)return e.b.removeEventListener("click",e.o,!0),void(e.ka=e.useForcedLinkTracking=0);e.b.removeEventListener("click",e.o,!1)}else e.useForcedLinkTracking=0;e.clickObject=i.srcElement?i.srcElement:i.target;try{if(!e.clickObject||e.F&&e.F==e.clickObject||!(e.clickObject.tagName||e.clickObject.parentElement||e.clickObject.parentNode))e.clickObject=0;else{var c=e.F=e.clickObject;if(e.Z&&(clearTimeout(e.Z),e.Z=0),e.Z=setTimeout(function(){e.F==c&&(e.F=0)},1e4),o=e.pa(),e.track(),o<e.pa()&&e.useForcedLinkTracking&&i.target){for(s=i.target;s&&s!=e.b&&"A"!=s.tagName.toUpperCase()&&"AREA"!=s.tagName.toUpperCase();)s=s.parentNode;if(s&&(r=s.href,e.ra(r)||(r=0),a=s.target,i.target.dispatchEvent&&r&&(!a||"_self"==a||"_top"==a||"_parent"==a||t.name&&a==t.name))){try{n=e.d.createEvent("MouseEvents")}catch(l){n=new t.MouseEvent}if(n){try{n.initMouseEvent("click",i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)}catch(d){n=0}n&&(n["s_fe_"+e._in]=n.s_fe=1,i.stopPropagation(),i.kb&&i.kb(),i.preventDefault(),e.i=i.target,e.A=n)}}}}}catch(u){e.clickObject=0}}},e.b&&e.b.attachEvent?e.b.attachEvent("onclick",e.o):e.b&&e.b.addEventListener&&(navigator&&(navigator.userAgent.indexOf("WebKit")>=0&&e.d.createEvent||navigator.userAgent.indexOf("Firefox/2")>=0&&t.MouseEvent)&&(e.ka=1,e.useForcedLinkTracking=1,e.b.addEventListener("click",e.o,!0)),e.b.addEventListener("click",e.o,!1))):setTimeout(e.ya,30)},e.ya()}function s_gi(e){var t,i,n,a,o,s=window.s_c_il,r=e.split(","),c=0;if(s)for(i=0;!c&&i<s.length;){if(t=s[i],"s_c"==t._c&&(t.account||t.oun))if(t.account&&t.account==e)c=1;else for(n=t.account?t.account:t.oun,n=t.allAccounts?t.allAccounts:n.split(","),a=0;a<r.length;a++)for(o=0;o<n.length;o++)r[a]==n[o]&&(c=1);i++}return c||(t=new AppMeasurement),t.setAccount?t.setAccount(e):t.sa&&t.sa(e),t}function s_pgicq(){var e,t,i,n=window,a=n.s_giq;if(a)for(e=0;e<a.length;e++)t=a[e],i=s_gi(t.oun),i.setAccount(t.un),i.setTagContainer(t.tagContainerName);n.s_giq=0}define("common/utils/background",["fastdom","common/utils/_","common/utils/config"],function(e,t,i){return function(e){var n=i.switches.backgroundJs;t.reduceRight(e,function(e,t){return function(){var i=function(){t(),e()};n?setTimeout(i,1):i()}},function(){})()}}),define("common/modules/analytics/foresee-survey",["common/utils/config","common/utils/cookies","common/utils/detect"],function(e,t,i){function n(){require(["js!foresee.js"])}function a(){var a="Network Front"===e.page.contentType,o=i.isBreakpoint({max:"mobile"})?.008:.006,s=Math.random()<=o,r=/forceForesee/.test(location.hash);t.get("GU_TEST")||a||!(window.openForeseeWhenReady||s||r)||n(),window.guardian&&(window.guardian.openForesee=n)}return{load:a}}),define("common/modules/analytics/livestats",["common/utils/cookies","common/utils/storage","common/modules/analytics/beacon","common/modules/experiments/ab"],function(e,t,i,n){function a(){var e="gu.session";return"undefined"!=typeof s?s:(t.session.get(e)?s=!1:(t.session.set(e,"true"),s=!0),s)}function o(e,t){var i,n=[];for(i in e)n.push(i+"="+encodeURIComponent(e[i]));return t+"?"+n.join("&")}var s;return{log:function(){var e=n.getAbLoggableObject();a()?e.type="session":e.type="view",i.fire(o(e,"/ab.gif"))}}}),define("common/modules/analytics/headlines-test-analytics",["common/utils/detect","common/utils/config","common/modules/analytics/beacon"],function(e,t,i){function n(){e.hasPushStateSupport()?history.replaceState("",document.title,window.location.pathname):window.location.hash=""}return{go:function(){var e=window.location.hash;"/us"===window.location.pathname&&(t.tests.headlinesAbVariant?i.counts("headlines-variant-seen"):t.tests.headlinesAbControl&&i.counts("headlines-control-seen")),"#headline-variant"===e?(i.counts("headlines-variant-clicked"),n()):"#headline-control"===e&&(i.counts("headlines-control-clicked"),n())}}}),define("common/modules/analytics/media-listener",["bean","common/utils/mediator"],function(e,t){return function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(function(){e.matches&&t.emit("module:clickstream:interaction","print")})}}});var s=s_gi(s_account);s.charSet="UTF-8",s.currencyCode="GBP",s.trackDownloadLinks=!0,s.trackExternalLinks=!1,s.trackInlineStats=!0,s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",s.linkInternalFilters="javascript:,adinfo-guardian.co.uk,dating.guardian.co.uk,guardian.co.uk,guardian.greatgetaways.co.uk,guardian.lcplc-online.co.uk,guardian.oddschecker.com,guardian.pickthescore.co.uk,guardian.sportinglife.com,guardian.touch-line.com,guardian.unbiased.co.uk,guardianapis.com,guardianapps.co.uk,guardianbooks.co.uk,guardianbookshop.co.uk,guardiancottages.co.uk,guardiandigitalcomparison.co.uk,guardiandirectsubs.co.uk,guardianeatright.co.uk,guardianecostore.co.uk,guardianenergycomparison.co.uk,guardianenergycomparison.com,guardianfashionstore.co.uk,guardiangardencentre.co.uk,guardiangiftexperiences.co.uk,guardianholidayoffers.co.uk,guardianhomeexchange.co.uk,guardianhomeexchange.com,guardianinvesting.co.uk,guardianjobs.co.uk,guardianjobs.com,guardianjobs.mobi,guardianjobsrecruiter.co.uk,guardiannews.com,guardian-newspaper.com,guardianoffers.co.uk,guardianprofessional.co.uk,guardianpublic.co.uk,guardiansubscriptions.co.uk,guardiantickets.co.uk,guardianvouchercodes.co.uk,guardianweekly.co.uk,guardianweekly.com,id.guardian.co.uk,ivebeenthere.co.uk,jobs.guardian.co.uk,kable.co.uk,money-deals.co.uk,mps-expenses.guardian.co.uk,ogenterprises.co.uk,ogtravelinsurance.co.uk,sixsongsof.me,sixwordmemoirs.co.uk,smarthealthcare.com,sofacinema.co.uk,static.guim.co.uk,theguardian.co.uk,theguardian.com,traffic.outbrain.com,tvlistings.guardian.co.uk",s.linkLeaveQueryString=!1,s.linkTrackVars="None",s.linkTrackEvents="None",s._tpDST={2012:"3/25,10/28",2013:"3/31,10/27",2014:"3/30,10/26",2015:"3/29,10/25",2016:"3/27,10/30",2017:"3/26,10/29",2018:"3/25,10/28",2019:"3/31,10/27"},s.usePlugins=!0,s.doPlugins=s_doPlugins;var s_sv_dynamic_root="survey.112.2o7.net/survey/dynamic",s_sv_gather_root="survey.112.2o7.net/survey/gather";s.loadMediaModule=function(e,t){var i=this;i.loadModule("Media"),i.Media.autoTrack=!1,i.Media.trackWhilePlaying=!0,i.Media.trackSeconds=15,i.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",i.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",i.Media.trackMilestones="25,50,75",i.Media.segmentByMilestones=!0,i.Media.trackUsingContextData=!0,i.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},i.Media.monitor=function(e,t){"OPEN"==t.event&&(e.eVar7=e.pageName,e.eVar61=e._GUVideo.restricted?"restricted":"not restricted",e._GUVideo.ad?e.eVar47="video ad":(e.eVar47="video content",e.eVar56=e._GUVideo.provider),e.Media.track(t.name))},i._GUVideo={},i._GUVideo.provider=e,i._GUVideo.restricted=t},s.trackVideoContent=function(e,t){var i=this;i.Media.autoTrack=!1,i.Media.trackVars="events,eVar7,eVar11,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",i.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",i.Media.trackMilestones="25,50,75",i.Media.segmentByMilestones=!0,i.Media.trackUsingContextData=!0,i.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},i._GUVideo.ad=!1,i._GUVideo.provider=e,i._GUVideo.restricted=t},s.trackVideoAd=function(){var e=this;e.Media.autoTrack=!1,e.Media.trackVars="events,eVar7,eVar11,eVar43,prop44,eVar44,eVar47,eVar56,eVar61",e.Media.trackEvents="event57,event59,event64",e.Media.segmentByMilestones=!1,e.Media.trackUsingContextData=!0,e.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event59","a.media.complete":"event64"},e._GUVideo.ad=!0,e._GUVideo.restricted=!1},s.trackingServer="hits.guardian.co.uk",s.trackingServerSecure="hits-secure.guardian.co.uk",s.visitorNamespace="guardian",s.getValOnce=new Function("v","c","e","t","var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?60000:86400000;k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e==0?0:a);}return v==k?'':v"),s.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval && cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;"),s.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),s.getLoadTimeDim=new Function("","var t='';if(typeof performance!=='undefined'){t=(new Date()).getTime()-performance.timing.requestStart;t=t/1000;t=(t>=0&&t<500)?t.toFixed(1):'';}return t;"),s.inList=new Function("v","l","d","var s=this,ar=Array(),i=0,d=(d)?d:',';if(typeof(l)=='string'){if(s.split)ar=s.split(l,d);else if(l.split)ar=l.split(d);else return-1}else ar=l;while(i<ar.length){if(v==ar[i])return true;i++}return false;"),s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST && s._tpDST[d.getFullYear()]){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U='AM';W='Weekday';if(H>=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Weekend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M>30)?'30':'00')+U;a=[tm,tt,D,W];return a;}"),s.getParamValue=function(e){var t,i=window.location.search,n="&";return e&&i&&(t=i.indexOf("?"),t>=0&&(i=n+i.substring(t+1)+n,t=i.indexOf(n+e+"="),t>=0&&(i=i.substring(t+n.length+e.length+1),t=i.indexOf(n),t>=0&&(i=i.substring(0,t)),i.length>0)))?s.unescape(i):""};var j=null;AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),define("omniture",function(e){return function(){var t;return t||e.s}}(this)),define("common/utils/date-formats",[],function(){function e(e){return new Date(e).toISOString().substr(0,10).replace(/-/g,"/")}return{utcDateString:e}}),define("text!common/views/history/tag.html",[],function(){return'<li class="inline-list__item">\n    <a href="/<%=id%>" class="button button--small button--tag button--secondary" data-link-name="<%=index%> | <%=name%>"><%=name%></a>\n</li>\n'}),define("text!common/views/history/mega-nav.html",[],function(){return'<li class="global-navigation__section js-global-navigation__section--history" data-link-name="shortcuts">\n    <span class="global-navigation__title global-navigation__title--history">recently visited</span>\n    <ul class="global-navigation__children global-navigation__children--history">\n        <%=tags%>\n        <a class="button button--small button--tag button--tertiary" href="/preferences" data-link-name="edit">edit these</a>\n    </ul>\n</li>\n'}),define("common/modules/onward/history",["fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/template","common/utils/storage","common/utils/url","common/modules/experiments/ab","text!common/views/history/tag.html","text!common/views/history/mega-nav.html"],function(e,t,i,n,a,o,s,r,c,l){function d(e){return L=e,o.local.set(q,e)}function u(e){return x=e,o.local.set($,e)}function h(){return L=L||o.local.get(q)||[]}function p(){return x||(x=o.local.get($),i.isObject(x)&&i.isObject(x.tags)&&i.isNumber(x.periodEnd)||(x={periodEnd:K,tags:{},showInMegaNav:!0})),x}function m(e){var t=p();delete t.tags[e],u(t)}function f(e){return(i.find(h(),function(t){return t[0]===e})||[])[1]>1}function g(e,t){var n=t||K,a=n-e.periodEnd;return 0!==a&&(e.periodEnd=n,i.each(e.tags,function(t,n){var o=i.chain(B).map(function(e){var n=i.chain(t[e.indexInRecord]).map(function(e){var t=e[0]+a;return R>t&&t>=0?[t,e[1]]:!1}).compact().value();return n.length>1||1===n.length&&n[0][0]<U?n:[]}).value();i.some(o,function(e){return e.length})?e.tags[n]=[t[0]].concat(o):delete e.tags[n]})),e}function v(e){var t=p().tags,n=i.keys(t),a=i.extend({number:100,weights:{},thresholds:{}},e);return n=a.whitelist?n.filter(function(e){return a.whitelist.indexOf(e)>-1}):n,n=a.blacklist?n.filter(function(e){return-1===a.blacklist.indexOf(e)}):n,i.chain(n).map(function(e){var n=t[e],o=i.reduce(B,function(e,t){return e+k(n[t.indexInRecord],a.weights[t.type],a.thresholds[t.type])},0);return{idAndName:[e,n[0]],rank:o}}).compact().sortBy("rank").last(a.number).reverse().pluck("idAndName").value()}function b(e){var t=e&&e.flush;return N=!t&&N||v({blacklist:S(),number:10,weights:{content:1,front:5},thresholds:{content:5,front:1}})}function k(e,t,n){var a,o=0;return t=t||1,n=n||1,a=i.reduce(e,function(e,i){var n=i[0],a=i[1];return o+=a,e+t*(9+a)*(R-n)},0),n>o?0:a}function y(e){return(e||"").split(",")[0]}function w(e){return e?(e=e.replace(/^\/|\/$/g,""),e.match(G)&&(e=e.replace(Y,"")),e=e.split("/"),e=2===e.length&&e[0]===e[1]?[e[0]]:e,e.join("/")):""}function _(){L=void 0,x=void 0,o.local.remove(q),o.local.remove($)}function T(e){var t,n=e.pageId,a=0;e.isFront||(t=h().filter(function(e){var t=i.isArray(e),o=t&&e[0]===n;return a=o?e[1]:a,t&&!o}),t.unshift([n,a+1]),d(t.slice(0,H)))}function C(e,t){var n=g(p(),t),a=w(e.pageId),o=!1;i.chain(F).reduceRight(function(t,i){var n=w(y(e[i.tid])),s=n&&y(e[i.tname]);return n&&s&&(t[n]=s),o=o||n===a,t},{}).each(function(e,t){var a,s,r=n.tags[t]||[];i.forEach(B,function(e){r[e.indexInRecord]=r[e.indexInRecord]||[]}),r[0]=e,a=r[o?2:1],s=i.find(a,function(e){return 0===e[0]}),s?s[1]=s[1]+1:a.unshift([0,1]),n.tags[t]=r}),u(n)}function S(){return O=O||t(".js-navigation-header .js-top-navigation a").map(function(e){return w(s.getPath(t(e).attr("href")))})}function E(){return t(".js-global-navigation")}function D(){var t,i;p().showInMegaNav!==!1&&(z&&I(),t=b(),t.length&&(i=a(l,{tags:t.map(M).join("")}),e.write(function(){E().prepend(i)}),z=!0))}function I(){E().each(function(i){e.write(function(){t(".js-global-navigation__section--history",i).remove()})}),z=!1}function A(){return p().showInMegaNav!==!1}function j(e){var t=p();t.showInMegaNav=!!e,t.showInMegaNav?D():I(),u(t)}function M(e,t){return a(c,{id:e[0],name:e[1],index:t+1})}var L,x,N,O,P=["uk","us","au"],V=["business","commentisfree","culture","environment","media","money","sport","technology"],F=[{tid:"section",tname:"sectionName"},{tid:"keywordIds",tname:"keywords"},{tid:"seriesId",tname:"series"},{tid:"authorIds",tname:"author"}],B=[{type:"content",indexInRecord:1},{type:"front",indexInRecord:2}],R=30,U=10,H=50,q="gu.history",$="gu.history.summary",K=Math.floor(Date.now()/864e5),z=!1,G=new RegExp("^("+P.join("|")+")/("+V.join("|")+")$"),Y=new RegExp("^("+P.join("|")+")/");return{logHistory:T,logSummary:C,showInMegaNav:D,showInMegaNavEnable:j,showInMegaNavEnabled:A,getPopular:v,getPopularFiltered:b,deleteFromSummary:m,isRevisit:f,reset:_,test:{getSummary:p,getHistory:h,pruneSummary:g}}}),define("common/modules/analytics/omniture",["omniture","common/utils/$","common/utils/_","common/utils/config","common/utils/cookies","common/utils/date-formats","common/utils/detect","common/utils/mediator","common/utils/pad","common/utils/storage","common/modules/analytics/beacon","common/modules/analytics/mvt-cookie","common/modules/experiments/ab","common/modules/onward/history","common/modules/identity/api"],function(e,t,i,n,a,o,s,r,c,l,d,u,h,p,m){function f(){this.isEmbed=!!guardian.isEmbed,this.s=window.s,this.pageviewSent=!1,this.addHandlers()}var g="s_ni",v="gu.analytics.referrerVars";return f.prototype.addHandlers=function(){r.on("module:clickstream:interaction",this.trackLinkImmediate.bind(this)),r.on("module:clickstream:click",this.logTag.bind(this)),r.on("module:analytics:omniture:pageview:sent",function(){this.isEmbed||d.fire("/count/pva.gif")}.bind(this)),r.on("module:analytics:omniture:pageview:sent",function(){n.switches.noBounceIndicator&&l.session.remove("gu-bounce-test")})},f.prototype.logView=function(){this.s.t(),this.confirmPageView()},f.prototype.generateTrackingImageString=function(){return"s_i_"+window.s_account.split(",").join("_")},f.prototype.getChannel=function(){return"Network Front"===n.page.contentType?"Network Front":this.isEmbed?"Embedded":n.page.section||""},f.prototype.logTag=function(e){var t,i;if(e.validTarget)if(e.sameHost&&!e.samePage){t={pageName:this.s.pageName,tag:e.tag||"untracked",time:(new Date).getTime()};try{sessionStorage.setItem(g,t.tag)}catch(n){}l.session.set(v,t)}else i=e.samePage?!0:e.target,this.trackLink(i,e.tag,{customEventProperties:e.customEventProperties})},f.prototype.populateEventProperties=function(t){this.s.linkTrackVars="channel,prop1,prop2,prop3,prop4,prop8,prop9,prop10,prop13,prop25,prop31,prop37,prop47,prop51,prop61,prop64,prop65,prop74,eVar7,eVar37,eVar38,eVar39,eVar50,events",this.s.linkTrackEvents="event37",this.s.events="event37",this.s.eVar37=n.page.contentType?n.page.contentType+":"+t:t,this.s.eVar7="D=pageName",this.s.prop37="D=v37",/social/.test(t)&&(e.linkTrackVars+=",eVar12",e.linkTrackEvents+=",event16",e.events+=",event16",e.eVar12=t)},f.prototype.trackLinkImmediate=function(e){this.trackLink(!0,e)},f.prototype.trackLink=function(e,t,n){n=n||{},this.populateEventProperties(t),i.assign(this.s,n.customEventProperties),this.s.tl(e,"o",t),i.forEach(n.customEventProperties,function(e,t){delete this.s[t]})},f.prototype.populatePageProperties=function(){var e,a=new Date,r=this.s.getTimeParting("n","+0"),d=l.session.get(v),f="frontend",b=h.makeOmnitureTag(document),k=u.getMvtFullId(),y=n.page.webPublicationDate;this.s.cookieDomainPeriods="2",this.s.linkInternalFilters+=",localhost,gucode.co.uk,gucode.com,guardiannews.com,int.gnl,proxylocal.com,theguardian.com",this.s.trackingServer="hits.theguardian.com",this.s.trackingServerSecure="hits-secure.theguardian.com",this.s.ce="UTF-8",this.s.pageName=n.page.analyticsName,this.s.prop1=n.page.headline||"",this.s.eVar1=a.getFullYear()+"/"+c(a.getMonth()+1,2)+"/"+c(a.getDate(),2),m.getUserFromCookie()&&(this.s.prop2="GUID:"+m.getUserFromCookie().id,this.s.eVar2="GUID:"+m.getUserFromCookie().id),this.s.prop3=n.page.publication||"",this.s.channel=this.getChannel(),this.s.prop4=n.page.keywords||"",this.s.prop6=n.page.author||"",this.s.prop7=y?o.utcDateString(y):"",this.s.prop8=n.page.pageCode||"",this.s.prop9=n.page.contentType||"",this.s.prop10=n.page.tones||"",this.s.prop13=n.page.series||"",this.s.eVar18=s.getBreakpoint(),this.s.eVar21=(window.innerWidth||document.documentElement.clientWidth)+"x"+(window.innerHeight||document.documentElement.clientHeight),this.s.eVar32=s.getOrientation(),this.s.prop20=r[2]+":"+r[1],this.s.eVar20="D=c20",this.s.prop25=n.page.blogs||"",this.s.prop60=s.isFireFoxOSApp()?"firefoxosapp":null,this.s.prop19=f,this.s.prop31=m.getUserFromCookie()?"registered user":"guest user",this.s.eVar31=m.getUserFromCookie()?"registered user":"guest user",this.s.prop40=s.adblockInUse||s.getFirefoxAdblockPlusInstalled(),this.s.prop47=n.page.edition||"",this.s.prop51=n.page.allowUserGeneratedContent?"witness-contribution-cta-shown":null,this.s.eVar51=b,this.s.list1=b,this.s.list2=i.uniq(t("[data-component]").map(function(e){return t(e).attr("data-component")})).toString(),this.s.list3=i.map(p.getPopularFiltered(),function(e){return e[1]}).join(","),this.s.eVar51&&(this.s.events=this.s.apl(this.s.events,"event58",",")),k&&(this.s.eVar60=k),n.page.commentable&&(this.s.events=this.s.apl(this.s.events,"event46",",")),"identity"===n.page.section&&(this.s.prop11="Users",this.s.prop9="userid",this.s.eVar27=n.page.omnitureErrorMessage||"",this.s.eVar42=n.page.returnUrl||"",this.s.hier2="GU/Users/Registration",this.s.events=this.s.apl(this.s.events,n.page.omnitureEvent,",")),this.s.prop56="Javascript",n.page.productionOffice&&(this.s.prop64=n.page.productionOffice),this.s.prop62="Guardian JS-1.4.1 20140914",this.s.prop63=s.getPageSpeed(),this.s.prop65=n.page.headline||"",this.s.eVar70=n.page.headline||"",this.s.events=this.s.apl(this.s.events,"event4",",",2),this.s.prop67="nextgen-served",y?this.s.prop30="content":this.s.prop30="non-content",""!==this.s.getParamValue("INTCMP")&&(this.s.eVar50=this.s.getParamValue("INTCMP")),
this.s.eVar50=this.s.getValOnce(this.s.eVar50,"s_intcampaign",0),this.s.eVar58=navigator.platform||"unknown",n.page.inBodyInternalLinkCount&&(this.s.prop58=n.page.inBodyInternalLinkCount),n.page.inBodyExternalLinkCount&&(this.s.prop69=n.page.inBodyExternalLinkCount),d&&(e=(new Date).getTime(),e-d.time<6e4&&(this.s.eVar24=d.pageName,this.s.eVar37=d.tag,this.s.events="event37",this.s.eVar7=d.pageName,this.s.prop37=d.tag),l.session.remove(g),l.session.remove(v)),this.s.prop73=s.isFacebookApp()?"facebook app":s.isTwitterApp()?"twitter app":null,this.s.prop75=n.page.wordCount||0,this.s.eVar75=n.page.wordCount||0,this.isEmbed&&(this.s.eVar11=this.s.prop11="Embedded",window.parent&&window.parent!==window&&(this.s.referrer=document.referrer))},f.prototype.go=function(){this.populatePageProperties(),this.logView(),r.emit("analytics:ready")},f.prototype.confirmPageView=function(){var e=setInterval(function(){var t=window[this.generateTrackingImageString()];"undefined"!=typeof t&&(t.complete===!0||t.width+t.height>0)&&(clearInterval(e),this.pageviewSent=!0,r.emit("module:analytics:omniture:pageview:sent"))}.bind(this),250);setTimeout(function(){clearInterval(e)},1e4)},new f}),define("common/modules/analytics/register",["common/utils/mediator","common/modules/experiments/ab","common/utils/_"],function(e,t,i){function n(e){c.push({name:e,status:"unfinished"})}function a(e){i.where(c,{name:e}).forEach(function(e){e.status="completed",e.endTime=Date.now()-l+"ms"})}function o(e){i.where(c,{name:e}).forEach(function(e){e.status="failed",e.endTime=Date.now()-l+"ms"})}function s(){require(["ophan/ng"],function(e){e.record({register:c,abTestRegister:t.getAbLoggableObject()})})}function r(){e.on("register:begin",n),e.on("register:end",a),e.on("register:error",o),window.setTimeout(s.bind(),5e3)}var c=[],l=Date.now();return{initialise:r,begin:n,end:a,error:o}}),define("common/modules/analytics/scrollDepth",["common/utils/_","common/utils/mediator"],function(e,t){function i(t){this.opts=e.assign(this.opts,t),e.bindAll(this,"assertScrolling","hasDataChanged"),this.opts.isContent&&(this.opts.contentEl=this.contentEl||document.getElementById("article")||document.getElementById("live-blog")),this.init()}return i.prototype.opts={changeThreshold:10,isContent:!1,pageEl:document.body},i.prototype.data={page:{start:(new Date).getTime(),depth:0,duration:0},content:{depth:0}},i.prototype.timeSince=function(e){return(new Date).getTime()-e},i.prototype.getPercentageInViewPort=function(e){var t=e.getBoundingClientRect(),i=window.innerHeight||document.body.clientHeight;return t.bottom<0||t.bottom<i?100:t.top>i?0:t.top>0?100/(t.height||1)*(i-t.top):100/(t.height||1)*(Math.abs(t.top)+i)},i.prototype.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top<(window.innerHeight||document.body.clientHeight)&&t.left<(window.innerWidth||document.body.clientWidth)},i.prototype.setData=function(e){var t,i=this.opts[e+"El"];return i?(t=this.getPercentageInViewPort(i),t-this.data[e].depth>this.opts.changeThreshold?(this.data[e].depth=t,"number"==typeof this.data[e].duration&&(this.data[e].duration=this.timeSince(this.data[e].start)),!0):!1):!1},i.prototype.hasDataChanged=function(){var e=this.setData("page"),t=this.opts.isContent?this.setData("content"):!1;(e||t)&&this.log()},i.prototype.assertScrolling=function(){function e(){t.emit("scrolldepth:inactive")}"number"==typeof this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(e.bind(this),1e3)},i.prototype.log=function(){t.emit("scrolldepth:data",this.data)},i.prototype.init=function(){t.on("window:throttledScroll",e.debounce(this.assertScrolling,200)),t.on("scrolldepth:inactive",this.hasDataChanged),t.on("module:clickstream:click",this.hasDataChanged)},i}),define("common/utils/scan",["common/utils/_"],function(e){return function(t,i,n){return e.reduce(t,function(t,n){return t.concat(i(e.last(t),n))},[n])}}),define("common/modules/analytics/css-logging",["Promise","common/utils/_","common/utils/config","common/utils/ajax","common/utils/detect","common/utils/url","common/utils/scan","common/utils/mediator","common/modules/analytics/beacon"],function(e,t,i,n,a,o,s,r,c){function l(e){var i=e?e.cssRules||e.rules:null;return i?t.values(i):e}function d(e){return e&&e.selectorText&&e.selectorText.replace(y,"").split(w)}function u(e){var t=e.match(/\.[^\s\.]+\.[^\s]+/g)||[];return t.forEach(function(t){e=e.replace(t,h(t))}),e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function h(e){return t.sortBy(e.split(".")).join(".")}function p(e){var i,n,a=t.chain(m()).map(l).flatten().map(l).flatten().map(d).flatten().compact().uniq().map(u).value();return e?a:(n=a.length,i=t.random(0,n),a.slice(i,i+k).concat(n>i+k?[]:a.slice(0,(i+k)%n)))}function m(){return t.chain(document.styleSheets).filter(function(e){return e&&t.values(e.rules||e.cssRules).length>0&&e.ownerNode&&"STYLE"===e.ownerNode.nodeName&&e.ownerNode.className.indexOf(_)>-1}).value()}function f(e){return n({url:e.href,crossOrigin:!0}).then(function(e){var t=document.createElement("style");t.className=_,t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)})}function g(){return e.all(t.chain(document.styleSheets).filter(function(e){return e&&e.href&&e.href.match(/\/\/(localhost|assets\.guim\.co\.uk)/)&&(!e.media||"print"!==e.media.mediaText)&&-1===e.ownerNode.className.indexOf(T)}).forEach(function(e){e.ownerNode.className+=" "+T}).map(f).value())}function v(e){g().then(function(){c.postJson("/css",JSON.stringify({selectors:t.chain(p(e)).reduce(function(e,i){return t.isUndefined(e[i])&&(e[i]=!!document.querySelector(i)),e},{}).value(),contentType:i.page.contentType||"unknown",breakpoint:a.getBreakpoint()||"unknown"}),e)})}function b(e){return t.debounce(function(i){(!i||i.samePage)&&setTimeout(function(){v(e)},e?0:t.random(0,3e3))},500)}var k=500,y=new RegExp(/:+[^\s\,]+/g),w=new RegExp(/\s*,\s*/g),_="js-loggable",T="js-inlined",C=!1;return function(e){var i;e=e||"#csslogging"===window.location.hash,(e||1===t.random(1,2500))&&(i=b(e),i(),C||(r.on("module:clickstream:interaction",i),r.on("module:clickstream:click",i),C=!0))}}),define("common/utils/filterPairs",["common/utils/_"],function(e){return function(t){return e.chain(t).filter(function(e){return e[1]}).map(function(e){return e[0]}).value()}}),define("common/modules/analytics/simple-metrics",["common/utils/filterPairs","common/utils/mediator","common/modules/analytics/beacon"],function(e,t,i){return function(){navigator.sendBeacon&&(i.beaconCounts("sm-page-view"),t.on("module:clickstream:click",function(t){var n=e([["sm-interaction-on-same-page",t.samePage],["sm-another-guardian-page",!t.samePage&&t.sameHost],["sm-clicked-related-content",/related-content/.test(t.tag)],["sm-clicked-series-component",/\| series \|/.test(t.tag)],["sm-clicked-most-popular-component",/\| most popular \|/.test(t.tag)]]);n.length>0&&i.beaconCounts(n)}))}}),define("common/modules/navigation/navigation",["bean","qwery","fastdom","common/utils/mediator","common/utils/detect","common/utils/$"],function(e,t,i,n,a,o){var s={init:function(){this.jsEnableFooterNav(),this.copyMegaNavMenu(),this.enableMegaNavToggle(),this.replaceAllSectionsLink(),a.isIOS()&&a.getUserAgent.version>5&&i.write(function(){o(".navigation__scroll").css({"-webkit-overflow-scrolling":"touch"})})},jsEnableFooterNav:function(){i.write(function(){o(".navigation-container--default").removeClass("navigation-container--default").addClass("navigation-container--collapsed")})},copyMegaNavMenu:function(){var e=o.create(o(".js-mega-nav").html()),t=o(".js-mega-nav-placeholder");i.write(function(){o(".global-navigation",e).addClass("global-navigation--top"),t.append(e)})},replaceAllSectionsLink:function(){o(".js-navigation-header .js-navigation-toggle").attr("href","#nav-allsections")},enableMegaNavToggle:function(){e.on(document,"click",".js-navigation-toggle",function(e){var t=o("."+e.currentTarget.getAttribute("data-target-nav"));e.preventDefault(),i.write(function(){t.toggleClass("navigation-container--expanded navigation-container--collapsed"),n.emit(t.hasClass("navigation-container--expanded")?"modules:nav:open":"modules:nav:close")})})}};return s}),define("common/modules/commercial/donot-use-adblock",["common/utils/config","common/utils/detect","common/utils/storage","common/utils/template","common/modules/ui/message","common/modules/experiments/ab","common/modules/navigation/navigation","text!common/views/membership-message.html","common/views/svgs"],function(e,t,i,n,a,o,s,r,c){function l(){var e=o.getParticipations().AdblockStickyBanner;return e&&o.testCanBeRun("AdblockStickyBanner")&&("variant"===e.variant||"challenger"===e.variant)}function d(){var o=i.local.get("alreadyVisited")||0,s="https://membership.theguardian.com/about/supporter?INTCMP=adb-mv";"mobile"!==t.getBreakpoint()&&t.adblockInUse&&e.switches.adblock&&o&&!l()&&new a("adblock",{pinOnHide:!1,siteMessageLinkName:"adblock message variant",siteMessageCloseBtn:"hide"}).show(n(r,{supporterLink:s,messageText:"We notice you've got an ad-blocker switched on. Perhaps you'd like to support the Guardian another way?",linkText:"Become a supporter today",arrowWhiteRight:c("arrowWhiteRight")}))}return{init:d}}),define("common/utils/formatters",[],function(){return{integerCommas:function(e){var t,i,n,a=parseInt(e,10);if(!isNaN(a)){for(t=a.toFixed(0).split(""),n=t.length,i=t.length-1;i>=1;i--)(n-i)%3===0&&t.splice(i,0,",");return t.join("")}}}}),define("text!common/views/discussion/comment-count.html",[],function(){return'<a class="fc-trail__count fc-trail__count--commentcount" href="<%=url%>" data-link-name="Comment count"><%=icon%> <%=count%></a>\n'}),define("text!common/views/discussion/comment-count--content.html",[],function(){return'<a href="<%=url%>" data-link-name="Comment count" class="commentcount2 tone-colour">\n    <h3 class="commentcount2__heading"><%=icon%> Comments</h3>\n    <span class="commentcount2__value tone-colour"><%=count%></span>\n</a>\n'}),define("common/modules/discussion/comment-count",["bonzo","fastdom","qwery","common/utils/$","common/utils/_","common/utils/ajax","common/utils/formatters","common/utils/mediator","common/utils/template","common/views/svgs","text!common/views/discussion/comment-count.html","text!common/views/discussion/comment-count--content.html"],function(e,t,i,n,a,o,s,r,c,l,d,u){function h(t){var n=i("["+b+"]",t);return a.groupBy(n,function(t){return e(t).attr(b)})}function p(e){return a.chain(e).keys().uniq().sortBy().join(",").value()}function m(e){var t=e.getElementsByTagName("a")[0];return(t?t.pathname:"")+"#comments"}function f(n,o){n.forEach(function(n){a.forEach(o[n.id],function(a){var o,r,d,u,h=e(a),p=h.attr("data-discussion-url")||m(a);("true"!==h.attr("data-discussion-closed")||0!==n.count)&&(o=h.data("commentcount-format"),u=c(y[o]||w,{url:p,icon:l("commentCount16icon",["inline-tone-fill"]),count:s.integerCommas(n.count)}),d=i(".js-item__meta",a),r=d.length?e(d):h,t.write(function(){r.append(u),h.removeAttr(b),h.removeClass("u-h")}))})}),t.write(function(){r.emit("modules:commentcount:loaded",n)})}function g(e){t.read(function(){var t=h(e||document.body),i=p(t);o({url:k+i,type:"json",method:"get",crossOrigin:!0,success:function(e){e&&e.counts&&f(e.counts,t)}})})}function v(){document.body.querySelector("[data-discussion-id]")&&g(document.body),r.on("modules:related:loaded",g)}var b="data-discussion-id",k="/discussion/comment-counts.json?shortUrls=",y={content:u},w=d;return{init:v,getCommentCounts:g,getContentIds:p,getElementsIndexedById:h}}),define("common/modules/identity/facebook-authorizer",[],function(){function e(e){this.appId=e,this.onConnected=new t,this.onFBScriptLoaded=new t,this.onUserDataLoaded=new t,this.onNotAuthorized=new t,this.onNotLoggedIn=new t,this.cancelledLogin=new t}function t(){this.callbacks=[]}var i="facebook-jssdk";return e.DEFAULT_PERMISSIONS={scope:"email,publish_actions,publish_stream"},e.prototype.onConnected=null,e.prototype.onFBScriptLoaded=null,e.prototype.onUserDataLoaded=null,e.prototype.onNotAuthorized=null,e.prototype.onNotLoggedIn=null,e.prototype.cancelledLogin=null,e.accessToken=null,e.userId=null,e.userData=null,e.prototype.login=function(t,i){return(i||!this.accessToken&&!this.loginPending)&&(this.cancelledLogin.reset(),this.onConnected.reset(),this.loginPending=!0,this._loadFacebookAPI().then(function(i){i.login(this._handleGotLoginStatus.bind(this,!0),t||e.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},e.prototype.getLoginStatus=function(t){return this.loginStatusPending||(this.loginStatusPending=!0,this._loadFacebookAPI().then(function(i){i.getLoginStatus(this._handleGotLoginStatus.bind(this,!1),t||e.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},e.prototype._handleGotLoginStatus=function(e,t){switch(this.loginStatusPending=!1,this.loginPending=!1,t.status){case"connected":this.accessToken=t.authResponse.accessToken,this.userId=t.authResponse.userID,this._getUserData(),this.onConnected.resolve(FB,t.authResponse);break;case"not_authorized":this._getUserData(),this.onNotAuthorized.resolve(this);break;default:e&&this.cancelledLogin.resolve(),this.onNotLoggedIn.resolve()}},e.prototype._getUserData=function(){FB.api("/me",this._handleGotUserData.bind(this))},e.prototype._handleGotUserData=function(e){e&&!e.error&&(this.userData=e,this.onUserDataLoaded.resolve(e))},e.prototype._loadFacebookAPI=function(){return window.FB?this.onFBScriptLoaded.resolve(window.FB):document.getElementById(i)||this._requiredAlready||(this._requiredAlready=!0,this._loadFacebookScript()),this.onFBScriptLoaded},e.prototype._loadFacebookScript=function(){guardian.config.page.isPreview||require(["js!facebook.js"],this._handleScriptLoaded.bind(this))},e.prototype._handleScriptLoaded=function(){FB&&(FB.init({appId:this.appId,status:!0,cookie:!0,xfbml:!0}),this.onFBScriptLoaded.resolve(FB))},t.prototype.resolve=function(){this.args=Array.prototype.slice.apply(arguments);var e,t=this.callbacks.length;for(e=0;t>e;e++)this.callbacks[e].apply(null,this.args);this.callbacks=[]},t.prototype.then=function(e){void 0!==this.args?e.apply(null,this.args):this.callbacks.push(e)},t.prototype.reset=function(){this.args=void 0},e}),define("common/modules/navigation/profile",["bean","bonzo","fastdom","common/utils/config","common/utils/_","common/utils/ajax","common/utils/mediator","common/modules/identity/api"],function(e,t,i,n,a,o,s,r){function c(e){this.opts=a.assign(this.opts,e),this.dom.container=document.body.querySelector("."+c.CONFIG.classes.container),this.dom.content=this.dom.container.querySelector("."+c.CONFIG.classes.content),this.dom.popup=document.body.querySelector("."+c.CONFIG.classes.popup),this.dom.register=document.body.querySelector("."+c.CONFIG.classes.register)}return c.CONFIG={eventName:"modules:profilenav",classes:{container:"js-profile-nav",content:"js-profile-info",popup:"js-profile-popup",register:"js-profile-register"}},c.prototype.opts={url:"https://profile.theguardian.com"},c.prototype.dom={},c.prototype.init=function(){this.setFragmentFromCookie()},c.prototype.setFragmentFromCookie=function(){var e=r.getUserFromCookie(),n=t(this.dom.container),a=t(this.dom.content),o=t(this.dom.popup),s=t(this.dom.register);e&&(n.hasClass("is-signed-in")||i.write(function(){a.text(e.displayName),n.addClass("is-signed-in"),s.hide()}),o.html('<ul class="popup popup__group popup--profile is-off" data-link-name="Sub Sections" data-test-id="popup-profile">'+this.menuListItem("Comment activity",this.opts.url+"/user/id/"+e.id)+this.menuListItem("Edit profile",this.opts.url+"/public/edit")+this.menuListItem("Email preferences",this.opts.url+"/email-prefs")+this.menuListItem("Change password",this.opts.url+"/password/change")+this.menuListItem("Sign out",this.opts.url+"/signout")+"</ul>")),this.emitLoadedEvent(e)},c.prototype.menuListItem=function(e,t){return'<li class="popup__item"><a href="'+t+'" class="brand-bar__item--action" data-link-name="'+e+'">'+e+"</a></li>"},c.prototype.emitLoadedEvent=function(e){s.emit(c.CONFIG.eventName+":loaded",e)},c.prototype.emitErrorEvent=function(){s.emit(c.CONFIG.eventName+":error")},c}),define("common/modules/ui/toggles",["bean","bonzo","common/utils/$","common/utils/_","common/utils/mediator"],function(e,t,i,n,a){var o=function(){var o,s=this,r=["popup--search"],c="js-toggle-ready";this.init=function(){o=Array.prototype.slice.call(document.body.querySelectorAll("[data-toggle]")),o.forEach(function(i){if(!t(i).hasClass(c)){var n=s.getTarget(i);n&&(i.toggleTarget=n,t(i).addClass(c),e.add(i,"click",function(e){e.preventDefault(),s.toggle(i,o)}))}})},this.reset=function(e){o.filter(function(t){return!(e===t||n.contains(r,i(t).attr("data-toggle")))}).map(s.close)},a.on("module:clickstream:click",function(e){s.reset(e?e.target:null)})};return o.prototype.toggle=function(e,i){var n=this;i.forEach(function(i){i===e?n[t(i).hasClass("is-active")?"close":"open"](i):n.close(i)})},o.prototype.getTarget=function(e){var i=t(e).data("toggle");return i?document.body.querySelector("."+i):void 0},o.prototype.open=function(e){t(e).addClass("is-active"),t(e.toggleTarget).removeClass("is-off")},o.prototype.close=function(e){t(e).removeClass("is-active"),t(e.toggleTarget).addClass("is-off")},o}),define("common/modules/identity/autosignin",["bonzo","common/utils/ajax","common/utils/config","common/utils/time","common/modules/analytics/omniture","common/modules/identity/api","common/modules/identity/facebook-authorizer","common/modules/navigation/profile","common/modules/ui/message","common/modules/ui/toggles"],function(e,t,i,n,a,o,r,c,l,d){function u(){var e=this;e.header=document.body,this.init=function(){if(o.shouldAutoSigninInUser()){var t=i.page.fbAppId,a=new r(t);a.getLoginStatus(),a.onConnected.then(function(t,i){a.onUserDataLoaded.then(function(t){t.email&&e.signin(i,t.name)})}),a.onNotLoggedIn.then(function(){var e=n.currentDate();o.setNextFbCheckTime(e.setDate(e.getDate()+1))}),a.onNotAuthorized.then(function(){var e=n.currentDate();o.setNextFbCheckTime(e.setMonth(e.getMonth()+1))})}},this.signin=function(n,o){t({url:i.page.idWebAppUrl+"/jsapi/facebook/autosignup",cache:!1,crossOrigin:!0,type:"jsonp",data:{signedRequest:n.signedRequest,accessToken:n.accessToken},success:function(t){if(e.welcome(o),"ok"===t.status){var n=new c({url:i.page.idUrl});n.init(),(new d).init(),a.populateEventProperties("Social signin auto"),s.eVar13="facebook auto",s.linkTrackVars+=",eVar13",s.tl(this,"o","Social signin auto")}}})},this.welcome=function(e){var t='<p class="site-message__message" data-test-id="facebook-auto-sign-in-banner">Welcome '+e+', you’re signed in to the Guardian using Facebook. <a data-link-name="fb auto : sign out" href="'+i.page.idUrl+'/signout"/>Sign out</a>.</p>';new l("fbauto",{important:!0}).show(t)}}return u}),define("common/modules/identity/cookierefresh",["common/modules/identity/api","common/utils/storage"],function(e,t){function i(){this.init=function(){if(t.local.isStorageAvailable()&&e.isUserLoggedIn()){var i=t.local.get(e.lastRefreshKey),n=(new Date).getTime();this.shouldRefreshCookie(i,n)&&(e.getUserFromApiWithRefreshedCookie(),t.local.set(e.lastRefreshKey,n))}},i.prototype.shouldRefreshCookie=function(e,t){return!e||t>parseInt(e,10)+2592e6}}return i}),define("common/modules/ui/smartAppBanner",["common/utils/$","common/utils/cookies","common/utils/detect","common/utils/storage","common/utils/template","common/modules/user-prefs","common/modules/ui/message"],function(e,t,i,n,a,o,s){function r(){return(i.isIOS()||i.isAndroid())&&!i.isFireFoxOSApp()}function c(){return 4>g}function l(){var e=i.isIOS()?"ios":"android",n=new s(e),o=v+("mobile"===i.getBreakpoint()?"":b);n.show(a(o,m[e.toUpperCase()])),t.add(p,g+1)}function d(){r()&&c()&&l()}function u(){return"block"===e(".site-message--android").css("display")||"block"===e(".site-message--ios").css("display")}function h(){return e(".site-message--android").dim().height||e(".site-message--ios").dim().height}var p="GU_SMARTAPPBANNER",m={IOS:{LOGO:"http://assets.guim.co.uk/images/apps/ios-logo.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"http://ad-x.co.uk/API/click/guardian789057jo/web3537df56ab1f7e",STORE:"on the App Store"},ANDROID:{LOGO:"http://assets.guim.co.uk/images/apps/android-logo-2x.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"https://app.adjust.com/642i3r?deep_link=x-gu://www.theguardian.com/?source=adjust",STORE:"in Google Play"}},f=t.get(p),g=f&&!isNaN(f)?parseInt(f,10):0,v='<img src="<%=LOGO%>" class="app__logo" alt="Guardian App logo" /><div class="app__cta"><h4 class="app__heading">The Guardian app</h4><p class="app__copy">Instant alerts. Offline reading.<br/>Tailored to you.</p><p class="app__copy"><strong>FREE</strong> – <%=STORE%></p></div><a href="<%=LINK%>" class="app__link">View</a>',b='<img src="<%=SCREENSHOTS%>" class="app__screenshots" alt="screenshots" />';return{init:d,isMessageShown:u,getMessageHeight:h}}),define("common/modules/navigation/sticky",["bean","qwery","fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/mediator","common/modules/experiments/ab","common/modules/ui/smartAppBanner"],function(e,t,i,n,a,o,s,r,c,l){function d(){this.breakpoint=s.getBreakpoint(),"mobile"===this.breakpoint&&o.switches.disableStickyNavOnMobile||(this.$els={},this.config={showHeaderDepth:.5,showHeaderAppleDepth:.3,showNavigationDepth:150,distance:0,direction:"down",showNavigation:!1,thresholdMobile:400,firstLoadDepth:500,isNavigationLocked:!1},this.isMobile=a.contains(this.breakpoint,"mobile"),this.isTablet=a.contains(this.breakpoint,"tablet"),this.isAppleCampaign=o.page.hasBelowTopNavSlot,this.isSensitivePage="childrens-books-site"===o.page.section||o.page.shouldHideAdverts,this.isProfilePage="identity"===o.page.section,this.isAdblockInUse=s.adblockInUse,this.isAdblockABTest=c.getParticipations().AdblockStickyBanner&&c.testCanBeRun("AdblockStickyBanner")&&("variant"===c.getParticipations().AdblockStickyBanner.variant||"challenger"===c.getParticipations().AdblockStickyBanner.variant),a.bindAll(this,"updatePositionMobile","updatePositionAdblock","updatePositionApple","updatePosition"))}return d.prototype.init=function(){"mobile"===this.breakpoint&&o.switches.disableStickyNavOnMobile||(this.$els.header=n(".js-header"),this.$els.bannerDesktop=n(".js-top-banner-above-nav"),this.$els.bannerMobile=n(".js-top-banner-mobile"),this.$els.bannerBelowNav=n(".js-top-banner-below-nav"),this.$els.main=n(".js-maincontent"),this.$els.navHeader=n(".js-navigation-header"),this.$els.burgerIcon=n(".js-navigation-toggle",this.$els.navHeader),this.$els.navigation=n(".js-navigation",this.$els.navHeader),this.$els.navigationGlobal=n(".js-global-navigation"),this.$els.popupSearch=n(".js-popup--search"),this.$els.window=n(window),i.read(function(){this.headerBigHeight=this.$els.navHeader.dim().height,this.navigationClassList=this.$els.navigation.attr("class")}.bind(this)),this.$els.window.scrollTop()>this.config.firstLoadDepth&&(this.isAppleCampaign?i.read(this.updatePositionApple):i.read(this.updatePosition)),this.isAdblockInUse&&!this.isMobile&&this.isAdblockABTest&&i.read(function(){this.$els.bannerDesktop=n(".js-adblock-sticky")}.bind(this)),this.updateMethod=this.getUpdateMethod(),this.isProfilePage?this.updatePositionProfile():r.on("window:throttledScroll",this[this.updateMethod]),r.on("modules:nav:open",function(){this.lockStickyNavigation()}.bind(this)),r.on("modules:nav:close",function(){this.unlockStickyNavigation()}.bind(this)),r.on("modules:search",function(){this.$els.popupSearch.hasClass("is-off")?this.unlockStickyNavigation():this.lockStickyNavigation()}.bind(this)))},d.prototype.getUpdateMethod=function(){return this.isMobile?"updatePositionMobile":this.isAdblockInUse&&!this.isAdblockABTest?"updatePositionAdblock":this.isAppleCampaign?"updatePositionApple":"updatePosition"},d.prototype.unlockStickyNavigation=function(){this.config.isNavigationLocked=!1,i.write(function(){this.$els.navigationGlobal.removeClass("navigation__expandable--sticky").attr("height","auto")}.bind(this))},d.prototype.lockStickyNavigation=function(){this.config.isNavigationLocked=!0,i.read(function(){if(this.$els.header.hasClass("l-header--is-slim")||this.isMobile||this.isTablet){var e=window.innerHeight-n(".js-mega-nav-placeholder")[0].getBoundingClientRect().top;i.write(function(){this.$els.navigationGlobal.addClass("navigation__expandable--sticky").css("height",e)}.bind(this))}}.bind(this))},d.prototype.setScrollDirection=function(e){this.config.direction=e>this.config.prevScroll?"down":"up",this.config.prevScroll=e},d.prototype.shouldShowNavigation=function(e){"up"===this.config.direction&&0===this.config.distance&&(this.config.distance=e),this.config.showNavigation=Math.abs(e-this.config.distance)>this.config.showNavigationDepth},d.prototype.showNavigation=function(n){this.shouldShowNavigation(n),"up"===this.config.direction&&this.config.showNavigation?i.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-down-mobile").addClass("animate-up-mobile"):this.isSensitivePage?this.$els.navigation.css("display","block"):this.$els.navigation.removeClass("animate-down-desktop").addClass("animate-up-desktop")}.bind(this)):(this.config.showNavigation&&(this.config.distance=0,this.$els.navHeader.hasClass("navigation-container--expanded")&&e.fire(t(".js-navigation-toggle")[0],"click")),i.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-up-mobile").addClass("animate-down-mobile"):this.isSensitivePage?this.$els.navigation.css("display","none"):this.$els.navigation.removeClass("animate-up-desktop").addClass("animate-down-desktop")}.bind(this)))},d.prototype.setNavigationDefault=function(){i.write(function(){this.$els.navigation.removeAttr("class"),this.$els.navigation.attr("class",this.navigationClassList)}.bind(this))},d.prototype.updatePosition=function(){var e=0,t=window.pageYOffset;this.isSensitivePage||(e=this.$els.bannerDesktop.dim().height||128),this.setScrollDirection(t),t>=this.headerBigHeight+e*this.config.showHeaderDepth&&!this.config.isNavigationLocked?(i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1020","margin-top":0,"backface-visibility":"hidden"}),this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight}),this.$els.main.css("margin-top",this.headerBigHeight+e),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.config.isNavigationLocked||"Interactive"===o.page.contentType||this.showNavigation(t)):t>=this.headerBigHeight?(i.write(function(){this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight,"z-index":"1019"}),this.config.isNavigationLocked||this.$els.header.addClass("l-header--is-slim")}.bind(this)),this.config.isNavigationLocked||("up"===this.config.direction?i.write(function(){this.$els.header.css({"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)"})}.bind(this)):i.write(function(){this.$els.header.css({position:"absolute","margin-top":e,"-webkit-transform":"translateY(-500%)","-ms-transform":"translateY(-500%)",transform:"translateY(-500%)","z-index":"1018"}),this.$els.main.css("margin-top",this.headerBigHeight+e)}.bind(this)))):(i.write(function(){this.$els.bannerDesktop.css({position:"fixed",top:0,width:"100%","z-index":"1019","backface-visibility":"hidden"}),"Interactive"!==o.page.contentType&&this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"relative",width:"100%","margin-top":e,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"1018"}),this.$els.main.css("margin-top",0),this.isSensitivePage&&this.$els.navigation.css("display","block")}.bind(this)),this.setNavigationDefault()),n(".gssb_c").length>0&&i.write(function(){n(".gssb_c").hide()})},d.prototype.updatePositionProfile=function(){var e=this.$els.header.dim().height;i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1020","margin-top":0,"backface-visibility":"hidden"}),this.$els.main.css("padding-top",e)}.bind(this))},d.prototype.updatePositionAdblock=function(){var e=this.$els.header.dim().height,t=window.pageYOffset;this.setScrollDirection(t),t>=e?(i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1000","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)","backface-visibility":"hidden"}),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"}),this.$els.main.css("margin-top",this.headerBigHeight)}.bind(this)),this.showNavigation(t)):(i.write(function(){this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"static",width:"100%","margin-top":0,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"998"}),this.$els.main.css("margin-top",0)}.bind(this)),this.setNavigationDefault())},d.prototype.updatePositionApple=function(){var e=this.$els.bannerBelowNav.dim().height||336,t=window.pageYOffset;this.setScrollDirection(t),t>=e*this.config.showHeaderAppleDepth?(i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1020","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)","backface-visibility":"hidden"}),this.$els.bannerBelowNav.css({position:"static",top:null,width:"100%","z-index":"1019"}),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.showNavigation(t)):(i.write(function(){this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"static",width:"100%","margin-top":0,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"1018"})}.bind(this)),this.setNavigationDefault())},d.prototype.fixedBannerMobile=function(e,t){i.write(function(){this.$els.header.css({position:"fixed",top:e,width:"100%","z-index":"1021","margin-top":0,"backface-visibility":"hidden"}),this.$els.bannerMobile.css({position:"fixed",top:this.headerBigHeight+e,width:"100%","z-index":"1019","backface-visibility":"hidden"}),this.$els.main.css("margin-top",this.headerBigHeight+t)}.bind(this))},d.prototype.updatePositionMobile=function(){var e=this.$els.bannerMobile.dim().height,t=window.pageYOffset,n=l.getMessageHeight();i.write(function(){this.setScrollDirection(t),l.isMessageShown()?n>t?i.write(function(){this.$els.header.css({position:"static",top:null,width:"100%","z-index":"1021","margin-top":0}),this.$els.bannerMobile.css({position:"static",top:null,width:"100%","z-index":"1019"}),this.$els.main.css("margin-top",0)}.bind(this)):t>n&&t<this.config.thresholdMobile?(i.write(function(){this.fixedBannerMobile(0,e)}.bind(this)),this.setNavigationDefault()):t>this.config.thresholdMobile&&(i.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(t)):t<this.config.thresholdMobile?(i.write(function(){this.fixedBannerMobile(0,e)}.bind(this)),this.setNavigationDefault()):(i.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(t))}.bind(this))},new d}),define("common/modules/navigation/search",["bean","fastdom","common/utils/_","common/utils/$","common/utils/config","common/utils/detect","common/utils/mediator"],function(e,t,i,n,a,o,s){
var r=function(){var r,c,l,d,u,h=this;a.switches.googleSearch&&a.page.googleSearchUrl&&a.page.googleSearchId&&(c=a.page.googleSearchUrl+"?cx="+a.page.googleSearchId,l="identity"===a.page.section?3:10,r=i.throttle(function(){h.load()}),e.on(document,"click",".js-search-toggle",function(e){r(),h.checkResults(),h.focusSearchField(),e.preventDefault(),s.emit("modules:search")}),e.on(document,"keydown",".gsc-input",function(){t.read(function(){var e=n(".gssb_c"),i=e.css("top"),a=n(window).scrollTop();t.write(function(){e.css({top:parseInt(i,10)+a,"z-index":"1030"})})})}),e.on(document,"click",".search-results",function(e){var t=e.target;"a"===t.nodeName.toLowerCase()&&(t.target="_self")})),this.focusSearchField=function(){var e=n("input.gsc-input");e.length>0&&(e.focus(),a.switches.viewability&&"Interactive"!==a.page.contentType&&(clearInterval(u),u=setInterval(h.checkResults,250)))},this.checkResults=function(){if(n(".gsc-resultsbox-visible").length>0){var e=n(".js-popup--search");t.write(function(){e.css("height","auto"),n(".gsc-results",e).css({height:"auto","overflow-y":"visible"})}),(n(".l-header--is-slim").length>0||"mobile"===o.getBreakpoint())&&t.read(function(){var i=window.innerHeight-e[0].getBoundingClientRect().top;t.write(function(){e.css("height",i),n(".gsc-results",e).css({height:i-150,"overflow-y":"auto"})})}),clearInterval(u)}},this.load=function(){var e,i;d=document.body.querySelector(".js-search-placeholder"),window.__gcse={callback:h.focusSearchField},Array.prototype.forEach.call(document.querySelectorAll(".js-search-placeholder"),function(e){e!==d&&t.write(function(){e.innerHTML=""})}),d.innerHTML||(t.write(function(){d.innerHTML='<div class="search-box" role="search"><gcse:searchbox></gcse:searchbox></div><div class="search-results" data-link-name="search"><gcse:searchresults webSearchResultSetSize="'+l+'" linkTarget="_self"></gcse:searchresults></div>'}),e=document.createElement("script"),e.async=!0,e.src=c,i=document.getElementsByTagName("script")[0],t.write(function(){i.parentNode.insertBefore(e,i)}))},this.init=function(){}};return r}),define("common/modules/onward/more-tags",["common/utils/$","bean"],function(e,t){function i(){this.init=function(){var i=e(".js-more-tags");0!==i.length&&(i.removeClass("modern-hidden"),t.on(document.querySelector(".js-more-tags__link"),"click",function(){e(".modern-hidden-tag").removeClass("modern-hidden"),i.addClass("modern-hidden")}))}}return i}),define("common/modules/onward/tech-feedback",["bean","fastdom","common/utils/_","common/utils/$"],function(e,t,i,n){function a(e){return i.reduce(e,function(e,t,i){return e+i+": "+t+"\n"},"")}function o(e){return function(){var t=e.attr("href"),i={browser:window.navigator.userAgent,page:window.location,width:window.innerWidth},n="\r\n\r\n\r\n\r\n------------------------------\r\nAdditional technical data about your request - please do not edit:\r\n\r\n"+a(i)+"\r\n\r\n";e.attr("href",t+"?body="+encodeURIComponent(n))}}function s(t){var i=n(t);i.length&&e.on(i[0],"click",o(i))}return function(){s(".js-tech-feedback-mailto"),s(".js-userhelp-mailto"),s("[href=mailto:crosswords.beta@theguardian.com]")}}),define("common/modules/ui/accessibility-prefs",["common/utils/_","common/utils/$","common/modules/user-prefs"],function(e,t,i){function n(e){var i=e+"(100%)";t("body").css({"-webkit-filter":i,filter:i})}return function(){e.forEach(["sepia","grayscale","invert","contrast","saturate","opacity"],function(e){i.isOn(e)&&n(e)})}}),define("common/modules/ui/clickstream",["bean","common/utils/_","common/utils/mediator","common/modules/experiments/ab"],function(e,t,i,n){var a=function(a){a=a||{};var o=a.filter||[],s=function(e){return o.filter(function(t){return t===e})},r=function(e){var t,i,n,a;return e=e||"",t=e.match(/:\/\/(.[^\/]+)/),t&&(t=t[1],i=e.match(/^(https?:)\/\//),i=i?i[1]:void 0,n=window.location.hostname,a=window.location.protocol),0===e.indexOf("mailto:")?!1:!t||t===n&&i===a},c=function(e,i){if(!e.el)return!1;var n,a=e.el,o=a.tagName.toLowerCase(),l=a.getAttribute("data-link-name");if(l&&e.tag.unshift(l),"body"===o)return e.tag=e.tag.join(" | "),delete e.el,e.validTarget&&a.getAttribute("data-link-test")&&(e.tag=a.getAttribute("data-link-test")+" | "+e.tag),e;var d=JSON.parse(a.getAttribute("data-custom-event-properties")||"{}");return e.customEventProperties=t.merge(d,e.customEventProperties),e.validTarget||(e.validTarget=s(o).length>0||!!i,e.validTarget&&(e.target=a,n=a.getAttribute("href"),e.samePage=n&&0===n.indexOf("#")||"button"===o||a.hasAttribute("data-is-ajax"),e.sameHost=e.samePage||r(n))),!e.linkContext&&a.getAttribute("data-link-context-path")&&(e.linkContextPath=a.getAttribute("data-link-context-path"),e.linkContextName=a.getAttribute("data-link-context-name")),e.el=a.parentNode,c(e)};return a.addListener!==!1&&e.add(document.body,"click",function(e){var a,o={el:e.target,tag:[]};o.target=e.target,o=c(o),a=n.getActiveTestsEventIsApplicableTo(o),void 0!==a&&a.length>0&&(o.tag=t.map(a,function(e){var t=n.getTestVariantId(e);return"AB,"+e+","+t+","+o.tag}).join(",")),i.emit("module:clickstream:click",o)}),{getClickSpec:c}};return a}),define("common/modules/ui/dropdowns",["common/utils/$","bonzo","bean"],function(e,t,i){function n(){i.on(document.body,"click",o.button,function(i){var n=t(e.ancestor(i.currentTarget,o.container.substring(1)));n.toggleClass("dropdown--active"),a(n)})}function a(i){i.each(function(i){var n=t(i).hasClass("dropdown--active");e(o.content,i).attr("aria-hidden",!n),e(o.button,i).attr("aria-expanded",n),e(o.content,i).attr("aria-expanded",n)})}var o={container:".dropdown",button:".dropdown__button",content:".dropdown__content"};return{init:n,updateAria:a}}),define("common/modules/ui/faux-block-link",["bean","bonzo","fastdom","common/utils/$"],function(e,t,i,n){var a=".u-faux-block-link__overlay",o="u-faux-block-link--hover";return function(){var t=function(e){i.write(function(){n(e.currentTarget).parent().addClass(o)})},s=function(e){i.write(function(){n(e.currentTarget).parent().removeClass(o)})};e.on(document.body,"mouseenter",a,t),e.on(document.body,"mouseleave",a,s)}}),define("common/modules/ui/fonts",["bonzo","qwery","raven","common/utils/$","common/utils/ajax","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/storage"],function(e,t,i,n,a,o,s,r,c,l){function d(){return"off"===s.get("GU_fonts")}var u="gu.fonts.",h=r.getFontFormatSupport(navigator.userAgent);return function(){return!o.switches.webFonts||d()||t(".webfonts").length?!1:(l.local.get(u+"format")||l.local.set(u+"format",h),void n(".webfont:not([data-loaded-from])").each(function(t){var n=e(t),o=n.data("cache-file-"+("Off"===r.fontHinting?"":"hinted-"+r.fontHinting+"-")+h),s=n.data("min-breakpoint");(!s||r.isBreakpoint({min:s}))&&a({url:o,type:"jsonp",jsonpCallbackName:"guFont",success:function(e){if(!e)return void i.captureMessage("Failed to load fonts");var t=o.match(/fonts\/([^/]*?)\/?([^/]*)\.(woff2|woff|tff).json$/),a=t[1],s=t[2];n.text(e.css).attr("data-loaded-from","ajax"),l.local.clearByPrefix(u+s.replace(/(CleartypeHinted|AutoHinted)$/,"")),l.local.set(u+s+"."+a,e.css),c.emit("modules:fonts:loaded",name)}})}))}}),define("common/modules/ui/relativedates",["common/utils/$","common/utils/config","common/utils/mediator","bonzo"],function(e,t,i,n){function a(){return new Date((new Date).getTime()-w)}function o(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}function s(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]}function r(e){return 10>e?"0"+e:e}function c(e){var t=a();return e&&e.toDateString()===t.toDateString()}function l(e){var t=a();return e&&e.valueOf()>t.valueOf()-864e5}function d(e,t){var i=a();return e&&e.valueOf()>i.valueOf()-1e3*(t||0)}function u(e){var t=a(),i=a();return i.setDate(t.getDate()-1),e.toDateString()===i.toDateString()}function h(e){var t=a().valueOf()-6048e5;return e.valueOf()>=t}function p(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())}function m(e,t,i){var n,a={s:{"short":["s"],med:["s ago"],"long":[" second ago"," seconds ago"]},m:{"short":["m"],med:["m ago"],"long":[" minute ago"," minutes ago"]},h:{"short":["h"],med:["h ago"],"long":[" hour ago"," hours ago"]},d:{"short":["d"],med:["d ago"],"long":[" day ago"," days ago"]}};return a[e]?(n=a[e][t],1===i?n[0]:n[n.length-1]):""}function f(e,t){t=t||{};var i,n,r,d,f=new Date(Number(e)),v=a(),b=t.format||"short",k="short"===t.format||"med"===t.format;return p(f)?(d=parseInt((v.getTime()-f)/1e3,10),0>d?!1:t.notAfter&&d>t.notAfter?!1:55>d?d+m("s",b,d):3300>d?(i=Math.round(d/60,10),i+m("m",b,i)):c(f)||k&&l(f)?(n=Math.round(d/3600),n+m("h",b,n)):k&&h(f)?(r=Math.round(d/3600/24),r+m("d",b,r)):u(f)?"Yesterday"+g(f):432e3>d?[o(f.getDay()),f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(t.showTime?g(f):""):[f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(t.showTime?g(f):"")):!1}function g(e){return" "+e.getHours()+":"+r(e.getMinutes())}function v(){return e(".js-timestamp, .js-item__timestamp")}function b(){var t="js-locale-timestamp";e("."+t).each(function(e){var i,a=n(e),o=parseInt(a.attr("data-timestamp"),10);o&&(i=new Date(o),e.innerHTML=r(i.getHours())+":"+r(i.getMinutes()),a.removeClass(t))})}function k(e){e=e||{},v().each(function(t){var i,a=n(t),o=parseInt(a.attr("data-timestamp"),10)||a.attr("datetime"),s=new Date(o),r=f(s.getTime(),{showTime:n(a.parent()).hasClass("block-time"),format:a.attr("data-relativeformat"),notAfter:e.notAfter});r?(i=a[0].querySelector(".timestamp__text")||a[0],i.getAttribute("title")||i.setAttribute("title",n(i).text()),i.innerHTML=r):e.notAfter&&a.addClass("modern-hidden")})}function y(e){k(e),b(e)}var w=t.page&&t.page.renderTime?Math.max(0,new Date-new Date(t.page.renderTime)):0;return["related","autoupdate"].forEach(function(e){i.on("modules:"+e+":render",k)}),{makeRelativeDate:f,isWithinSeconds:d,init:y}}),define("text!common/views/breaking-news.html",[],function(){return'<div class="js-breaking-news__item breaking-news__item" data-breaking-article-id="<%=id%>">\n    <div class="breaking-news__item-content">\n        <div class="breaking-news__item-header">\n            <%=marque36icon%>\n            <em class="breaking-news__item-kicker">Breaking news</em>\n            <div class="breaking-news__item-headline"><%=headline%></div>\n        </div>\n        <div class="breaking-news__item-options">\n            <button class="js-breaking-news__item__close button button--tertiary u-faux-block-link__promote"\n                    aria-label="Dismiss"\n                    data-link-name="close button"><%=closeIcon%></button>\n        </div>\n    </div>\n    <a class="u-faux-block-link__overlay" href="/<%=id%>"></a>\n</div>\n'}),define("common/modules/onward/breaking-news",["bean","bonzo","common/utils/$","fastdom","qwery","common/utils/_","common/utils/ajax","common/utils/config","common/utils/storage","common/utils/template","common/modules/ui/relativedates","common/modules/analytics/omniture","common/views/svgs","text!common/views/breaking-news.html"],function(e,t,i,n,a,o,s,r,c,l,d,u,h,p){function m(e,t){var i={};return o.forEach(e,function(e){i[e]=t[e]||!1}),i}var f,g,v,b,k=1200,y={sport:"sport",football:"sport"},w="/breaking-news/lite.json",_="gu.breaking-news.hidden",T=1;return function(){var C=r.page,S=c.local.get(_)||{};C&&S[C.pageId]!==!0&&s({url:w,type:"json",crossOrigin:!0}).then(function(s){var r,w=(s.collections||[]).filter(function(e){return o.isArray(e.content)&&e.content.length}).map(function(e){return e.href=(e.href||"").toLowerCase(),e}),E="international"===C.internationalEdition,D=E?"intl":(C.edition||"").toLowerCase(),I=y[C.section],A=o.chain([w.filter(function(e){return"global"===e.href}).map(function(e){return e.content}),w.filter(function(e){return e.href===D}).map(function(e){return e.content}),w.filter(function(e){return I&&e.href===I}).map(function(e){return e.content})]).flatten().filter(function(e){var t=e.frontPublicationDate;return t&&d.isWithinSeconds(new Date(t),k)}).value(),j=A.map(function(e){return e.id}),M=3e3;j.indexOf(C.pageId)>-1&&(S[C.pageId]=!0),c.local.set(_,m(j,S)),r=o.chain(A).filter(function(e){return S[e.id]!==!0}).first(T).value(),r.length&&(f=f||t(a(".js-breaking-news-placeholder")),v=h("marque36icon"),b=h("closeCentralIcon"),o.forEach(r,function(a){var o;a.marque36icon=v,a.closeIcon=b,o=t.create(l(p,a)),e.on(i(".js-breaking-news__item__close",o)[0],"click",function(){n.write(function(){i("[data-breaking-article-id]").hide()}),S[a.id]=!0,c.local.set(_,m(j,S))}),n.write(function(){f.append(o)}),S[a.id]===!1&&(M=0)}),setTimeout(function(){var e,i="breaking news alert shown"+(M?"":" 2 or more times");g=g||t(document.body),e=t(t.create(f[0])).addClass("breaking-news--spectre").removeClass("breaking-news--hidden"),n.write(function(){g.append(e)}),M||n.write(function(){f.removeClass("breaking-news--fade-in")}),n.write(function(){f.removeClass("breaking-news--hidden")}),u.trackLink(this,i)},M))})}}),define("common/modules/social/pinterest",["fastdom","bean","common/utils/$"],function(e,t,i){function n(t){t.preventDefault(),i("img:not(.gu-image):not(.responsive-img):not(.gallery2__img)").each(function(t){e.write(function(){i(t).attr("data-pin-nopin","true")})}),require(["js!https://assets.pinterest.com/js/pinmarklet.js?r="+(new Date).getTime()])}var a,o=".social__item--pinterest";return function(){a=a||i(o),a.each(function(e){t.on(e,"click",n)})}}),define("text!common/views/save-for-later/save-link.html",[],function(){return'<a class="button button--medium button--tertiary save-for-later__button js-save-for-later__button save-for-later__button--<%= isSaved ? \'saved\' : \'save\' %>"\n   data-link-name="Save | <%= position %>"\n   data-component="save-for-later"\n   href="<%= url %>">\n    <%= icon %>\n    <!-- Not logged in -->\n    <span class="save-for-later__label save-for-later__label--save">Save for later</span>\n    <span class="save-for-later__label save-for-later__label--saved">Article saved</span>\n</a>\n'}),define("text!common/views/save-for-later/save-button.html",[],function(){return"<button class=\"button button--medium button--tertiary save-for-later__button js-save-for-later__button save-for-later__button--<%= isSaved ? 'saved' : 'save' %>\"\n   data-link-name=\"<%= isSaved ? 'Unsave' : 'Save' %> | <%= position %>\"\n   data-component=\"save-for-later\"\n   <%= !isSaved ? 'data-custom-event-properties=\\'{ \"prop74\": \"' + config.page.contentType + 'Save:' + config.page.pageId + '\" }\\'' : '' %>>\n    <%= icon %>\n    <span class=\"save-for-later__label save-for-later__label--save\">Save for later</span>\n    <span class=\"save-for-later__label save-for-later__label--saved\">Article saved</span>\n</button>\n"}),define("text!common/views/identity/saved-for-later-profile-link.html",[],function(){return'<li class="popup__item">\n    <a href="<%=idUrl%>/saved-for-later" class="brand-bar__item--action brand-bar__item--saved-for-later" data-link-name="Saved for Later">Saved for later <span class="brand-bar__item--saved-for-later-count"></span></a>\n</li>\n'}),define("common/modules/save-for-later",["qwery","bonzo","bean","fastdom","common/utils/_","common/utils/$","common/utils/detect","common/utils/config","common/utils/mediator","common/utils/template","common/modules/identity/api","common/views/svgs","text!common/views/save-for-later/save-link.html","text!common/views/save-for-later/save-button.html","text!common/views/identity/saved-for-later-profile-link.html"],function(e,t,i,n,a,o,s,r,c,l,d,u,h,p,m){function f(){this.classes={saveThisArticle:".js-save-for-later",saveThisVideo:".js-save-for-later-video",saveThisArticleButton:".js-save-for-later__button",profileDropdownCount:".brand-bar__item--saved-for-later-count"},this.isContent=!/Network Front|Section|Tag/.test(r.page.contentType),this.userData={},this.savedArticlesUrl=r.page.idUrl+"/saved-for-later",a.bindAll(this,"save","delete","onSaveArticle","onDeleteArticle")}var g=u("bookmark",["rounded-icon"]),v=(r.page.shortUrl||"").replace("http://gu.com",""),b="web:"+s.getUserAgent.browser+":"+s.getBreakpoint();return f.prototype.init=function(){var i=d.isUserLoggedIn();if(i)d.getSavedArticles().then(function(i){var a={message:"Not found",description:"Resource not found"},o=e(".popup--profile")[0];if(n.write(function(){t(o).prepend(t.create(l(m.replace(/^\s+|\s+$/gm,""),{idUrl:r.page.idUrl}))),this.updateSavedCount()}.bind(this)),"error"===i.status&&i.errors[0].message===a.message&&i.errors[0].description===a.description){var s=(new Date).toISOString().replace(/\.[0-9]+Z/,"+00:00");this.userData={version:s,articles:[]},this.saveIntroArticle()}else this.userData=i.savedArticles;this.renderSaveButtonsInArticle()}.bind(this));else{var a=l("<%= idUrl%>/save-content?returnUrl=<%= returnUrl%>&shortUrl=<%= shortUrl%>&platform=<%= platform%>&INTCMP=SFL-SO",{idUrl:r.page.idUrl,returnUrl:encodeURIComponent(document.location.href),shortUrl:v,platform:b});this.renderArticleSaveButton({url:a,isSaved:!1})}},f.prototype.renderSaveButtonsInArticle=function(){this.getSavedArticle(v)?this.renderArticleSaveButton({isSaved:!0}):this.renderArticleSaveButton({isSaved:!1})},f.prototype.renderArticleSaveButton=function(n){var o=t(e(this.classes.saveThisArticle));o.each(function(e){var o=t(e);o.css("display","block");var s={icon:g,isSaved:n.isSaved,position:o.attr("data-position"),config:r};n.url?o.html(l(h,a.assign({url:n.url},s))):(o.html(l(p,s)),i.one(o[0],"click",this.classes.saveThisArticleButton,this[n.isSaved?"deleteArticle":"saveArticle"].bind(this,r.page.pageId,v)))}.bind(this))},f.prototype.save=function(e,t,i){var n=(new Date).toISOString().replace(/\.[0-9]+Z/,"+00:00"),a={id:e,shortUrl:t,date:n,read:!1,platform:b};this.userData.articles.push(a),d.saveToArticles(this.userData).then(function(e){i("error"!==e.status)})},f.prototype["delete"]=function(e,t,i){this.userData.articles=a.filter(this.userData.articles,function(e){return e.shortUrl!==t}),d.saveToArticles(this.userData).then(function(e){i("error"!==e.status)})},f.prototype.saveArticle=function(e,t){this.save(e,t,this.onSaveArticle)},f.prototype.onSaveArticle=function(e){this.renderArticleSaveButton({isSaved:e}),e&&this.updateSavedCount()},f.prototype.deleteArticle=function(e,t){this["delete"](e,t,this.onDeleteArticle)},f.prototype.onDeleteArticle=function(e){this.renderArticleSaveButton({isSaved:!e}),e&&this.updateSavedCount()},f.prototype.getSavedArticle=function(e){return a.some(this.userData.articles,function(t){return t.shortUrl.indexOf(e)>-1})},f.prototype.updateSavedCount=function(){var e=o(this.classes.profileDropdownCount),t=o(".brand-bar__item--profile"),i=this.userData.articles.length;n.write(function(){i>0?(o(".save-for-later__icon",t).attr("data-saved-content-count",i),e.text(i)):(o(".save-for-later__icon",t).removeAttr("data-saved-content-count"),e.text(""))})},f.prototype.saveIntroArticle=function(){var e="help/insideguardian/2015/jul/21/introducing-save-for-later",t="/p/4ab7x";this.saveArticle(e,t)},f}),define("text!common/views/international-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    You’re viewing a beta release of the Guardian’s international edition.\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a href="https://www.surveymonkey.com/s/ZCPVY5Q" data-link-name="survey">Leave feedback</a>\n    </li>\n    <li class="site-message__actions__item">\n        <i class="i i-back"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/uk" data-link-name="opt-out">Opt out and go to UK edition</a>\n    </li>\n</ul>\n'}),define("text!common/views/international-control-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    We\'re testing an international edition and would love your feedback\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/intl" data-link-name="opt-in">Preview beta</a>\n    </li>\n</ul>\n'}),define("bootstraps/identity-common",["common/utils/robust","common/modules/identity/api"],function(e,t){function i(e){t.init(e),t.isUserLoggedIn()&&(document.documentElement.className=document.documentElement.className.replace(/\bid--signed-out\b/,"id--signed-in"))}return function(){e.catchErrorsAndLog("i-css-class",i)}}),define("bootstraps/common",["bean","bonzo","qwery","common/utils/$","common/utils/background","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/template","common/utils/url","common/utils/robust","common/utils/storage","common/modules/analytics/foresee-survey","common/modules/analytics/livestats","common/modules/analytics/headlines-test-analytics","common/modules/analytics/media-listener","common/modules/analytics/omniture","common/modules/analytics/register","common/modules/analytics/scrollDepth","common/modules/analytics/css-logging","common/modules/analytics/simple-metrics","common/modules/commercial/user-ad-targeting","common/modules/commercial/donot-use-adblock","common/modules/discussion/comment-count","common/modules/experiments/ab","common/modules/identity/autosignin","common/modules/identity/cookierefresh","common/modules/navigation/navigation","common/modules/navigation/sticky","common/modules/navigation/profile","common/modules/navigation/search","common/modules/onward/history","common/modules/onward/more-tags","common/modules/onward/tech-feedback","common/modules/ui/accessibility-prefs","common/modules/ui/clickstream","common/modules/ui/dropdowns","common/modules/ui/faux-block-link","common/modules/ui/fonts","common/modules/ui/message","common/modules/ui/relativedates","common/modules/ui/smartAppBanner","common/modules/ui/tabs","common/modules/ui/toggles","common/modules/user-prefs","common/modules/onward/breaking-news","common/modules/social/pinterest","common/modules/save-for-later","text!common/views/international-message.html","text!common/views/international-control-message.html","bootstraps/identity-common"],function(e,t,i,n,a,o,s,r,c,l,d,u,h,p,m,f,g,v,b,k,y,w,_,T,C,S,E,D,I,A,j,M,L,x,N,O,P,V,F,B,R,U,H,q,$,K,z,G,Y,W,J,Q){var X={initialiseTopNavItems:function(){var e,t=new M,i=document.getElementById("header");i&&o.switches.idProfileNavigation&&(e=new j({url:o.page.idUrl}),e.init()),t.init(i)},initialiseNavigation:function(){I.init()},initialiseStickyHeader:function(){!o.switches.viewability||o.page.isProd&&"Interactive"===o.page.contentType||"Crossword"===o.page.contentType||A.init()},showTabs:function(){var e=new q;["modules:popular:loaded","modules:geomostpopular:ready"].forEach(function(t){c.on(t,function(t){e.init(t)})})},showToggles:function(){var e=new $;e.init(document),e.reset(),V.init()},showRelativeDates:function(){var e=U;e.init(),c.on("fragment:ready:dates",function(t){e.init(t)})},initClickstream:function(){new P({filter:["a","button"]})},showAdblockMessage:function(){T.init()},logLiveStats:function(){m.log()},loadAnalytics:function(){v.go(),o.switches.ophan&&require(["ophan/ng"],function(e){o.switches.scrollDepth&&(c.on("scrolldepth:data",e.record),new k({isContent:/Article|LiveBlog/.test(o.page.contentType)}))})},cleanupCookies:function(){s.cleanUp(["mmcore.pd","mmcore.srv","mmid","GU_ABFACIA","GU_FACIA","GU_ALPHA","GU_ME","at"])},updateHistory:function(){"Network Front"!==o.page.contentType&&L.logSummary(o.page),"Video"===o.page.contentType&&L.logHistory(o.page)},showHistoryInMegaNav:function(){o.switches.historyTags&&c.once("modules:nav:open",function(){L.showInMegaNav()})},initAutoSignin:function(){o.switches.facebookAutosignin&&"mobile"!==r.getBreakpoint()&&(new E).init()},idCookieRefresh:function(){o.switches.idCookieRefresh&&(new D).init()},windowEventListeners:function(){["resize","scroll","orientationchange"].forEach(function(t){e.on(window,t,c.emit.bind(c,"window:"+t))})},throttledScrollEvent:function(){var e=!1;window.addEventListener("scroll",function(){e||(e=!0,requestAnimationFrame(function(){c.emitEvent("window:throttledScroll"),e=!1}))})},checkIframe:function(){window.self!==window.top&&n("html").addClass("iframed")},runForseeSurvey:function(){o.switches.foresee&&p.load()},startRegister:function(){o.page.isSSL||b.initialise()},showMoreTagsLink:function(){(new x).init()},initDiscussion:function(){o.switches.discussion&&C.init()},testCookie:function(){var e=d.getUrlVars();e.test&&s.addSessionCookie("GU_TEST",encodeURIComponent(e.test))},adTestCookie:function(){var e=d.getUrlVars();"clear"===e.adtest?s.remove("adtest"):e.adtest&&s.add("adtest",encodeURIComponent(e.adtest),10)},initOpenOverlayOnClick:function(){var i;e.on(document.body,"click","[data-open-overlay-on-click]",function(e){var a=t(e.currentTarget).data("open-overlay-on-click");i=document.body.scrollTop,t(document.body).addClass("has-overlay"),n("#"+a).addClass("overlay--open").appendTo(document.body)}),e.on(document.body,"click",".js-overlay-close",function(e){var a=n.ancestor(e.target,"overlay");a&&t(a).removeClass("overlay--open"),t(document.body).removeClass("has-overlay"),i&&window.setTimeout(function(){document.body.scrollTop=i,i=null},1)})},loadBreakingNews:function(){o.switches.breakingNews&&"identity"!==o.page.section&&z()},runCssLogging:function(){o.switches.cssLogging&&y()},initPublicApi:function(){window.guardian.api={logCss:y}},internationalSignposting:function(){"internationalEdition"in o.page&&("international"===o.page.internationalEdition&&"international"===o.page.pageId?new R("international-with-survey-new",{pinOnHide:!0}).show(l(W,{})):"control"===o.page.internationalEdition&&"uk"===o.page.pageId&&new R("international",{pinOnHide:!0}).show(l(J,{})))},initPinterest:function(){/Article|LiveBlog|Gallery|Video/.test(o.page.contentType)&&G()},saveForLater:function(){if(o.switches.saveForLater){var e=new Y;e.init()}},headlinesTestAnalytics:function(){f.go()}};return{init:function(){a(u.makeBlocks([["c-analytics",X.loadAnalytics],["c-fonts",B],["c-identity",Q],["c-adverts",_.requestUserSegmentsFromId],["c-discussion",X.initDiscussion],["c-test-cookie",X.testCookie],["c-ad-cookie",X.adTestCookie],["c-event-listeners",X.windowEventListeners],["c-throttled-scroll-event",X.throttledScrollEvent],["c-breaking-news",X.loadBreakingNews],["c-block-link",F],["c-iframe",X.checkIframe],["c-tabs",X.showTabs],["c-top-nav",X.initialiseTopNavItems],["c-init-nav",X.initialiseNavigation],["c-sticky-header",X.initialiseStickyHeader],["c-toggles",X.showToggles],["c-dates",X.showRelativeDates],["c-clickstream",X.initClickstream],["c-history",X.updateHistory],["c-sign-in",X.initAutoSignin],["c-id-cookie-refresh",X.idCookieRefresh],["c-history-nav",X.showHistoryInMegaNav],["c-forsee",X.runForseeSurvey],["c-start-register",X.startRegister],["c-tag-links",X.showMoreTagsLink],["c-smart-banner",H.init],["c-adblock",X.showAdblockMessage],["c-log-stats",X.logLiveStats],["c-cookies",X.cleanupCookies],["c-overlay",X.initOpenOverlayOnClick],["c-css-logging",X.runCssLogging],["c-public-api",X.initPublicApi],["c-simple-metrics",w],["c-tech-feedback",N],["c-media-listeners",g],["c-accessibility-prefs",O],["c-international-signposting",X.internationalSignposting],["c-pinterest",X.initPinterest],["c-save-for-later",X.saveForLater],["c-headlines-test-analytics",X.headlinesTestAnalytics]])),window.console&&window.console.log&&!o.page.isDev&&window.console.log("##::::: ##: ########::::::: ###:::: ########:: ########:::: ##:::: ##: ####: ########:: ####: ##::: ##:: ######::\n##: ##: ##: ##.....::::::: ## ##::: ##.... ##: ##.....::::: ##:::: ##:. ##:: ##.... ##:. ##:: ###:: ##: ##... ##:\n##: ##: ##: ##::::::::::: ##:. ##:: ##:::: ##: ##:::::::::: ##:::: ##:: ##:: ##:::: ##:: ##:: ####: ##: ##:::..::\n##: ##: ##: ######:::::: ##:::. ##: ########:: ######:::::: #########:: ##:: ########::: ##:: ## ## ##: ##:: ####\n##: ##: ##: ##...::::::: #########: ##.. ##::: ##...::::::: ##.... ##:: ##:: ##.. ##:::: ##:: ##. ####: ##::: ##:\n##: ##: ##: ##:::::::::: ##.... ##: ##::. ##:: ##:::::::::: ##:::: ##:: ##:: ##::. ##::: ##:: ##:. ###: ##::: ##:\n ###. ###:: ########:::: ##:::: ##: ##:::. ##: ########:::: ##:::: ##: ####: ##:::. ##: ####: ##::. ##:. ######::\n\nEver thought about joining us?\nhttp://developers.theguardian.com/join-the-team.html")}}}),define("common/utils/defer-to-analytics",["common/utils/mediator"],function(e){function t(t){i?t():e.on("analytics:ready",function(){t()})}var i=!1;return e.on("analytics:ready",function(){i=!0}),t}),define("common/modules/analytics/omnitureMedia",["common/utils/_","common/utils/config","qwery"],function(e,t,i){function n(n){function a(e){return n.el().getAttribute(e)}var o,r,c=a("data-embed-path")||t.page.pageId,l=i("audio",n.el()).length?"audio":"video",d=!1,u=!1,h=!!guardian.isEmbed,p={"video:request":"event98","preroll:request":"event97","preroll:play":"event59","preroll:skip":"event99","preroll:end":"event64","video:play":"event17","audio:play":"event19","video:25":"event21","video:50":"event22","video:75":"event23","video:end":"event18","audio:end":"event20","video:fullscreen":"event96",duration:"event57"};this.getDuration=function(){return parseInt(a("data-duration"),10)||void 0},this.getPosition=function(){return n.currentTime()},this.play=function(){"video"===l&&d&&this.startDurationEventTimer()},this.pause=function(){"video"===l&&this.stopDurationEventTimer()},this.sendEvent=function(t,i,n){s.eVar74=n?l+" ad":l+" content",s.eVar43=s.prop43=l.charAt(0).toUpperCase()+l.slice(1),s.eVar44=s.prop44=c,u&&(s.prop41="PrerollMilestone"),s.linkTrackVars="events,eVar11,prop41,eVar43,prop43,eVar44,prop44,prop9,channel",s.linkTrackEvents=e.values(p).join(","),s.events=t,s.tl(!0,"o",i||t),s.prop41=s.eVar44=s.prop44=s.eVar43=s.prop43=void 0},this.sendNamedEvent=function(e,t){this.sendEvent(p[e],e,t)},this.omnitureInit=function(){s.loadModule("Media"),s.Media.autoTrack=!1,s.Media.trackWhilePlaying=!1,s.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar61,channel",s.Media.trackEvents="event17,event18,event19,event20,event21,event22,event23,event57,event59,event64,event96,event97,event98",s.Media.segmentByMilestones=!1,s.Media.trackUsingContextData=!1,s.eVar11=s.prop11=h?"Embedded":t.page.sectionName||"",s.eVar7=s.pageName,s.Media.open(c,this.getDuration(),"HTML5 Video"),"video"===l&&this.sendNamedEvent("video:request")},this.getDurationWatched=function(){var e=0,t=new Date,i=(t-o)/1e3;return r&&d&&i>1&&(e=Math.round(i)),o=t,e},this.baseDurationEvent=function(){var e=[],t=this.getDurationWatched();return t&&e.push(p.duration+"="+t),e},this.sendSegment=function(e){var t=this.baseDurationEvent();t.push(e),this.sendEvent(t.join(","))},this.sendDurationEvent=function(){var e=this.baseDurationEvent();e&&e.length>0&&this.sendEvent(e.join(","))},this.startDurationEventTimer=function(){this.stopDurationEventTimer(),o=new Date,r=window.setInterval(this.sendDurationEvent.bind(this),1e4)},this.stopDurationEventTimer=function(){this.sendDurationEvent(),r&&window.clearInterval(r),r=!1},this.onContentPlay=function(){d=!0,this.sendNamedEvent("video:play"),this.startDurationEventTimer()},this.onPrerollPlay=function(){u=!0,this.sendNamedEvent("preroll:play",!0)},this.init=function(){this.omnitureInit(),n.on("play",this.play.bind(this)),n.on("pause",this.pause.bind(this)),n.one("video:preroll:request",this.sendNamedEvent.bind(this,"preroll:request",!0)),n.one("video:preroll:play",this.onPrerollPlay.bind(this)),n.one("video:preroll:end",this.sendNamedEvent.bind(this,"preroll:end",!0)),n.one("video:content:play",this.onContentPlay.bind(this)),n.one("audio:content:play",this.sendNamedEvent.bind(this,"audio:play")),n.one("video:content:25",this.sendNamedEvent.bind(this,"video:25")),
n.one("video:content:50",this.sendNamedEvent.bind(this,"video:50")),n.one("video:content:75",this.sendNamedEvent.bind(this,"video:75")),n.one("video:content:end",this.sendNamedEvent.bind(this,"video:end")),n.one("audio:content:end",this.sendNamedEvent.bind(this,"audio:end")),n.on("player:fullscreen",this.sendNamedEvent.bind(this,"video:fullscreen"))}}return n}),define("text!common/views/ui/video-ads-skip-overlay.html",[],function(){return'<div class="js-ads-skip vjs-ads-skip">\n    <span class="vjs-ads-skip__countdown">You may skip this advert in <span class="js-skip-remaining-time"><%=skipTimeout%></span> seconds</span>\n</div>\n'}),define("common/modules/video/events",["bean","qwery","common/utils/report-error","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/template","common/modules/analytics/omnitureMedia","common/modules/onward/history","text!common/views/ui/video-ads-skip-overlay.html"],function(e,t,i,n,a,o,s,r,c,l,d){function u(e){return E?"video":e.guMediaType}function h(e){return S&&!l.isRevisit(o.page.pageId)&&e.guAutoplay}function p(e,t){return u(t)+":"+e}function m(e,t,i){var n=E?"ophan/embed":"ophan/ng";e&&require([n],function(n){var a={};a[u(i)]={id:e,eventType:t.type},n.record(a)})}function f(e,t){I.concat(D.map(function(e){return"content:"+e})).forEach(function(i){e.one(p(i,e),function(i){m(t,i,e)})})}function g(e){new c(e).init()}function v(e){var t=!1,i={end:function(){t&&e.trigger(p("preroll:end",e)),e.removeClass("vjs-ad-playing--vpaid"),k(e,!0)},start:function(){var n=e.duration();n?(t=!0,e.trigger(p("preroll:play",e))):e.one("durationchange",i.start)},vpaidStarted:function(){e.addClass("vjs-ad-playing--vpaid")},ready:function(){e.trigger(p("preroll:ready",e)),e.one("adstart",i.start),e.one("adend",i.end),e.one("Vpaid::AdStarted",i.vpaidStarted),h(e)&&e.play()}};e.one("adsready",i.ready),e.one("adtimeout",function(){e.trigger("adscanceled"),k(e)})}function b(e,t){var i=["gu-video-457263940","gu-video-55e4835ae4b00856194f85c2"];o.switches.kruxVideoTracking&&o.switches.krux&&n(e.el()).attr("data-media-id")&&-1!==a.indexOf(i,n(e.el()).attr("data-media-id"))&&("videoPlaying"===t?Krux("admEvent","KAIQvckS",{}):"videoEnded"===t&&Krux("admEvent","KBaTegd5",{}))}function k(e){var t={end:function(){e.trigger(p("content:end",e))},play:function(){var i=e.duration();i?e.trigger(p("content:play",e)):e.one("durationchange",t.play)},timeupdate:function(){var t=Math.round(parseInt(e.currentTime()/e.duration()*100,10));D.reverse().some(function(i){return t>=i?(e.trigger(p("content:"+i,e)),!0):!1})},ready:function(){e.trigger(p("content:ready",e)),e.one("play",t.play),e.on("timeupdate",a.throttle(t.timeupdate,1e3)),e.one("ended",t.end),h(e)&&e.play()}};t.ready()}function y(t){t.on("playing",function(){b(t,"videoPlaying"),e.fire(document.body,"videoPlaying")}),t.on("pause",function(){e.fire(document.body,"videoPause")}),t.on("ended",function(){e.fire(document.body,"videoEnded"),b(t,"videoEnded")})}function w(i){var a,o={update:function(){var s=this.ima.getAdsManager(),r=s.getCurrentAd().getDuration()-s.getRemainingTime(),c=parseInt((i-r).toFixed(),10);c>0?n(".js-skip-remaining-time",this.el()).text(c):(window.clearInterval(a),n(".js-ads-skip",this.el()).html('<button class="js-ads-skip-button vjs-ads-skip__button" data-link-name="Skip video advert"><i class="i i-play-icon-grey skip-icon"></i><i class="i i-play-icon-gold skip-icon"></i>Skip advert</button>'),e.on(t(".js-ads-skip-button")[0],"click",o.skip.bind(this)))},skip:function(){n(".js-ads-skip",this.el()).hide(),this.trigger(p("preroll:skip",this)),this.ima.onAdComplete_(),this.ima.onContentResumeRequested_(),this.ima.getAdsManager().stop()},init:function(){var e=r(d,{skipTimeout:i});n(this.el()).append(e),a=setInterval(o.update.bind(this),250),this.one(p("content:play",this),function(){n(".js-ads-skip",this.el()).hide(),window.clearInterval(a)})}};this.one(p("preroll:play",this),o.init.bind(this))}function _(e){e&&"message"in e&&"code"in e&&i(new Error(e.message),{feature:"player",vjsCode:e.code},!1)}function T(e){var t=e.error();return null!==t?(_(t),4===t.code):!1}function C(e){e.on("error",function(){_(e.error()),n(".vjs-big-play-button").hide()})}var S=s.isBreakpoint({min:"desktop"}),E=!!guardian.isEmbed,D=[25,50,75],I=["preroll:request","preroll:ready","preroll:play","preroll:end","content:ready","content:play","content:end"];return{constructEventName:p,bindContentEvents:k,bindPrerollEvents:v,bindGlobalEvents:y,initOphanTracking:f,initOmnitureTracking:g,adSkipCountdown:w,handleInitialMediaError:T,bindErrorHandler:C}}),define("common/modules/video/fullscreener",["bean","bonzo"],function(e,t){function i(){var i=this,n=t.create('<div class="vjs-fullscreen-clickbox"></div>')[0],a={click:function(e){this.paused()?this.play():this.pause(),e.stop()},dblclick:function(e){e.stop(),this.isFullScreen()?this.exitFullscreen():this.requestFullscreen()}};t(n).appendTo(i.contentEl()),e.on(n,"click",a.click.bind(i)),e.on(n,"dblclick",a.dblclick.bind(i)),i.on("fullscreenchange",function(){this.isFullScreen()&&i.trigger("player:fullscreen")})}return i}),define("common/modules/video/supportedBrowsers",["bean","common/utils/$","common/utils/_","common/utils/detect","common/utils/config"],function(e,t,i,n,a){function o(i){e.on(t("."+r)[0],"click",function(){i.error(null)})}var s={Firefox:"25",Chrome:"28",IE:"9",Opera:"14",Safari:"6"},r="vjs-error-display__close",c=n.getUserAgent,l='Your browser is no longer supported. <a href="http://whatbrowser.org" target="_blank">Update your browser?</a> <button class="'+r+'">close</button>';return function(e){var t=i.some(s,function(e,t){return c.browser===t&&c.version<e});t&&a.switches.mediaPlayerSupportedBrowsers&&(e.error(l),o(e))}}),define("common/modules/video/tech-order",["common/utils/$","common/utils/_","common/utils/config"],function(e,t,i){function n(t){return e("source",t).map(function(e){var t=e.getAttribute("type");return o[t]?o[t]:t})}function a(e){return t.chain(n(e)).map(function(t){return e.canPlayType(t)}).compact().contains("probably").value()}var o={"video/m3u8":'video/m3u8; codecs="avc1.42C01e, mp4a.40.2"',"video/mp4":'video/mp4; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:large":'video/3gp:large; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:small":'video/3gp:small; codecs="avc1.42C01e, mp4a.40.2"',"video/webm":'video/webm; codecs="vp8, vorbis"'};return function(e){var t=["flash","html5"];return i.switches.html5MediaCompatibilityCheck&&"canPlayType"in e&&a(e)?t.reverse():t}}),define("text!common/views/ui/loading.html",[],function(){return'<div class="pamplemousse">\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n</div>\n'}),define("bootstraps/media",["bean","bonzo","fastdom","raven","common/utils/$","common/utils/_","common/utils/config","common/utils/defer-to-analytics","common/utils/detect","common/utils/mediator","common/utils/url","common/modules/analytics/beacon","common/modules/commercial/build-page-targeting","common/modules/component","common/modules/video/events","common/modules/video/fullscreener","common/modules/video/supportedBrowsers","common/modules/video/tech-order","text!common/views/ui/loading.html"],function(e,t,i,n,a,o,s,r,c,l,d,u,h,p,m,f,g,v,b){function k(){var e={ad_rule:1,correlator:(new Date).getTime(),cust_params:encodeURIComponent(d.constructQuery(h())),env:"vp",gdfp_req:1,impl:"s",iu:s.page.adUnit,output:"xml_vast2",scp:encodeURIComponent("slot=video"),sz:"400x300",unviewed_position_start:1};return"http://"+s.page.dfpHost+"/gampad/ads?"+d.constructQuery(e)}function y(e){e.loadingSpinner.contentEl().innerHTML=b}function w(e){a(".vjs-tech",e.el()).attr("aria-hidden",!0),a(".vjs-big-play-button",e.el()).attr("aria-hidden",!0),a(".vjs-current-time",e.el()).attr("aria-hidden",!0),a(".vjs-time-divider",e.el()).attr("aria-hidden",!0),a(".vjs-duration",e.el()).attr("aria-hidden",!0),a(".vjs-embed-button",e.el()).attr("aria-hidden",!0),a(".vjs-play-control",e.el()).attr("aria-label","video play"),a(".vjs-mute-control",e.el()).attr("aria-label","video mute"),a(".vjs-fullscreen-control",e.el()).attr("aria-label","video fullscreen")}function _(e,i){var n=videojs(e,i),o=a(e),s=parseInt(o.attr("data-duration"),10);return isNaN(s)||(n.duration(s),n.trigger("timeupdate")),n.guAutoplay="true"===a(e).attr("data-auto-play"),n.height(t(n.el()).parent().dim().height),n.width(t(n.el()).parent().dim().width),m.handleInitialMediaError(n)&&(n.dispose(),i.techOrder=v(e).reverse(),n=videojs(e,i)),n}function T(e){return e.target.firstChild&&e.target.firstChild.id&&e.target.firstChild.id.indexOf("flash_api")>0}function C(n){i.read(function(){a(".js-video-play-button",n).each(function(n){var o=t(n);e.on(n,"click",function(){var e,s,r;r=t(n).parent().parent(),e=a(".js-video-placeholder",r),s=a(".js-video-player",r),i.write(function(){e.removeClass("media__placeholder--active").addClass("media__placeholder--hidden"),s.removeClass("media__container--hidden").addClass("media__container--active"),o.removeClass("media__placeholder--active").addClass("media__placeholder--hidden"),E(a("video",s).get(0),!0)})}),i.write(function(){o.removeClass("media__placeholder--hidden").addClass("media__placeholder--active")})})})}function S(){s.page.videoJsFlashSwf&&(videojs.options.flash.swf=s.page.videoJsFlashSwf),videojs.plugin("adSkipCountdown",m.adSkipCountdown),videojs.plugin("fullscreener",f),i.read(function(){a(".js-gu-media--enhance").each(function(e){E(e,!1)})}),C(document.body),l.on("modules:related:loaded",C),l.on("page:media:moreinloaded",C)}function E(e,i){var a,l,d=e.tagName.toLowerCase(),h=t(e).addClass("vjs vjs-tech-"+videojs.options.techOrder[0]),p=h.attr("data-media-id"),f="true"===h.attr("data-block-video-ads"),b="true"===h.attr("data-show-end-slate"),C=h.attr("data-end-slate"),S=h.attr("data-embed-path"),E=v(e);s.page.videoJsVpaidSwf&&s.switches.vpaidAdverts&&(E=["vpaid"].concat(E),videojs.options.vpaid={swf:s.page.videoJsVpaidSwf}),a=_(e,{techOrder:E,controls:!0,autoplay:i,preload:"auto",plugins:{embed:{embeddable:!s.page.isFront&&s.switches.externalVideoEmbeds&&("Video"===s.page.contentType||"true"===h.attr("data-embeddable")),location:s.page.externalEmbedHost+"/embed/video/"+(S?S:s.page.pageId)}}}),m.bindErrorHandler(a),a.guMediaType=d,a.ready(function(){var e;y(a),m.bindGlobalEvents(a),w(a),g(a),a.one("playing",function(e){T(e)?u.counts("video-tech-flash"):u.counts("video-tech-html5")}),e=a.volume(),e&&(a.volume(0),a.volume(e)),a.persistvolume({namespace:"gu.vjs"}),r(function(){m.initOmnitureTracking(a),m.initOphanTracking(a,p),"video"===d?(a.fullscreener(),!s.switches.videoAdverts||f||s.page.isPreview||s.page.shouldHideAdverts||window.location.hash.match(/[#&]noads(&.*)?$/)?m.bindContentEvents(a):n.wrap({tags:{feature:"media"}},function(){m.bindPrerollEvents(a),a.adSkipCountdown(10),require(["js!http://imasdk.googleapis.com/js/sdkloader/ima3.js"],function(){a.ima({id:p,adTagUrl:k()}),a.trigger(m.constructEventName("preroll:request",a)),a.ima.requestAds()})})(),b&&c.isBreakpoint({min:"desktop"})&&D(a,C)):(a.playlist({mediaType:"audio",continuous:!1}),m.bindContentEvents(a))})}),l=o.debounce(function(){a.removeClass("vjs-mousemoved")},500),a.on("mousemove",function(){a.addClass("vjs-mousemoved"),l()})}function D(e,i){var n=new p,a="vjs-has-ended";n.endpoint=i,n.fetch(e.el(),"html"),e.one(m.constructEventName("content:play",e),function(){e.on("ended",function(){t(e.el()).addClass(a)})}),e.on("playing",function(){t(e.el()).removeClass(a)})}function I(){if(s.isMedia&&s.page.showRelatedContent){var e=s.page.contentType.toLowerCase(),t=new p,i=a(".js-onward")[0],n="/"+e+"/section/"+s.page.section;"seriesId"in s.page&&(n+="/"+s.page.seriesId),n+=".json?shortUrl="+s.page.shortUrl,"video"===e&&(n+="&exclude-tag=guardian-professional/guardian-professional"),t.endpoint=n,t.fetch(i).then(function(){l.emit("page:media:moreinloaded",i),l.emit("page:new-content",i)})}}function A(){if(s.isMedia){var e=s.page.contentType.toLowerCase(),t=new p,i=a("video"===e?".js-video-components-container":".js-media-popular")[0],n="/"+(s.page.isPodcast?"podcast":e)+"/most-viewed.json";t.manipulationType="video"===e?"append":"html",t.endpoint=n,t.fetch(i,"html").then(function(){l.emit("page:new-content")})}}function j(){s.switches.enhancedMediaPlayer&&require(["bootstraps/video-player"],n.wrap({tags:{feature:"media"}},S)),I(),A()}return{init:j}}),define("bootstraps/app",["qwery","raven","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/user-timing","bootstraps/common","bootstraps/media","bootstraps/sport"],function(e,t,i,n,a,o,s,r,c){var l=function(e,i){t.context({tags:{feature:e}},i.init,[])},d=function(){o.mark("App Begin"),l("common",s),i.page.isFront&&require(["bootstraps/facia"],function(e){l("facia",e)}),"lifeandstyle"===i.page.section&&"Sudoku"===i.page.series&&require(["bootstraps/sudoku"],function(e){l("sudoku",e)}),"Article"===i.page.contentType&&require(["bootstraps/article","bootstraps/image-content"],function(e,t){l("article",e),l("article : image-content",t)}),"LiveBlog"===i.page.contentType&&require(["bootstraps/liveblog","bootstraps/image-content"],function(e,t){l("liveBlog",e),l("liveBlog : image-content",t)}),(i.isMedia||"Interactive"===i.page.contentType)&&require(["bootstraps/trail"],function(e){l("media : trail",{init:e})}),(i.isMedia||e("video, audio").length)&&l("media",r),"Gallery"===i.page.contentType&&require(["bootstraps/gallery","bootstraps/image-content"],function(e,t){l("gallery",e),l("gallery : image-content",t)}),"ImageContent"===i.page.contentType&&require(["bootstraps/image-content","bootstraps/trail"],function(e,t){l("image-content",e),l("image-content : trail",{init:t})}),"football"===i.page.section&&require(["bootstraps/football"],function(e){l("football",e)}),"sport"===i.page.section&&l("sport",c),"identity"===i.page.section&&require(["bootstraps/profile"],function(e){l("profile",e)}),i.page.isPreferencesPage&&require(["bootstraps/preferences"],function(e){l("preferences",e)}),"help/accessibility-help"===i.page.pageId&&require(["bootstraps/accessibility"],function(e){l("accessibility",e)}),o.mark("App End")};return{go:d}});
//# sourceMappingURL=app.js.map