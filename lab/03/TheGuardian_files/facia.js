define("common/utils/to-array",[],function(){function t(t){return Array.prototype.slice.call(t)}return t}),define("common/modules/accessibility/main",["common/modules/user-prefs"],function(t){function e(e){for(var n in e)e.hasOwnProperty(n)&&t.set(i.KEY_PREFIX+"."+n,e[n])}function n(e){var n=t.get(i.KEY_PREFIX+"."+e);return n===!1?!1:!0}function o(t){return n(t)===!0}var i={KEY_PREFIX:"accessibility",saveState:e,isOn:o};return i}),define("common/modules/accessibility/helpers",["fastdom","common/modules/accessibility/main","common/utils/$"],function(t,e,n){function o(o){e.isOn("flashing-elements")?o&&o():t.write(function(){n(".js-flashing-image").remove(),o&&o()})}return{shouldHideFlashingElements:o}}),define("text!common/views/business/stock-value.html",[],function(){return'<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'}),define("text!common/views/business/stocks.html",[],function(){return'<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'}),define("common/modules/business/stocks",["common/utils/$","common/utils/_","common/utils/ajax","common/utils/config","common/utils/template","common/views/svgs","text!common/views/business/stock-value.html","text!common/views/business/stocks.html"],function(t,e,n,o,i,a,s,r){function c(){return e.contains(["uk/business","us/business","au/business"],o.page.pageId)}function l(){return n({url:"/business-data/stocks.json",type:"json",method:"get",crossOrigin:!0})}function u(t){return t>0?"+"+t:""+t}function d(t){var n=e.map(t.stocks,function(t){return i(s,{name:t.name,deltaClass:"stocks__stock-value--"+t.trend,price:t.price,change:u(t.change),closed:t.closed?'<div class="stocks__closed">closed</div>':"",closedInline:t.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:a("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:a("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:a("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return i(r,{stocks:n})}return function(){var e=t(".js-container--first .js-container__header");c()&&e&&l().then(function(t){t.stocks.length>0&&e.append(d(t))})}}),define("facia/modules/onwards/geo-most-popular-front",["qwery","common/utils/$","common/utils/config","common/utils/mediator","common/modules/analytics/register","common/modules/component"],function(t,e,n,o,i,a){function s(){i.begin("most-popular")}function r(t){e(".js-tabs-content",t).addClass("tabs__content--no-border"),e(".js-tabs",t).addClass("u-h")}return a.define(s),s.prototype.endpoint="/most-read-geo.json",s.prototype.isNetworkFront="Network Front"===n.page.contentType,s.prototype.isInternational="international"===n.page.pageId,s.prototype.manipulationType="html",s.prototype.prerender=function(){this.elem=t(".headline-list",this.elem)[0]},s.prototype.go=function(){var e=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=t(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront?r(this.parent):(this.tab=t(e,this.parent)[0],this.fetch(this.tab,"html")))},s.prototype.ready=function(){this.isNetworkFront&&r(this.parent),i.end("most-popular"),o.emit("modules:geomostpopular:ready")},s}),define("text!facia/views/button-toggle.html",[],function(){return'<button class="fc-container__toggle" data-link-name="<%=dataLink%>">\n    <%=icon%>\n    <span class="fc-container__toggle__text"><%=text%></span>\n</button>\n'}),define("facia/modules/ui/container-toggle",["bean","bonzo","fastdom","common/utils/$","common/utils/mediator","common/modules/user-prefs","common/utils/template","common/views/svgs","text!facia/views/button-toggle.html"],function(t,e,n,o,i,a,s,r,c){return function(t){function l(e){var i=o(".ad-slot--paid-for-badge",t);p=e,n.write(function(){u["displayed"===p?"removeClass":"addClass"]("fc-container--rolled-up"),d.attr("data-link-name",h["displayed"===p?"hidden":"displayed"]),m.text(h[p]),i.css("display","hidden"===p?"none":"block")})}var u=e(t),d=e(e.create(s(c,{text:"Hide",dataLink:"Show",icon:r("arrowicon")}))),m=o(".fc-container__toggle__text",d[0]),f="container-states",h={hidden:"Show",displayed:"Hide"},p="displayed",g=function(t,e){var n=a.get(f),o=t;"displayed"===e?delete n[o]:(n||(n={}),n[o]="closed"),a.set(f,n)},v=function(t){var e=a.get(f);e&&e[t]&&l("hidden")};a.remove("front-trailblocks"),this.addToggle=function(){var t=u.attr("data-id"),e=o(".js-container__header",u[0]);n.write(function(){e.append(d),u.removeClass("js-container--toggle").addClass("fc-container--has-toggle"),v(t)}),i.on("module:clickstream:click",function(e){e.target===d[0]&&(l("displayed"===p?"hidden":"displayed"),g(t,p))})}}}),define("common/utils/ajax-promise",["common/utils/ajax","raven","Promise"],function(t,e,n){return function(e){var o=new n(function(n,o){t(e).then(function(t){n(t)}).fail(function(t,e,n){var i=n&&n.statusText||"",a=n&&n.status||"",s="Error retrieving data ("+e+") (Status: "+a+") (StatusText: "+i+")",r=n?n:new Error(s);r.request=t,o(r)})});return o}}),define("facia/modules/ui/container-show-more",["bonzo","fastdom","qwery","common/utils/report-error","common/utils/_","common/utils/$","common/utils/ajax-promise","common/utils/config","common/utils/mediator","common/modules/user-prefs"],function(t,e,n,o,i,a,s,r,c,l){function u(t,e){var n=t.text[e];t.$textEl.html(n),t.$el.attr("data-link-name",e===L?"less":"more").toggleClass("button--primary",e!==L).toggleClass("button--tertiary",e===L).toggleClass(D,e===S),t.$container.toggleClass(_,e!==L).toggleClass(j,e===L),t.state=e}function d(t,e){var n=l.get(x,{type:"session"})||{};e!==L?delete n[t]:n[t]="more",l.set(x,n,{type:"session"})}function m(t){var e=l.get(x,{type:"session"});return e&&e[t]?L:$}function f(t){e.write(function(){u(t,t.state===$?L:$),d(t.id,t.state)})}function h(t){e.write(function(){t.$container.addClass(_).removeClass("js-container--fc-show-more").toggleClass(_,t.state===$),u(t,t.state)})}function p(t,e){return s({url:"/"+t+"/show-more/"+e+".json",crossOrigin:!0,timeout:T})}function g(e,n){var o=y(e),i=t.create(n);return a(E,i).each(function(e){var n=t(e);n.attr(I)in o&&n.remove()}),i}function v(t){e.write(function(){u(t,S)}),p(r.page.pageId,t.id).then(function(n){var o,i=n.html.trim();i&&(o=g(t.$container,i)),e.write(function(){o&&t.$placeholder.replaceWith(o),u(t,L),d(t.id,t.state),c.emit("modules:show-more:loaded")}),t.isLoaded=!0})["catch"](function(n){e.write(function(){u(t,$)}),b(t),o(new Error("Error retrieving show more ("+n+")"),!1)})}function w(t){e.write(function(){t.addClass("show-more__error-message--invisible")})}function b(n){n.$errorMessage&&n.$errorMessage.remove(),n.$errorMessage=t(t.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),e.write(function(){n.$errorMessage.insertAfter(n.$el),setTimeout(function(){w(n.$errorMessage)},5e3)})}function y(e){return i.groupBy(n(E,e),function(e){return t(e).attr(I)})}function k(t){var e,n,o,i=a(".js-show-more-button",t);return i?(e=t.attr("data-id"),n=m(e),o={$el:i,$container:t,$iconEl:a(".i",i),$placeholder:a(".js-show-more-placeholder",t),$textEl:a("."+C,i),id:e,text:{hidden:a(".js-button-text",i).text(),displayed:"Less",loading:"Loading&hellip;"},state:n,isLoaded:!1,$errorMessage:null},n===L&&v(o),o):void 0}var _="fc-show-more--hidden",j="fc-show-more--visible",C="js-button-text",x="section-states",D="collection__show-more--loading",I="data-id",E=".js-fc-item",L="displayed",$="hidden",S="loading",T=5e3;return{itemsByArticleId:y,dedupShowMore:g,init:function(){e.read(function(){var e=n(".js-container--fc-show-more").map(t),o=i.filter(i.map(e,k));i.forEach(o,h),c.on("module:clickstream:click",function(t){var e=i.find(o,function(e){return e.$el[0]===t.target});e&&e.state!==S&&(e.isLoaded?f(e):(e.$errorMessage&&e.$errorMessage.hide(),v(e)))})})}}}),define("facia/modules/ui/lazy-load-containers",["bonzo","fastdom","qwery","common/utils/_","common/utils/detect","common/utils/mediator"],function(t,e,n,o,i,a){var s=i.getViewport().height;return function(){var i=t(n(".js-front-bottom")),r=n(".js-container--lazy-load"),c=o.throttle(function(){0===r.length?a.off("window:throttledScroll",c):e.read(function(){var n,o=window.pageYOffset,a=o+t.viewport().height,c=i.offset().top;a>c-s&&(n=t(r.shift()),e.write(function(){n.removeClass("fc-container--lazy-load")}))})},500);a.on("window:throttledScroll",c),c()}}),define("common/utils/fastdom-promise",["fastdom","Promise"],function(t,e){function n(n,o){return new e(function(e){t[n](function(){e(o())})})}return{read:function(t){return n("read",t)},write:function(t){return n("write",t)}}}),define("text!facia/views/liveblog-block.html",[],function(){return'<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'}),define("facia/modules/ui/live-blog-updates",["bonzo","common/utils/_","common/utils/$","common/utils/ajax","common/utils/storage","common/modules/ui/relativedates","common/utils/template","common/utils/mediator","common/utils/detect","common/utils/fastdom-promise","text!facia/views/liveblog-block.html"],function(t,e,n,o,i,a,s,r,c,l,u){function d(t){var e=(t||{}).publishedDateTime,n=e?a.makeRelativeDate(new Date(e)):!1;return n||""}function m(t,n,o){var i=d(n);return i=i.match(/yesterday/i)?i.toLowerCase():i?"Latest update "+i+" ago":"Updated just now",s(u,{ariaHidden:!n.isNew,href:"/"+t+"#"+n.id,relativeTime:i,text:e.compact([n.title,n.body.slice(0,500)]).join(". "),index:o+1})}function f(n,o,i,a){var s=e.isUndefined(a);e.forEach(o,function(o){var r=!1,c=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],u=e.chain(i).slice(0,2).map(function(t,e){return!r&&(t.publishedDateTime>a||s)&&(t.isNew=!0,r=!0,c.push("fc-item__liveblog-blocks__inner--offset")),m(n,t,e)}).slice(0,r?2:1).value(),d=t.create('<div class="'+c.join(" ")+'">'+u.join("")+"</div>"),f=t(o);l.write(function(){f.append(d)}).then(function(){r&&h(d[0])})})}function h(t){p(t).then(function(n){var o;n||(o=e.debounce(function(){p(t,!0).then(function(t){t&&r.off("window:throttledScroll",o)})},b),r.on("window:throttledScroll",o))})}function p(e,n){return l.read(function(){return e.getBoundingClientRect().top}).then(function(o){return o>0&&D>o?(setTimeout(function(){var n=t(e);l.write(function(){n.removeClass("fc-item__liveblog-blocks__inner--offset")})},n?0:w),!0):void 0})}function g(t){return e.filter(t,function(t){return t.id&&t.publishedDateTime&&t.body&&t.body.length>=10})}function v(){return l.read(function(){var t={};return n(j).each(function(e){var n=e.getAttribute(C);n&&(t[n]=t[n]||[],t[n].push(e))}),t}).then(function(t){var n;e.isEmpty(t)||(n=i.session.get(x)||{},e.forEach(t,function(t,e){o({url:"/"+e+".json?rendered=false",type:"json",crossOrigin:!0}).then(function(o){var a=o&&g(o.blocks);a&&a.length&&(f(e,t,a,n[e]),n[e]=a[0].publishedDateTime,i.session.set(x,n))})}),_&&(_-=1,setTimeout(function(){v()},1e3*y),y*=k))})}var w=2e3,b=500,y=30,k=1,_=5,j=".js-liveblog-blocks",C="data-article-id",x="gu.liveblog.block-dates",D=c.getViewport().height;return{show:v}}),define("common/utils/proximity-loader",["bonzo","common/utils/_","common/utils/mediator","fastdom"],function(t,e,n,o){function i(t,e){var o={conditionFn:t,loadFn:e};r.push(o),1===r.length&&n.on("window:throttledScroll",l),s()}function a(e,n,a){o.read(function(){var o=t(e),s=function(){var t=o.offset(),e=t.top-n,i=t.top+t.height+n;return c.top>e&&c.bottom<i};i(s,a)})}var s,r=[],c={top:0,bottom:0},l=function(){c.top=window.pageYOffset,c.bottom=c.top+t.viewport().height,r=e.filter(r,function(t){return t.conditionFn()?void t.loadFn():!0}),0===r.length&&n.off("window:throttledScroll",l)};return s=e.debounce(l,2e3),{add:a}}),define("facia/modules/ui/football-snaps",["bonzo","common/utils/detect"],function(t,e){var n={resizeIfPresent:function(n){if("mobile"!==e.getBreakpoint()&&n){var o=t(n);o.css("height",o.parent().css("height"))}}};return n}),define("facia/modules/ui/snaps",["bean","bonzo","fastdom","common/utils/_","common/utils/$","common/utils/ajax","common/utils/detect","common/utils/mediator","common/utils/template","common/utils/to-array","common/utils/proximity-loader","common/modules/ui/relativedates","facia/modules/ui/football-snaps"],function(t,e,n,o,i,a,s,r,c,l,u,d,m){function f(){var t=l(i(".js-snappable.js-snap")).filter(function(t){var e=t.getAttribute("data-snap-type");return e&&b.indexOf(e)>-1}).filter(function(t){return t.getAttribute("data-snap-uri")});t.forEach(w)}function h(t,e){p(t,e),i(t).hasClass("facia-snap--football")&&m.resizeIfPresent(t)}function p(t,o){var i,a,s=e(t),r="facia-snap-point--";a=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){i=t.offsetWidth}),n.write(function(){a.map(function(t,e,n){var a=i>=t.width&&(n[e+1]?i<n[e+1].width:!0);return t.action=a?"addClass":o?"removeClass":!1,t}).filter(function(t){return t.action}).forEach(function(t){s[t.action](r+t.name)})})}function g(t){var o=e(t).offset(),i=Math.ceil((o.width||0)/2),a=400,s=t.getAttribute("data-snap-uri"),r=Math.min(Math.max(o.height||0,i),a),c=e.create('<div style="width: 100%; height: '+r+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],l=e.create('<iframe src="'+s+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];e(c).append(l),y.push(l),k(),n.write(function(){e(t).empty().append(c)})}function v(t,o){a({url:t.getAttribute("data-snap-uri"),type:o?"json":"html",crossOrigin:!0}).then(function(a){i.create(o?a.html:a).each(function(o){n.write(function(){e(t).html(o)})}),d.init(t)})}function w(t){u.add(t,1500,function(){switch(n.write(function(){e(t).addClass("facia-snap-embed")}),h(t),t.getAttribute("data-snap-type")){case"document":g(t);break;case"fragment":v(t);break;case"json.html":v(t,!0)}s.isIOS||r.on("window:resize",o.debounce(function(){h(t,!0)},200))})}var b=["document","fragment","json.html"],y=[],k=o.once(function(){t.on(window,"message",function(t){var n,i=o.find(y,function(e){return e.contentWindow===t.source});i&&(n=JSON.parse(t.data),"set-height"===n.type&&e(i).parent().css("height",n.value))})});return{init:f}}),define("facia/modules/ui/sponsorship",["common/utils/_","bean","bonzo","fastdom","Promise","qwery"],function(t,e,n,o,i,a){function s(){return new i(function(n){var o=function(i){u.push(i.keyCode),t.isEqual(d.slice(0,u.length),u)?u.length===d.length&&(n(),e.off(document,"keydown",o)):u=[]};e.on(document,"keydown",o)})}function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}function c(){return m[r(0,m.length-1)]}function l(){var e=t.map(a(".js-fc-item"),n);setInterval(function(){o.write(function(){e.forEach(function(t){m.forEach(function(e){t.removeClass(e)}),t.addClass(c())})})},1e3)}var u=[],d=[38,38,40,40,37,39,37,39,66,65],m=t.map(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(t){return"tone-"+t+"--item"});return function(){s().then(l)}}),define("facia/modules/onwards/search-tool",["bean","raven","common/utils/$","common/utils/_","common/utils/ajax","common/utils/mediator","common/modules/analytics/omniture"],function(t,e,n,o,i,a,s){function r(e){var r=null,c=null,l="",u="",d="",m={13:"enter",38:"up",40:"down"},f=e||{},h=f.container,p=f.apiUrl;return{init:function(){this.bindElements(h),this.bindEvents()},bindElements:function(t){r=n(".js-search-tool-list",t),c=n(".js-search-tool-input",t)},bindEvents:function(){t.on(document.body,"keyup",this.handleKeyEvents.bind(this)),t.on(document.body,"click",this.handleClick.bind(this)),a.on("autocomplete:toggle",this.toggleControls.bind(this))},hasInputValueChanged:function(){return l.length!==u.length},handleClick:function(t){var e=n(t.target).hasClass("js-search-tool-input"),o=this.isLink(t.target);e?(t.preventDefault(),a.emit("autocomplete:toggle",!0)):o?(t.preventDefault(),n(".active",r).removeClass("active"),n(o).addClass("active"),this.pushData()):a.emit("autocomplete:toggle",!1)},isLink:function(t){return n(t).hasClass("js-search-tool-link")?t:n.ancestor(t,"js-search-tool-link")},toggleControls:function(t){var e=n(".js-search-tool-input")[0],o=n(".js-search-tool"),i=n(".js-close-location"),a=n(".js-edit-location");t?(d=e.value,o.addClass("is-editing"),e.setSelectionRange(0,e.value.length),i.removeClass("u-h"),a.addClass("u-h")):(o.removeClass("is-editing"),this.clear(),this.setInputValue(d),i.addClass("u-h"),a.removeClass("u-h"))},pushData:function(){var t=n(".active",r),e={},o="set";if(0===t.length){if(""!==c.val())return!1;o="remove"}return e={id:t.attr("data-weather-id"),city:t.attr("data-weather-city"),store:o},a.emit("autocomplete:fetch",e),this.setInputValue(),s.trackLinkImmediate("weather location set by user"),d=e.city,c.blur(),setTimeout(this.destroy.bind(this),50),e},getListOfResults:function(t){return u=t.target.value,t.target.value.match(/\S/)?void(this.hasInputValueChanged()&&this.fetchData()):(this.clear(),void(l=""))},fetchData:function(){return i({url:p+u,type:"json",crossOrigin:!0}).then(function(t){this.renderList(t,5),l=u}.bind(this))},handleKeyEvents:function(t){var e=m[t.which||t.keyCode];n(t.target).hasClass("js-search-tool-input")&&("down"===e?(t.preventDefault(),this.move(1)):"up"===e?(t.preventDefault(),this.move(-1)):"enter"===e?this.pushData():this.getListOfResults(t))},move:function(t){var e=n(".active",r),o=parseInt(e.attr("id"),10);isNaN(o)&&(o=-1),e.removeClass("active"),this.getNewId(o+t)<0?this.setInputValue(l):(n("#"+this.getNewId(o+t)+"sti",r).addClass("active"),this.setInputValue())},getNewId:function(t){var e=n("li",r).length,o=t%e;return-1>o?o=e-1:t===e&&(o=-1),o},setInputValue:function(t){var e=t||n(".active",r).attr("data-weather-city");c.val(e)},renderList:function(t,e){var n=document.createDocumentFragment(),i=t.length-e;o(t).initial(i).each(function(t,e){var o=document.createElement("li");o.className="search-tool__item",o.innerHTML='<a role="button" href="#'+t.id+'" id="'+e+'sti" class="js-search-tool-link search-tool__link'+(0===e?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+t.id+'" data-weather-city="'+t.city+'">'+t.city+' <span class="search-tool__meta">'+t.country+"</span></a>",n.appendChild(o)}),this.clear().append(n)},clear:function(){return r.html("")},destroy:function(){this.clear()}}}return r}),define("facia/modules/onwards/weather",["bean","qwery","common/utils/report-error","common/utils/_","common/utils/$","common/utils/ajax-promise","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/template","common/modules/analytics/omniture","common/modules/user-prefs","facia/modules/onwards/search-tool"],function(t,e,n,o,i,a,s,r,c,l,u,d,m){var f=null,h=null,p="weather-location";return{init:function(){return s.switches&&s.switches.weather&&this.isNetworkFront()?void this.getDefaultLocation():!1},isNetworkFront:function(){return o.contains(["uk","us","au","international"],s.page.pageId)},getUserLocation:function(){var t=d.get(p);return t&&t.id?t:void 0},getWeatherData:function(t){return a({url:t,type:"json",method:"get",crossOrigin:!0})},saveUserLocation:function(t){d.set(p,{id:t.id,city:t.city})},getDefaultLocation:function(){var t=this.getUserLocation();return t?void this.fetchWeatherData(t):this.getWeatherData(s.page.weatherapiurl+".json").then(function(t){this.fetchWeatherData(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},fetchWeatherData:function(t){return this.getWeatherData(s.page.weatherapiurl+"/"+t.id+".json?_edition="+s.page.edition.toLowerCase()).then(function(e){this.render(e,t.city),this.fetchForecastData(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},clearLocation:function(){d.remove(p),h.setInputValue()},fetchForecastData:function(t){return this.getWeatherData(s.page.forecastsapiurl+"/"+t.id+".json?_edition="+s.page.edition.toLowerCase()).then(function(t){this.renderForecast(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},saveDeleteLocalStorage:function(t){"set"===t.store?(this.saveUserLocation(t),this.fetchWeatherData(t)):"remove"===t.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){t.on(document.body,"click",".js-toggle-forecast",function(t){t.preventDefault(),this.toggleForecast()}.bind(this)),c.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){i(".weather").toggleClass("is-expanded")},addSearch:function(){h=new m({container:i(".js-search-tool"),apiUrl:s.page.locationapiurl}),h.init()},render:function(t,e){this.attachToDOM(t.html,e),this.bindEvents(),this.addSearch(),this.render=function(t,e){this.attachToDOM(t.html,e),h.bindElements(i(".js-search-tool")),r.isBreakpoint({max:"phablet"})&&window.scrollTo(0,0)}},attachToDOM:function(t,e){f=i("#headlines .js-container__header"),i(".js-weather",f).remove(),f.append(t.replace(new RegExp("<%=city%>","g"),e))},renderForecast:function(t){var e=i(".js-weather-forecast"),n=t.html;e.empty().html(n)}}}),define("bootstraps/facia",["bonzo","qwery","common/utils/_","common/utils/$","common/utils/background","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/robust","common/utils/storage","common/utils/to-array","common/modules/accessibility/helpers","common/modules/experiments/ab","common/modules/business/stocks","facia/modules/onwards/geo-most-popular-front","facia/modules/ui/container-toggle","facia/modules/ui/container-show-more","facia/modules/ui/lazy-load-containers","facia/modules/ui/live-blog-updates","facia/modules/ui/snaps","facia/modules/ui/sponsorship","facia/modules/onwards/weather"],function(t,e,n,o,i,a,s,r,c,l,u,d,m,f,h,p,g,v,w,b,y,k){var _={showSnaps:function(){b.init(),r.on("modules:container:rendered",b.init)},showContainerShowMore:function(){r.addListeners({"modules:container:rendered":g.init,"page:front:ready":g.init})},showContainerToggle:function(){var t=function(t){o(".js-container--toggle",o(t||document)[0]).each(function(t){new p(t).addToggle()})};r.addListeners({"page:front:ready":t,"modules:geomostpopular:ready":n.partial(t,".js-popular-trails")})},upgradeMostPopularToGeo:function(){a.switches.geoMostPopular&&(new h).go()},showWeather:function(){a.switches.weather&&r.on("page:front:ready",function(){k.init()})},showLiveblogUpdates:function(){s.isBreakpoint({min:"desktop"})&&r.on("page:front:ready",function(){w.show()})},finished:function(){r.emit("page:front:ready")}},j=function(){i(c.makeBlocks([["f-accessibility",d.shouldHideFlashingElements],["f-snaps",_.showSnaps],["f-show-more",_.showContainerShowMore],["f-container-toggle",_.showContainerToggle],["f-geo-most-popular",_.upgradeMostPopularToGeo],["f-lazy-load-containers",v],["f-stocks",f],["f-sponsorship",y],["f-weather",_.showWeather],["f-live-blog-updates",_.showLiveblogUpdates],["f-finished",_.finished]]))};return{init:j}});
//# sourceMappingURL=facia.js.map